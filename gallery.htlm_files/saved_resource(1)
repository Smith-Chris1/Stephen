if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return;}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true;}if(c){this.addParam("bgcolor",c);}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=(_8)?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9);}};deconcept.SWFObject.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true);},setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16[_16.length]=key+"="+_18[key];}return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath);}_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath);}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _26=3;while(axo){try{_26++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_26);_23=new deconcept.PlayerVersion([_26,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _23;};deconcept.PlayerVersion=function(_29){this.major=_29[0]!=null?parseInt(_29[0]):0;this.minor=_29[1]!=null?parseInt(_29[1]):0;this.rev=_29[2]!=null?parseInt(_29[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}if(this.major>fv.major){return true;}if(this.minor<fv.minor){return false;}if(this.minor>fv.minor){return true;}if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(_2b==null){return q;}if(q){var _2d=q.substring(1).split("&");for(var i=0;i<_2d.length;i++){if(_2d[i].substring(0,_2d[i].indexOf("="))==_2b){return _2d[i].substring((_2d[i].indexOf("=")+1));}}}return"";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var _2f=document.getElementsByTagName("OBJECT");for(var i=_2f.length-1;i>=0;i--){_2f[i].style.display="none";for(var x in _2f[i]){if(typeof _2f[i][x]=="function"){_2f[i][x]=function(){};}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;;;(function($){var $scrollTo=$.scrollTo=function(target,duration,settings){$(window).scrollTo(target,duration,settings);};$scrollTo.defaults={axis:'y',duration:parseFloat($.fn.jquery)>=1.3?0:1};$scrollTo.window=function(scope){return $(window)._scrollable();};$.fn._scrollable=function(){return this.map(function(){var elem=this,isWin=!elem.nodeName||$.inArray(elem.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)
return elem;var doc=(elem.contentWindow||elem).document||elem.ownerDocument||elem;return $.browser.safari||doc.compatMode=='BackCompat'?doc.body:doc.documentElement;});};$.fn.scrollTo=function(target,duration,settings){if(typeof duration=='object'){settings=duration;duration=0;}
if(typeof settings=='function')
settings={onAfter:settings};if(target=='max')
target=9e9;settings=$.extend({},$scrollTo.defaults,settings);duration=duration||settings.speed||settings.duration;settings.queue=settings.queue&&settings.axis.length>1;if(settings.queue)
duration/=2;settings.offset=both(settings.offset);settings.over=both(settings.over);return this._scrollable().each(function(){var elem=this,$elem=$(elem),targ=target,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break;}
targ=$(targ,this);case'object':if(targ.is||targ.style)
toff=(targ=$(targ)).offset();}
$.each(settings.axis.split(''),function(i,axis){var Pos=axis=='x'?'Left':'Top',pos=Pos.toLowerCase(),key='scroll'+Pos,old=elem[key],max=$scrollTo.max(elem,axis);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(settings.margin){attr[key]-=parseInt(targ.css('margin'+Pos))||0;attr[key]-=parseInt(targ.css('border'+Pos+'Width'))||0;}
attr[key]+=settings.offset[pos]||0;if(settings.over[pos])
attr[key]+=targ[axis=='x'?'width':'height']()*settings.over[pos];}else{var val=targ[pos];attr[key]=val.slice&&val.slice(-1)=='%'?parseFloat(val)/100*max:val;}
if(/^\d+$/.test(attr[key]))
attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&settings.queue){if(old!=attr[key])
animate(settings.onAfterFirst);delete attr[key];}});animate(settings.onAfter);function animate(callback){$elem.animate(attr,duration,settings.easing,callback&&function(){callback.call(this,target,settings);});};}).end();};$scrollTo.max=function(elem,axis){var Dim=axis=='x'?'Width':'Height',scroll='scroll'+Dim;if(!$(elem).is('html,body'))
return elem[scroll]-$(elem)[Dim.toLowerCase()]();var size='client'+Dim,html=elem.ownerDocument.documentElement,body=elem.ownerDocument.body;return Math.max(html[scroll],body[scroll])
-Math.min(html[size],body[size]);};function both(val){return typeof val=='object'?val:{top:val,left:val};};})(jQuery);;;(function($){jQuery.fn.TextFieldUpdater=function(args){var container=$(this);var form=$("#"+args.form)
var emptyText=args.emptyText;var defValEl;function init(){if(container.attr('type')=='password'){defValEl=$('<input type="text" value="'+emptyText+'" />').addClass('blurred').hide()
container.after(defValEl)
defValEl.focus(onfocusp)
container.blur(onblurp)
onblurp()}
else{container.blur(onblur)
container.focus(onfocus)
form.submit(onfocus)
onblur()}}
function onblurp(){if(container.val()==''){container.hide()
defValEl.show()}}
function onfocusp(){defValEl.hide()
container.show().focus()}
function onblur(){if(container.val()==''){container.val(emptyText)
container.addClass('blurred')}}
function onfocus(){if(container.val()==emptyText){container.val('')
container.removeClass('blurred')}}
init();return container;}})(jQuery);;(function($){$.toJSON=function(o)
{if(typeof(JSON)=='object'&&JSON.stringify)
return JSON.stringify(o);var type=typeof(o);if(o===null)
return"null";if(type=="undefined")
return undefined;if(type=="number"||type=="boolean")
return o+"";if(type=="string")
return $.quoteString(o);if(type=='object')
{if(typeof o.toJSON=="function")
return $.toJSON(o.toJSON());if(o.constructor===Date)
{var month=o.getUTCMonth()+1;if(month<10)month='0'+month;var day=o.getUTCDate();if(day<10)day='0'+day;var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10)hours='0'+hours;var minutes=o.getUTCMinutes();if(minutes<10)minutes='0'+minutes;var seconds=o.getUTCSeconds();if(seconds<10)seconds='0'+seconds;var milli=o.getUTCMilliseconds();if(milli<100)milli='0'+milli;if(milli<10)milli='0'+milli;return'"'+year+'-'+month+'-'+day+'T'+
hours+':'+minutes+':'+seconds+'.'+milli+'Z"';}
if(o.constructor===Array)
{var ret=[];for(var i=0;i<o.length;i++)
ret.push($.toJSON(o[i])||"null");return"["+ret.join(",")+"]";}
var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number")
name='"'+k+'"';else if(type=="string")
name=$.quoteString(k);else
continue;if(typeof o[k]=="function")
continue;var val=$.toJSON(o[k]);pairs.push(name+":"+val);}
return"{"+pairs.join(", ")+"}";}};$.evalJSON=function(src)
{if(typeof(JSON)=='object'&&JSON.parse)
return JSON.parse(src);return eval("("+src+")");};$.secureEvalJSON=function(src)
{if(typeof(JSON)=='object'&&JSON.parse)
return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,'@');filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']');filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered))
return eval("("+src+")");else
throw new SyntaxError("Error parsing JSON, source is not valid.");};$.quoteString=function(string)
{if(string.match(_escapeable))
{return'"'+string.replace(_escapeable,function(a)
{var c=_meta[a];if(typeof c==='string')return c;c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+string+'"';};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};})(jQuery);;;(function($){var helper={},current,title,tID,IE=$.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),track=false;$.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip",lock:false},block:function(){$.tooltip.blocked=!$.tooltip.blocked;}};$.fn.extend({tooltip:function(settings){settings=$.extend({},$.tooltip.defaults,settings);createHelper(settings);this.each(function(){$.data(this,"tooltip",settings);this.tOpacity=helper.parent.css("opacity");this.tooltipText=this.title;$(this).removeAttr("title");this.alt="";}).mouseover(save).click(hide);if(!settings.lock){this.each(function(){jQuery(this).mouseout(hide);});}
else{helper.parent.mouseleave(function(){current=null;jQuery(this).removeClass(settings.extraClass).hide().css("opacity","");});}
return this;},fixPNG:IE?function(){return this.each(function(){var image=$(this).css('backgroundImage');if(image.match(/^url\(["']?(.*\.png)["']?\)$/i)){image=RegExp.$1;$(this).css({'backgroundImage':'none','filter':"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+image+"')"}).each(function(){var position=$(this).css('position');if(position!='absolute'&&position!='relative')
$(this).css('position','relative');});}});}:function(){return this;},unfixPNG:IE?function(){return this.each(function(){$(this).css({'filter':'',backgroundImage:''});});}:function(){return this;},hideWhenEmpty:function(){return this.each(function(){$(this)[$(this).html()?"show":"hide"]();});},url:function(){return this.attr('href')||this.attr('src');}});function createHelper(settings){if(helper.parent)
return;helper.parent=$('<div id="'+settings.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if($.fn.bgiframe)
helper.parent.bgiframe();helper.title=$('h3',helper.parent);helper.body=$('div.body',helper.parent);helper.url=$('div.url',helper.parent);}
function settings(element){return $.data(element,"tooltip");}
function handle(event){if(settings(this).delay)
tID=setTimeout(show,settings(this).delay);else
show();track=!!settings(this).track;$(document.body).bind('mousemove',update);update(event);}
function save(){if($.tooltip.blocked||this==current||(!this.tooltipText&&!settings(this).bodyHandler))
return;current=this;title=this.tooltipText;if(settings(this).bodyHandler){helper.title.hide();var bodyContent=settings(this).bodyHandler.call(this);if(bodyContent.nodeType||bodyContent.jquery){helper.body.empty().append(bodyContent)}else{helper.body.html(bodyContent);}
helper.body.show();}else if(settings(this).showBody){var parts=title.split(settings(this).showBody);helper.title.html(parts.shift()).show();helper.body.empty();for(var i=0,part;(part=parts[i]);i++){if(i>0)
helper.body.append("<br/>");helper.body.append(part);}
helper.body.hideWhenEmpty();}else{helper.title.html(title).show();helper.body.hide();}
if(settings(this).showURL&&$(this).url())
helper.url.html($(this).url().replace('http://','')).show();else
helper.url.hide();helper.parent.addClass(settings(this).extraClass);if(settings(this).fixPNG)
helper.parent.fixPNG();if(helper.title.html()==''){helper.title.hide();}
handle.apply(this,arguments);}
function show(){tID=null;if((!IE||!$.fn.bgiframe)&&settings(current).fade){if(helper.parent.is(":animated"))
helper.parent.stop().show().fadeTo(settings(current).fade,current.tOpacity);else
helper.parent.is(':visible')?helper.parent.fadeTo(settings(current).fade,current.tOpacity):helper.parent.fadeIn(settings(current).fade);}else{helper.parent.show();}
update();}
function update(event){if($.tooltip.blocked)
return;if(event&&event.target.tagName=="OPTION"){return;}
if(!track&&helper.parent.is(":visible")){$(document.body).unbind('mousemove',update)}
if(current==null){$(document.body).unbind('mousemove',update);return;}
helper.parent.removeClass("viewport-right").removeClass("viewport-bottom");var left=helper.parent[0].offsetLeft;var top=helper.parent[0].offsetTop;if(event){left=event.pageX+settings(current).left;top=event.pageY+settings(current).top;var right='auto';if(settings(current).positionLeft){right=$(window).width()-left;left='auto';}
helper.parent.css({left:left,right:right,top:top});}
var v=viewport(),h=helper.parent[0];if(v.x+v.cx<h.offsetLeft+h.offsetWidth){left-=h.offsetWidth+20+settings(current).left;helper.parent.css({left:left+'px'}).addClass("viewport-right");}
if(v.y+v.cy<h.offsetTop+h.offsetHeight){top-=h.offsetHeight+20+settings(current).top;helper.parent.css({top:top+'px'}).addClass("viewport-bottom");}}
function viewport(){return{x:$(window).scrollLeft(),y:$(window).scrollTop(),cx:$(window).width(),cy:$(window).height()};}
function hide(event){if($.tooltip.blocked)
return;if(tID)
clearTimeout(tID);current=null;var tsettings=settings(this);function complete(){helper.parent.removeClass(tsettings.extraClass).hide().css("opacity","");}
if((!IE||!$.fn.bgiframe)&&tsettings.fade){if(helper.parent.is(':animated'))
helper.parent.stop().fadeTo(tsettings.fade,0,complete);else
helper.parent.stop().fadeOut(tsettings.fade,complete);}else
complete();if(settings(this).fixPNG)
helper.parent.unfixPNG();}})(jQuery);;(function($){var undefined='undefined';var locationWrapper={put:function(hash,win){(win||window).location.hash=encodeURIComponent(hash);},get:function(win){var hash=((win||window).location.hash).replace(/^#/,'');return(typeof($.browser)!=='undefined'&&typeof($.browser.mozilla)!=='undefined')?hash:decodeURIComponent(hash);}};var iframeWrapper={id:"__jQuery_history",init:function(){var html='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';$("body").prepend(html);return this;},_document:function(){return $("#"+this.id)[0].contentWindow.document;},put:function(hash){var doc=this._document();doc.open();doc.close();locationWrapper.put(hash,doc);},get:function(){return locationWrapper.get(this._document());}};var _={appState:undefined,callback:undefined,init:function(callback){},check:function(){},load:function(hash){}};$.history=_;var SimpleImpl={init:function(callback){_.callback=callback;var current_hash=locationWrapper.get();_.appState=current_hash;_.callback(current_hash);setInterval(_.check,100);},check:function(){var current_hash=locationWrapper.get();if(current_hash!=_.appState){_.appState=current_hash;_.callback(current_hash);}},load:function(hash){if(hash!=_.appState){locationWrapper.put(hash);_.appState=hash;_.callback(hash);}}};var IframeImpl={init:function(callback){_.callback=callback;var current_hash=locationWrapper.get();_.appState=current_hash;iframeWrapper.init().put(current_hash);_.callback(current_hash);setInterval(_.check,100);},check:function(){var iframe_hash=iframeWrapper.get(),location_hash=locationWrapper.get();if(location_hash!=iframe_hash){if(location_hash==_.appState){_.appState=iframe_hash;locationWrapper.put(iframe_hash);_.callback(iframe_hash);}else{_.appState=location_hash;iframeWrapper.put(location_hash);_.callback(location_hash);}}},load:function(hash){if(hash!=_.appState){locationWrapper.put(hash);iframeWrapper.put(hash);_.appState=hash;_.callback(hash);}}};if(typeof($.browser)!=='undefined'&&typeof($.browser.msie)!=='undefined'&&typeof($.browser.version)!=='undefined'&&typeof(document.documentMode)!=='undefined'&&($.browser.version<8||document.documentMode<8))
{$.extend(_,IframeImpl);}else{$.extend(_,SimpleImpl);}})(jQuery);;(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.20",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);;(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);;(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(c)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);;(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()})(jQuery);;(function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);var d=this.element[0],e=!1;while(d&&(d=d.parentNode))d==document&&(e=!0);if(!e&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.20"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length)return;var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);;
(function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){b=="accept"&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.20"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();g:for(var h=0;h<d.length;h++){if(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))continue;for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible=d[h].element.css("display")!="none";if(!d[h].visible)continue;e=="mousedown"&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight}}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var d=a.ui.intersect(b,this,this.options.tolerance),e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}})(jQuery);;(function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var e=null,f=this,g=a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==f)return e=a(this),!1});a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target));if(!e)return!1;if(this.options.handle&&!c){var h=!1;a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(h=!0)});if(!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(!h)continue;if(g!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],g):!0)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(!b)return;a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=this.options.axis==="x"||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=this.options.axis==="y"||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&d||f=="left"&&!d:e&&(e=="down"&&c||e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=this,d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");for(var b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}}for(var g=e.length-1;g>=0;g--){var k=e[g][1],l=e[g][0];for(var i=0,m=l.length;i<m;i++){var n=a(l[i]);n.data(this.widgetName+"-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){if(e&&!d.forcePlaceholderSize)return;b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){var c=null,d=null;for(var e=this.containers.length-1;e>=0;e--){if(a.ui.contains(this.currentItem[0],this.containers[e].element[0]))continue;if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"];for(var i=this.items.length-1;i>=0;i--){if(!a.ui.contains(this.containers[d].element[0],this.items[i].item[0]))continue;var j=this.items[i][this.containers[d].floating?"left":"top"];Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i])}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;return d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[],e=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.20"})})(jQuery);;
(function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},f=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),i=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(i),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),l=a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(!1===c._trigger("beforeClose",b))return;return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)},open:function(){if(this._isOpen)return;var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return e.focus(1),!1}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(g);a.each(d,function(a,b){if(a==="click")return;a in f?e[a](b):e.attr(a,b)}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var b=this,c=b.options,d=a(document),e;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e=c.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g=typeof c=="string"?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&typeof d=="string"&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.20",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);;;window.Modernizr=function(a,b,c){function G(){e.input=function(a){for(var b=0,c=a.length;b<c;b++)t[a[b]]=!!(a[b]in l);return t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)l.setAttribute("type",f=a[d]),e=l.type!=="text",e&&(l.value=m,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&l.style.WebkitAppearance!==c?(g.appendChild(l),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,g.removeChild(l)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=l.checkValidity&&l.checkValidity()===!1:/^color$/.test(f)?(g.appendChild(l),g.offsetWidth,e=l.value!=m,g.removeChild(l)):e=l.value!=m)),s[a[d]]=!!e;return s}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function F(a,b){var c=a.charAt(0).toUpperCase()+a.substr(1),d=(a+" "+p.join(c+" ")+c).split(" ");return!!E(d,b)}function E(a,b){for(var d in a)if(k[a[d]]!==c&&(!b||b(a[d],j)))return!0}function D(a,b){return(""+a).indexOf(b)!==-1}function C(a,b){return typeof a===b}function B(a,b){return A(o.join(a+";")+(b||""))}function A(a){k.cssText=a}var d="1.7",e={},f=!0,g=b.documentElement,h=b.head||b.getElementsByTagName("head")[0],i="modernizr",j=b.createElement(i),k=j.style,l=b.createElement("input"),m=":)",n=Object.prototype.toString,o=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),p="Webkit Moz O ms Khtml".split(" "),q={svg:"http://www.w3.org/2000/svg"},r={},s={},t={},u=[],v,w=function(a){var c=b.createElement("style"),d=b.createElement("div"),e;c.textContent=a+"{#modernizr{height:3px}}",h.appendChild(c),d.id="modernizr",g.appendChild(d),e=d.offsetHeight===3,c.parentNode.removeChild(c),d.parentNode.removeChild(d);return!!e},x=function(){function d(d,e){e=e||b.createElement(a[d]||"div");var f=(d="on"+d)in e;f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=C(e[d],"function"),C(e[d],c)||(e[d]=c),e.removeAttribute(d))),e=null;return f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),y=({}).hasOwnProperty,z;C(y,c)||C(y.call,c)?z=function(a,b){return b in a&&C(a.constructor.prototype[b],c)}:z=function(a,b){return y.call(a,b)},r.flexbox=function(){function c(a,b,c,d){a.style.cssText=o.join(b+":"+c+";")+(d||"")}function a(a,b,c,d){b+=":",a.style.cssText=(b+o.join(c+";"+b)).slice(0,-b.length)+(d||"")}var d=b.createElement("div"),e=b.createElement("div");a(d,"display","box","width:42px;padding:0;"),c(e,"box-flex","1","width:10px;"),d.appendChild(e),g.appendChild(d);var f=e.offsetWidth===42;d.removeChild(e),g.removeChild(d);return f},r.canvas=function(){var a=b.createElement("canvas");return a.getContext&&a.getContext("2d")},r.canvastext=function(){return e.canvas&&C(b.createElement("canvas").getContext("2d").fillText,"function")},r.webgl=function(){return!!a.WebGLRenderingContext},r.touch=function(){return"ontouchstart"in a||w("@media ("+o.join("touch-enabled),(")+"modernizr)")},r.geolocation=function(){return!!navigator.geolocation},r.postmessage=function(){return!!a.postMessage},r.websqldatabase=function(){var b=!!a.openDatabase;return b},r.indexedDB=function(){for(var b=-1,c=p.length;++b<c;){var d=p[b].toLowerCase();if(a[d+"_indexedDB"]||a[d+"IndexedDB"])return!0}return!1},r.hashchange=function(){return x("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},r.history=function(){return!!(a.history&&history.pushState)},r.draganddrop=function(){return x("dragstart")&&x("drop")},r.websockets=function(){return"WebSocket"in a},r.rgba=function(){A("background-color:rgba(150,255,150,.5)");return D(k.backgroundColor,"rgba")},r.hsla=function(){A("background-color:hsla(120,40%,100%,.5)");return D(k.backgroundColor,"rgba")||D(k.backgroundColor,"hsla")},r.multiplebgs=function(){A("background:url(//:),url(//:),red url(//:)");return(new RegExp("(url\\s*\\(.*?){3}")).test(k.background)},r.backgroundsize=function(){return F("backgroundSize")},r.borderimage=function(){return F("borderImage")},r.borderradius=function(){return F("borderRadius","",function(a){return D(a,"orderRadius")})},r.boxshadow=function(){return F("boxShadow")},r.textshadow=function(){return b.createElement("div").style.textShadow===""},r.opacity=function(){B("opacity:.55");return/^0.55$/.test(k.opacity)},r.cssanimations=function(){return F("animationName")},r.csscolumns=function(){return F("columnCount")},r.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";A((a+o.join(b+a)+o.join(c+a)).slice(0,-a.length));return D(k.backgroundImage,"gradient")},r.cssreflections=function(){return F("boxReflect")},r.csstransforms=function(){return!!E(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},r.csstransforms3d=function(){var a=!!E(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);a&&"webkitPerspective"in g.style&&(a=w("@media ("+o.join("transform-3d),(")+"modernizr)"));return a},r.csstransitions=function(){return F("transitionProperty")},r.fontface=function(){var a,c,d=h||g,e=b.createElement("style"),f=b.implementation||{hasFeature:function(){return!1}};e.type="text/css",d.insertBefore(e,d.firstChild),a=e.sheet||e.styleSheet;var i=f.hasFeature("CSS2","")?function(b){if(!a||!b)return!1;var c=!1;try{a.insertRule(b,0),c=/src/i.test(a.cssRules[0].cssText),a.deleteRule(a.cssRules.length-1)}catch(d){}return c}:function(b){if(!a||!b)return!1;a.cssText=b;return a.cssText.length!==0&&/src/i.test(a.cssText)&&a.cssText.replace(/\r+|\n+/g,"").indexOf(b.split(" ")[0])===0};c=i('@font-face { font-family: "font"; src: url(data:,); }'),d.removeChild(e);return c},r.video=function(){var a=b.createElement("video"),c=!!a.canPlayType;if(c){c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"');var d='video/mp4; codecs="avc1.42E01E';c.h264=a.canPlayType(d+'"')||a.canPlayType(d+', mp4a.40.2"'),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"')}return c},r.audio=function(){var a=b.createElement("audio"),c=!!a.canPlayType;c&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"'),c.mp3=a.canPlayType("audio/mpeg;"),c.wav=a.canPlayType('audio/wav; codecs="1"'),c.m4a=a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;"));return c},r.localstorage=function(){try{return!!localStorage.getItem}catch(a){return!1}},r.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(a){return!1}},r.webWorkers=function(){return!!a.Worker},r.applicationcache=function(){return!!a.applicationCache},r.svg=function(){return!!b.createElementNS&&!!b.createElementNS(q.svg,"svg").createSVGRect},r.inlinesvg=function(){var a=b.createElement("div");a.innerHTML="<svg/>";return(a.firstChild&&a.firstChild.namespaceURI)==q.svg},r.smil=function(){return!!b.createElementNS&&/SVG/.test(n.call(b.createElementNS(q.svg,"animate")))},r.svgclippaths=function(){return!!b.createElementNS&&/SVG/.test(n.call(b.createElementNS(q.svg,"clipPath")))};for(var H in r)z(r,H)&&(v=H.toLowerCase(),e[v]=r[H](),u.push((e[v]?"":"no-")+v));e.input||G(),e.crosswindowmessaging=e.postmessage,e.historymanagement=e.history,e.addTest=function(a,b){a=a.toLowerCase();if(!e[a]){b=!!b(),g.className+=" "+(b?"":"no-")+a,e[a]=b;return e}},A(""),j=l=null,f&&a.attachEvent&&function(){var a=b.createElement("div");a.innerHTML="<elem></elem>";return a.childNodes.length!==1}()&&function(a,b){function p(a,b){var c=-1,d=a.length,e,f=[];while(++c<d)e=a[c],(b=e.media||b)!="screen"&&f.push(p(e.imports,b),e.cssText);return f.join("")}function o(a){var b=-1;while(++b<e)a.createElement(d[b])}var c="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",d=c.split("|"),e=d.length,f=new RegExp("(^|\\s)("+c+")","gi"),g=new RegExp("<(/*)("+c+")","gi"),h=new RegExp("(^|[^\\n]*?\\s)("+c+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),i=b.createDocumentFragment(),j=b.documentElement,k=j.firstChild,l=b.createElement("body"),m=b.createElement("style"),n;o(b),o(i),k.insertBefore(m,k.firstChild),m.media="print",a.attachEvent("onbeforeprint",function(){var a=-1,c=p(b.styleSheets,"all"),k=[],o;n=n||b.body;while((o=h.exec(c))!=null)k.push((o[1]+o[2]+o[3]).replace(f,"$1.iepp_$2")+o[4]);m.styleSheet.cssText=k.join("\n");while(++a<e){var q=b.getElementsByTagName(d[a]),r=q.length,s=-1;while(++s<r)q[s].className.indexOf("iepp_")<0&&(q[s].className+=" iepp_"+d[a])}i.appendChild(n),j.appendChild(l),l.className=n.className,l.innerHTML=n.innerHTML.replace(g,"<$1font")}),a.attachEvent("onafterprint",function(){l.innerHTML="",j.removeChild(l),j.appendChild(n),m.styleSheet.cssText=""})}(a,b),e._enableHTML5=f,e._version=d,g.className=g.className.replace(/\bno-js\b/,"")+" js "+u.join(" ");return e}(this,this.document);(function($){var
defaults={className:'autosizejs',append:'',callback:false},hidden='hidden',borderBox='border-box',lineHeight='lineHeight',supportsScrollHeight,copy='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"></textarea>',copyStyle=['fontFamily','fontSize','fontWeight','fontStyle','letterSpacing','textTransform','wordSpacing','textIndent'],oninput='oninput',onpropertychange='onpropertychange',mirrored,mirror=$(copy).data('autosize',true)[0];mirror.style.lineHeight='99px';if($(mirror).css(lineHeight)==='99px'){copyStyle.push(lineHeight);}
mirror.style.lineHeight='';$.fn.autosize=function(options){options=$.extend({},defaults,options||{});if(mirror.parentNode!==document.body){$(document.body).append(mirror);mirror.value="\n\n\n";mirror.scrollTop=9e4;supportsScrollHeight=mirror.scrollHeight===mirror.scrollTop+mirror.clientHeight;}
return this.each(function(){var
ta=this,$ta=$(ta),minHeight,active,resize,boxOffset=0,callback=$.isFunction(options.callback);if($ta.data('autosize')){return;}
if($ta.css('box-sizing')===borderBox||$ta.css('-moz-box-sizing')===borderBox||$ta.css('-webkit-box-sizing')===borderBox){boxOffset=$ta.outerHeight()-$ta.height();}
minHeight=Math.max(parseInt($ta.css('minHeight'),10)-boxOffset,$ta.height());resize=($ta.css('resize')==='none'||$ta.css('resize')==='vertical')?'none':'horizontal';$ta.css({overflow:hidden,overflowY:hidden,wordWrap:'break-word',resize:resize}).data('autosize',true);function initMirror(){mirrored=ta;mirror.className=options.className;$.each(copyStyle,function(i,val){mirror.style[val]=$ta.css(val);});}
function adjust(){var height,overflow,original;if(mirrored!==ta){initMirror();}
if(!active){active=true;mirror.value=ta.value+options.append;mirror.style.overflowY=ta.style.overflowY;original=parseInt(ta.style.height,10);mirror.style.width=Math.max($ta.width(),0)+'px';if(supportsScrollHeight){height=mirror.scrollHeight;}else{mirror.scrollTop=0;mirror.scrollTop=9e4;height=mirror.scrollTop;}
var maxHeight=parseInt($ta.css('maxHeight'),10);maxHeight=maxHeight&&maxHeight>0?maxHeight:9e4;if(height>maxHeight){height=maxHeight;overflow='scroll';}else if(height<minHeight){height=minHeight;}
height+=boxOffset;ta.style.overflowY=overflow||hidden;if(original!==height){ta.style.height=height+'px';if(callback){options.callback.call(ta);}}
setTimeout(function(){active=false;},1);}}
if(onpropertychange in ta){if(oninput in ta){ta[oninput]=ta.onkeyup=adjust;}else{ta[onpropertychange]=adjust;}}else{ta[oninput]=adjust;}
$(window).resize(function(){active=false;adjust();});$ta.bind('autosize',function(){active=false;adjust();});adjust();});};}(window.jQuery||window.Zepto));;function CutString(string,limit){this.tempDiv=document.createElement('div');this.tempDiv.id="TempNodeForTest";this.tempDiv.innerHTML=string;this.charCount=0;this.limit=limit;}
CutString.prototype.cut=function(){var newDiv=document.createElement('div');this.searchEnd(this.tempDiv,newDiv);return newDiv.innerHTML;};CutString.prototype.searchEnd=function(parseDiv,newParent){var ele;var newEle;for(var j=0;j<parseDiv.childNodes.length;j++){ele=parseDiv.childNodes[j];if(ele.nodeType!=3){newEle=ele.cloneNode(true);newParent.appendChild(newEle);if(ele.childNodes.length===0)
continue;newEle.innerHTML='';var res=this.searchEnd(ele,newEle);if(res)
return res;else{continue;}}
if(ele.nodeValue.length+this.charCount>=this.limit){newEle=ele.cloneNode(true);newEle.nodeValue=ele.nodeValue.substr(0,this.limit-this.charCount);newParent.appendChild(newEle);return true;}
newEle=ele.cloneNode(true);newParent.appendChild(newEle);this.charCount+=ele.nodeValue.length;}
return false;};function cutHtmlString($string,$limit){var output=new CutString($string,$limit);return output.cut();};var Notifications={container:null,messages:new Array(),init:function(){if(!this.container){jQuery('body').prepend('<div id="top-notifications-wrapper"><div class="top-nofifications-container"><ul></ul></div></div>');this.container=jQuery("#top-notifications-wrapper");}},addMessage:function(text,type,can_close){if(!type){return false;}
this.init();if(typeof(can_close)=='undefined'){can_close=false;}
text=text.replace("\n",'<br/>');this.messages.push=text;var _item=jQuery('<li class="'+type+'">'+text+'</li>');if(can_close){}
jQuery('ul',this.container).append(_item);return true;},addSuccess:function(text){this.addMessage(text,'success');},addWarning:function(text){this.addMessage(text,'warning');},addError:function(text){this.addMessage(text,'error');}};;(function(b){var e,d,a=[],c=window;b.fn.tinymce=function(j){var p=this,g,k,h,m,i,l="",n="";if(!p.length){return p}if(!j){return tinyMCE.get(p[0].id)}p.css("visibility","hidden");function o(){var r=[],q=0;if(f){f();f=null}p.each(function(t,u){var s,w=u.id,v=j.oninit;if(!w){u.id=w=tinymce.DOM.uniqueId()}s=new tinymce.Editor(w,j);r.push(s);s.onInit.add(function(){var x,y=v;p.css("visibility","");if(v){if(++q==r.length){if(tinymce.is(y,"string")){x=(y.indexOf(".")===-1)?null:tinymce.resolve(y.replace(/\.\w+$/,""));y=tinymce.resolve(y)}y.apply(x||tinymce,r)}}})});b.each(r,function(t,s){s.render()})}if(!c.tinymce&&!d&&(g=j.script_url)){d=1;h=g.substring(0,g.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(g)){n="_src"}m=g.lastIndexOf("?");if(m!=-1){l=g.substring(m+1)}c.tinyMCEPreInit=c.tinyMCEPreInit||{base:h,suffix:n,query:l};if(g.indexOf("gzip")!=-1){i=j.language||"en";g=g+(/\?/.test(g)?"&":"?")+"js=true&core=true&suffix="+escape(n)+"&themes="+escape(j.theme)+"&plugins="+escape(j.plugins)+"&languages="+i;if(!c.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=n;function q(r){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(r))}q("langs/"+i+".js");q("themes/"+j.theme+"/editor_template"+n+".js");q("themes/"+j.theme+"/langs/"+i+".js");b.each(j.plugins.split(","),function(s,r){if(r){q("plugins/"+r+"/editor_plugin"+n+".js");q("plugins/"+r+"/langs/"+i+".js")}})},end:function(){}}}}b.ajax({type:"GET",url:g,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;d=2;if(j.script_loaded){j.script_loaded()}o();b.each(a,function(q,r){r()})}})}else{if(d===1){a.push(o)}else{o()}}return p};b.extend(b.expr[":"],{tinymce:function(g){return g.id&&!!tinyMCE.get(g.id)}});function f(){function i(l){if(l==="remove"){this.each(function(n,o){var m=h(o);if(m){m.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(n,o){var m=tinyMCE.get(o.id.replace(/_parent$/,""));if(m){m.remove()}})}function k(n){var m=this,l;if(n!==e){i.call(m);m.each(function(p,q){var o;if(o=tinyMCE.get(q.id)){o.setContent(n)}})}else{if(m.length>0){if(l=tinyMCE.get(m[0].id)){return l.getContent()}}}}function h(m){var l=null;(m)&&(m.id)&&(c.tinymce)&&(l=tinyMCE.get(m.id));return l}function g(l){return!!((l)&&(l.length)&&(c.tinymce)&&(l.is(":tinymce")))}var j={};b.each(["text","html","val"],function(n,l){var o=j[l]=b.fn[l],m=(l==="text");b.fn[l]=function(s){var p=this;if(!g(p)){return o.apply(p,arguments)}if(s!==e){k.call(p.filter(":tinymce"),s);o.apply(p.not(":tinymce"),arguments);return p}else{var r="";var q=arguments;(m?p:p.eq(0)).each(function(u,v){var t=h(v);r+=t?(m?t.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):t.getContent()):o.apply(b(v),q)});return r}}});b.each(["append","prepend"],function(n,m){var o=j[m]=b.fn[m],l=(m==="prepend");b.fn[m]=function(q){var p=this;if(!g(p)){return o.apply(p,arguments)}if(q!==e){p.filter(":tinymce").each(function(s,t){var r=h(t);r&&r.setContent(l?q+r.getContent():r.getContent()+q)});o.apply(p.not(":tinymce"),arguments);return p}}});b.each(["remove","replaceWith","replaceAll","empty"],function(m,l){var n=j[l]=b.fn[l];b.fn[l]=function(){i.call(this,l);return n.apply(this,arguments)}});j.attr=b.fn.attr;b.fn.attr=function(n,q,o){var m=this;if((!n)||(n!=="value")||(!g(m))){return j.attr.call(m,n,q,o)}if(q!==e){k.call(m.filter(":tinymce"),q);j.attr.call(m.not(":tinymce"),n,q,o);return m}else{var p=m[0],l=h(p);return l?l.getContent():j.attr.call(b(p),n,q,o)}}}})(jQuery);;var urlChanged=false;function createURL(){var f=jQuery('#f').val();var m=jQuery('#m').val();var l=jQuery('#l').val();var separator="-";if(f.length==0||l.length==0)separator="";preUrl=f+separator+m+separator+l;preUrl=preUrl.toLowerCase();preUrl=preUrl.replace(/[^\w\-]+/g,'-');preUrl=preUrl.replace(/\-{2,}/g,'-');preUrl=preUrl.replace(/^\-+/g,'');preUrl=preUrl.replace(/\-+$/g,'');if(!urlChanged){if(document.getElementById("custom_url")!=null){document.getElementById("custom_url").value=preUrl;var url=document.getElementById("custom_url").value;}}}
var a='';var triggerDeleteConfirm=new Array();function setDeleteConfirm(el)
{if(!el.checked)
{triggerDeleteConfirm[el.id]=false;}else{triggerDeleteConfirm[el.id]=true;}}
function deleteConfirm(oForm,msg)
{var el,i=0;var res=false;while(el=oForm.elements[i++])
{if(el.type=='checkbox'&&el.checked&&triggerDeleteConfirm[el.id]==true){res=true;}}
return res;}
var delete_counter=0;function del_count(chkbox){if(chkbox.checked==true){delete_counter=delete_counter+1;}else{if(delete_counter>0){delete_counter=delete_counter-1;}}};eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('q(!m){A m={18:{97:\'aK\',aZ:\'fw...\',aY:\'8G 2i fP\',bD:\'8G 2i g0 2i eR\',9Z:\'eZ 2i fc D (f)\',cq:\'f8 by <i>an ao</i>\',cr:\'f4 2i f6 an ao fg\',8Y:\'aq\',8W:\'ay\',8Z:\'ag\',92:\'am\',90:\'am (eD)\',b0:\'eY\',ab:\'al\',au:\'al 1p (aj)\',ac:\'ah\',ad:\'ah 1p (aj)\',8s:\'aq (8w 1b)\',8X:\'ay (8w 3m)\',8V:\'ag\',ae:\'1:1\',3G:\'g7 %1 fz %2\',9W:\'8G 2i 26 2R, dC aA dE 2i 3u. dF 8w dB O 1D aA 3a.\'},5c:\'K/dw/\',7R:\'dv.5q\',6h:\'dx.5q\',6W:5Z,9A:5Z,4W:15,9B:15,4d:15,6L:15,4F:cY,be:0.75,9l:M,9f:5,3Y:2,ei:3,5S:1j,bz:\'4Q 3m\',bA:1,br:M,ct:\'em://K.eh/\',cs:\'ec\',aS:M,9w:[\'a\',\'5v\'],3q:[],cE:5Z,4b:0,87:50,6J:1j,6X:M,4D:M,3U:\'60\',7W:M,46:\'1M\',9n:\'1M\',b1:I,aC:I,a7:M,4s:aw,6k:aw,5Y:M,1Z:\'ev-dV\',8i:{2X:\'<P 1W="K-2X"><6t>\'+\'<1H 1W="K-3a">\'+\'<a 21="#" 24="{m.18.8s}">\'+\'<1C>{m.18.8Y}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-3L">\'+\'<a 21="#" 24="{m.18.au}">\'+\'<1C>{m.18.ab}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-3p">\'+\'<a 21="#" 24="{m.18.ad}">\'+\'<1C>{m.18.ac}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-1D">\'+\'<a 21="#" 24="{m.18.8X}">\'+\'<1C>{m.18.8W}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-3u">\'+\'<a 21="#" 24="{m.18.8V}">\'+\'<1C>{m.18.8Z}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-1a-2F">\'+\'<a 21="#" 24="{m.18.9Z}">\'+\'<1C>{m.18.ae}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-26">\'+\'<a 21="#" 24="{m.18.90}" >\'+\'<1C>{m.18.92}</1C></a>\'+\'</1H>\'+\'</6t></P>\',bd:\'<P 1W="K-e2"><6t>\'+\'<1H 1W="K-3a">\'+\'<a 21="#" 24="{m.18.8s}" 2p="E m.3a(k)">\'+\'<1C>{m.18.8Y}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-1D">\'+\'<a 21="#" 24="{m.18.8X}" 2p="E m.1D(k)">\'+\'<1C>{m.18.8W}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-3u">\'+\'<a 21="#" 24="{m.18.8V}" 2p="E 1j">\'+\'<1C>{m.18.8Z}</1C></a>\'+\'</1H>\'+\'<1H 1W="K-26">\'+\'<a 21="#" 24="{m.18.90}" 2p="E m.26(k)">\'+\'<1C>{m.18.92}</1C></a>\'+\'</1H>\'+\'</6t></P>\'+\'<P 1W="K-19"></P>\'+\'<P 1W="K-e7"><P>\'+\'<1C 1W="K-3O" 24="{m.18.b0}"><1C></1C></1C>\'+\'</P></P>\'},64:[],a1:M,16:[],a4:[\'5Y\',\'3t\',\'46\',\'9n\',\'b1\',\'aC\',\'1Z\',\'3Y\',\'dU\',\'dM\',\'dL\',\'b3\',\'dK\',\'dI\',\'dJ\',\'b2\',\'cv\',\'a7\',\'42\',\'6l\',\'3q\',\'4b\',\'L\',\'N\',\'88\',\'6J\',\'6X\',\'4D\',\'dN\',\'dO\',\'dT\',\'2I\',\'7W\',\'4j\',\'4x\',\'3U\',\'8e\',\'a9\',\'4s\',\'6k\',\'6M\',\'9i\',\'aX\',\'2N\',\'2Q\',\'cF\',\'cD\',\'1e\'],1T:[],61:0,8g:{x:[\'bM\',\'1b\',\'4X\',\'3m\',\'bC\'],y:[\'5N\',\'Y\',\'9a\',\'4Q\',\'7E\']},7B:{},b2:{},b3:{},8e:{aG:{},29:{},aF:{}},4m:[],6u:[],4n:{},4R:[],7q:[],5a:[],7k:{},8c:{},7l:[],2t:/dP\\/4\\.0/.11(4A.6d)?8:8J((4A.6d.5G().3b(/.+(?:b9|dQ|e9|2h)[\\/: ]([\\d.]+)/)||[0,\'0\'])[1]),2h:(W.6q&&!1S.3z),4M:/ea/.11(4A.6d),6y:/eu.+b9:1\\.[0-8].+es/.11(4A.6d),$:C(1v){q(1v)E W.9Q(1v)},2o:C(2a,3j){2a[2a.V]=3j},1d:C(ba,4l,49,6c,bh){A el=W.1d(ba);q(4l)m.3A(el,4l);q(bh)m.R(el,{94:0,8H:\'1E\',9D:0});q(49)m.R(el,49);q(6c)6c.1X(el);E el},3A:C(el,4l){O(A x 2Y 4l)el[x]=4l[x];E el},R:C(el,49){O(A x 2Y 49){q(m.3R&&x==\'1z\'){q(49[x]>0.99)el.G.ew(\'5Q\');J el.G.5Q=\'bg(1z=\'+(49[x]*2w)+\')\'}J el.G[x]=49[x]}},2z:C(el,1f,3C){A 4T,51,4w;q(1F 3C!=\'7j\'||3C===I){A 2H=c5;3C={4h:2H[2],2Q:2H[3],76:2H[4]}}q(1F 3C.4h!=\'3G\')3C.4h=5Z;3C.2Q=1h[3C.2Q]||1h.bj;3C.7g=m.3A({},1f);O(A 2Z 2Y 1f){A e=1J m.fx(el,3C,2Z);4T=8J(m.8I(el,2Z))||0;51=8J(1f[2Z]);4w=2Z!=\'1z\'?\'F\':\'\';e.3E(4T,51,4w)}},8I:C(el,1f){q(el.G[1f]){E el.G[1f]}J q(W.8L){E W.8L.cK(el,I).co(1f)}J{q(1f==\'1z\')1f=\'5Q\';A 3j=el.5y[1f.2k(/\\-(\\w)/g,C(a,b){E b.bi()})];q(1f==\'5Q\')3j=3j.2k(/bg\\(1z=([0-9]+)\\)/,C(a,b){E b/2w});E 3j===\'\'?1:3j}},7S:C(){A d=W,w=1S,63=d.7a&&d.7a!=\'8v\'?d.5h:d.19,3R=m.2h&&(m.2t<9||1F bf==\'1L\');A L=3R?63.8F:(d.5h.8F||7c.ep),N=3R?63.c4:7c.eo;m.4g={L:L,N:N,5O:3R?63.5O:bf,5R:3R?63.5R:ed};E m.4g},6K:C(el){q(/5v/i.11(el.3J)){A 7N=W.2C(\'1N\');O(A i=0;i<7N.V;i++){A u=7N[i].eb;q(u&&u.2k(/^.*?#/,\'\')==el.23.2Z){el=7N[i];5m}}}A p={x:el.4V,y:el.8O};5g(el.bb){el=el.bb;p.x+=el.4V;p.y+=el.8O;q(el!=W.19&&el!=W.5h){p.x-=el.5O;p.y-=el.5R}}E p},2F:C(a,29,3E,T){q(!a)a=m.1d(\'a\',I,{1o:\'1E\'},m.2b);q(1F a.6a==\'C\')E 29;q(T==\'3D\'){O(A i=0;i<m.4R.V;i++){q(m.4R[i]&&m.4R[i].a==a){m.4R[i].bP();m.4R[i]=I;E 1j}}m.aU=M}1t{1J m.5A(a,29,3E,T);E 1j}1y(e){E M}},9u:C(a,29,3E){E m.2F(a,29,3E,\'3D\')},89:C(){E m.1d(\'P\',{1c:\'K-3D-S\',2d:m.8b(m.8i.bd)})},4p:C(el,3J,1c){A 1m=el.2C(3J);O(A i=0;i<1m.V;i++){q((1J 4Y(1c)).11(1m[i].1c)){E 1m[i]}}E I},8b:C(s){s=s.2k(/\\s/g,\' \');A 2m=/{m\\.18\\.([^}]+)\\}/g,6v=s.3b(2m),18;q(6v)O(A i=0;i<6v.V;i++){18=6v[i].2k(2m,"$1");q(1F m.18[18]!=\'1L\')s=s.2k(6v[i],m.18[18])}E s},c1:C(){A 1m=W.2C(\'a\');O(A i=0;i<1m.V;i++){A T=m.aH(1m[i]);q(T&&!1m[i].aI){(C(){A t=T;q(m.1A(m,\'ek\',{7y:1m[i],T:t})){1m[i].2p=(T==\'2R\')?C(){E m.2F(k)}:C(){E m.9u(k,{2I:t})}}})();1m[i].aI=M}}m.6p()},aH:C(el){q(el.7b==\'K\')E\'2R\';J q(el.7b==\'K-2W\')E\'2W\';J q(el.7b==\'K-1k\')E\'1k\';J q(el.7b==\'K-3x\')E\'3x\'},86:C(a){O(A i=0;i<m.5a.V;i++){q(m.5a[i][0]==a){A c=m.5a[i][1];m.5a[i][1]=c.5J(1);E c}}E I},bI:C(e){A 2a=m.6p();O(A i=0;i<2a.56.V;i++){A a=2a.56[i];q(m.43(a,\'2I\')==\'2W\'&&m.43(a,\'7W\'))m.2o(m.7q,a)}m.8k(0)},8k:C(i){q(!m.7q[i])E;A a=m.7q[i];A 6z=m.4J(m.43(a,\'88\'));q(!6z)6z=m.89();A 2W=1J m.7x(a,6z,1);2W.9z=C(){};2W.3F=C(){m.2o(m.5a,[a,6z]);m.8k(i+1)};2W.9r()},aQ:C(){A 8d=0,7n=-1,16=m.16,B,1B;O(A i=0;i<16.V;i++){B=16[i];q(B){1B=B.U.G.1B;q(1B&&1B>8d){8d=1B;7n=i}}}q(7n==-1)m.3d=-1;J 16[7n].3M()},43:C(a,6b){a.6a=a.2p;A p=a.6a?a.6a():I;a.6a=I;E(p&&1F p[6b]!=\'1L\')?p[6b]:(1F m[6b]!=\'1L\'?m[6b]:I)},7s:C(a){A 1e=m.43(a,\'1e\');q(1e)E 1e;E a.21},4J:C(1v){A 1P=m.$(1v),4q=m.8c[1v],a={};q(!1P&&!4q)E I;q(!4q){4q=1P.5J(M);4q.1v=\'\';m.8c[1v]=4q;E 1P}J{E 4q.5J(M)}},3B:C(d){q(d)m.9y.1X(d);m.9y.2d=\'\'},1u:C(B){q(!m.2v){84=M;m.2v=m.1d(\'P\',{1c:\'K-dc K-2x-D\',5r:\'\',2p:C(){q(m.1A(m,\'d3\'))m.26()}},{1n:\'1Y\',1z:0},m.2b,M);q(/(df|d2|cU|cT)/.11(4A.6d)){A 19=W.19;C 81(){m.R(m.2v,{L:19.cR+\'F\',N:19.cV+\'F\'})}81();m.2j(1S,\'3O\',81)}}m.2v.G.1o=\'\';A 84=m.2v.5r==\'\';m.2v.5r+=\'|\'+B.Q;q(84){q(m.6y&&m.aR)m.R(m.2v,{9t:\'7T(\'+m.5c+\'d0.ak)\',1z:1});J m.2z(m.2v,{1z:B.4b},m.87)}},9x:C(Q){q(!m.2v)E;q(1F Q!=\'1L\')m.2v.5r=m.2v.5r.2k(\'|\'+Q,\'\');q((1F Q!=\'1L\'&&m.2v.5r!=\'\')||(m.2q&&m.43(m.2q,\'4b\')))E;q(m.6y&&m.aR)m.2v.G.1o=\'1E\';J m.2z(m.2v,{1z:0},m.87,I,C(){m.2v.G.1o=\'1E\'})},8N:C(7z,B){A 1i=B||m.2G();B=1i;q(m.2q)E 1j;J m.1i=1i;m.4z(W,1S.3z?\'6U\':\'71\',m.68);1t{m.2q=7z;7z.2p()}1y(e){m.1i=m.2q=I}1t{q(!7z||B.3q[1]!=\'4e\')B.26()}1y(e){}E 1j},7O:C(el,2n){A B=m.2G(el);q(B)E m.8N(B.7V(2n),B);J E 1j},3a:C(el){E m.7O(el,-1)},1D:C(el){E m.7O(el,1)},68:C(e){q(!e)e=1S.2u;q(!e.2L)e.2L=e.9k;q(1F e.2L.9j!=\'1L\')E M;q(!m.1A(m,\'dz\',e))E M;A B=m.2G();A 2n=I;b6(e.dy){2c 70:q(B)B.7r();E M;2c 32:2n=2;5m;2c 34:2c 39:2c 40:2n=1;5m;2c 8:2c 33:2c 37:2c 38:2n=-1;5m;2c 27:2c 13:2n=0}q(2n!==I){q(2n!=2)m.4z(W,1S.3z?\'6U\':\'71\',m.68);q(!m.aS)E M;q(e.5n)e.5n();J e.c0=1j;q(B){q(2n==0){B.26()}J q(2n==2){q(B.1p)B.1p.cl()}J{q(B.1p)B.1p.3p();m.7O(B.Q,2n)}E 1j}}E M},du:C(14){m.2o(m.1T,m.3A(14,{22:\'22\'+m.61++}))},dt:C(1r){A 3c=1r.2N;q(1F 3c==\'7j\'){O(A i=0;i<3c.V;i++){A o={};O(A x 2Y 1r)o[x]=1r[x];o.2N=3c[i];m.2o(m.6u,o)}}J{m.2o(m.6u,1r)}},9U:C(7y,7h){A el,2m=/^K-U-([0-9]+)$/;el=7y;5g(el.23){q(el.6R!==1L)E el.6R;q(el.1v&&2m.11(el.1v))E el.1v.2k(2m,"$1");el=el.23}q(!7h){el=7y;5g(el.23){q(el.3J&&m.77(el)){O(A Q=0;Q<m.16.V;Q++){A B=m.16[Q];q(B&&B.a==el)E Q}}el=el.23}}E I},2G:C(el,7h){q(1F el==\'1L\')E m.16[m.3d]||I;q(1F el==\'3G\')E m.16[el]||I;q(1F el==\'a8\')el=m.$(el);E m.16[m.9U(el,7h)]||I},77:C(a){E(a.2p&&a.2p.cC().2k(/\\s/g,\' \').3b(/m.(dj|e)dh/))},bw:C(){O(A i=0;i<m.16.V;i++)q(m.16[i]&&m.16[i].55)m.aQ()},1A:C(6i,9K,2H){E 6i&&6i[9K]?(6i[9K](6i,2H)!==1j):M},8z:C(e){q(!e)e=1S.2u;q(e.ds>1)E M;q(!e.2L)e.2L=e.9k;A el=e.2L;5g(el.23&&!(/K-(2R|3u|3D|3O)/.11(el.1c))){el=el.23}A B=m.2G(el);q(B&&(B.62||!B.55))E M;q(B&&e.T==\'8y\'){q(e.2L.9j)E M;A 3b=el.1c.3b(/K-(2R|3u|3O)/);q(3b){m.2y={B:B,T:3b[1],1b:B.x.H,L:B.x.D,Y:B.y.H,N:B.y.D,aV:e.7A,aO:e.7F};m.2j(W,\'7D\',m.6H);q(e.5n)e.5n();q(/K-(2R|3D)-9J/.11(B.S.1c)){B.3M();m.a6=M}E 1j}J q(/K-3D/.11(el.1c)&&m.3d!=B.Q){B.3M();B.59(\'1q\')}}J q(e.T==\'c3\'){m.4z(W,\'7D\',m.6H);q(m.2y){q(m.54&&m.2y.T==\'2R\')m.2y.B.S.G.4L=m.54;A 3I=m.2y.3I;q(!3I&&!m.a6&&!/(3u|3O)/.11(m.2y.T)){q(m.1A(B,\'dr\'))B.26()}J q(3I||(!3I&&m.aU)){m.2y.B.59(\'1q\')}q(m.2y.B.3W)m.2y.B.3W.G.1o=\'1E\';q(3I)m.1A(m.2y.B,\'do\',m.2y);m.a6=1j;m.2y=I}J q(/K-2R-9J/.11(el.1c)){el.G.4L=m.54}}E 1j},6H:C(e){q(!m.2y)E M;q(!e)e=1S.2u;A a=m.2y,B=a.B;q(B.1k){q(!B.3W)B.3W=m.1d(\'P\',I,{1l:\'2l\',L:B.x.D+\'F\',N:B.y.D+\'F\',1b:B.x.cb+\'F\',Y:B.y.cb+\'F\',1B:4,9t:(m.3R?\'eB\':\'1E\'),1z:0.eU},B.U,M);q(B.3W.G.1o==\'1E\')B.3W.G.1o=\'\'}a.dX=e.7A-a.aV;a.dY=e.7F-a.aO;A 9g=1h.fG(1h.aE(a.dX,2)+1h.aE(a.dY,2));q(!a.3I)a.3I=(a.T!=\'2R\'&&9g>0)||(9g>(m.fK||5));q(a.3I&&e.7A>5&&e.7F>5){q(!m.1A(B,\'fN\',a))E 1j;q(a.T==\'3O\')B.3O(a);J{B.9m(a.1b+a.dX,a.Y+a.dY);q(a.T==\'2R\')B.S.G.4L=\'3u\'}}E 1j},aP:C(e){1t{q(!e)e=1S.2u;A 66=/fM/i.11(e.T);q(!e.2L)e.2L=e.9k;q(!e.7P)e.7P=66?e.fE:e.fD;A B=m.2G(e.2L);q(!B.55)E;q(!B||!e.7P||m.2G(e.7P,M)==B||m.2y)E;m.1A(B,66?\'ft\':\'fr\',e);O(A i=0;i<B.1T.V;i++)(C(){A o=m.$(\'22\'+B.1T[i]);q(o&&o.7d){q(66)m.R(o,{1n:\'1Y\',1o:\'\'});m.2z(o,{1z:66?o.1z:0},o.4i)}})()}1y(e){}},2j:C(el,2u,3Q){q(el==W&&2u==\'41\'){m.2o(m.7l,3Q)}1t{el.2j(2u,3Q,1j)}1y(e){1t{el.aM(\'65\'+2u,3Q);el.fy(\'65\'+2u,3Q)}1y(e){el[\'65\'+2u]=3Q}}},4z:C(el,2u,3Q){1t{el.4z(2u,3Q,1j)}1y(e){1t{el.aM(\'65\'+2u,3Q)}1y(e){el[\'65\'+2u]=I}}},7C:C(i){q(m.a1&&m.64[i]&&m.64[i]!=\'1L\'){A 1N=W.1d(\'1N\');1N.4N=C(){1N=I;m.7C(i+1)};1N.1e=m.64[i]}},c2:C(3G){q(3G&&1F 3G!=\'7j\')m.9f=3G;A 2a=m.6p();O(A i=0;i<2a.4Z.V&&i<m.9f;i++){m.2o(m.64,m.7s(2a.4Z[i]))}q(m.1Z)1J m.6r(m.1Z,C(){m.7C(0)});J m.7C(0);q(m.6h)A 5q=m.1d(\'1N\',{1e:m.5c+m.6h})},7m:C(){q(!m.2b){m.3Z=m.2h&&m.2t<7;m.3R=m.2h&&m.2t<9;m.7S();m.cf=m.3Z&&85.g5==\'g4:\';O(A x 2Y m.7o){q(1F m[x]!=\'1L\')m.18[x]=m[x];J q(1F m.18[x]==\'1L\'&&1F m.7o[x]!=\'1L\')m.18[x]=m.7o[x]}m.2b=m.1d(\'P\',{1c:\'K-2b\'},{1l:\'2l\',1b:0,Y:0,L:\'2w%\',1B:m.4F,9S:\'aK\'},W.19,M);m.2r=m.1d(\'a\',{1c:\'K-2r\',24:m.18.aY,2d:m.18.aZ,21:\'bt:;\'},{1l:\'2l\',Y:\'-4v\',1z:m.be,1B:1},m.2b);m.9y=m.1d(\'P\',I,{1o:\'1E\'},m.2b);m.2x=m.1d(\'P\',{1c:\'K-2x K-2x-D\'},{1n:(m.4M&&m.2t<73)?\'1Y\':\'1q\'},m.2b,1);m.3w=m.1d(\'P\',I,{aJ:\'bc\',g9:\'ga\'},I,M);1h.g2=C(t,b,c,d){E c*t/d+b};1h.bj=C(t,b,c,d){E c*(t/=d)*t+b};1h.8S=C(t,b,c,d){E-c*(t/=d)*(t-2)+b};m.cO=m.3Z;m.cQ=((1S.3z&&m.2t<9)||4A.av==\'at\'||(m.3Z&&m.2t<5.5));m.1A(k,\'fU\')}},41:C(){q(m.9F)E;m.9F=M;O(A i=0;i<m.7l.V;i++)m.7l[i]()},95:C(){A el,1m,6q=[],4Z=[],56=[],3i={},2m;O(A i=0;i<m.9w.V;i++){1m=W.2C(m.9w[i]);O(A j=0;j<1m.V;j++){el=1m[j];2m=m.77(el);q(2m){m.2o(6q,el);q(2m[0]==\'m.2F\')m.2o(4Z,el);J q(2m[0]==\'m.9u\')m.2o(56,el);A g=m.43(el,\'2N\')||\'1E\';q(!3i[g])3i[g]=[];m.2o(3i[g],el)}}}m.4U={6q:6q,3i:3i,4Z:4Z,56:56};E m.4U},6p:C(){E m.4U||m.95()},26:C(el){A B=m.2G(el);q(B)B.26();E 1j}};m.fx=C(30,1r,1f){k.1r=1r;k.30=30;k.1f=1f;q(!1r.b7)1r.b7={}};m.fx.5w={82:C(){(m.fx.3P[k.1f]||m.fx.3P.ap)(k);q(k.1r.3P)k.1r.3P.ax(k.30,k.4o,k)},3E:C(8u,2i,4w){k.9c=(1J 7K()).79();k.4T=8u;k.51=2i;k.4w=4w;k.4o=k.4T;k.H=k.96=0;A 7c=k;C t(7i){E 7c.3P(7i)}t.30=k.30;q(t()&&m.4m.2o(t)==1){m.af=fX(C(){A 4m=m.4m;O(A i=0;i<4m.V;i++)q(!4m[i]())4m.gd(i--,1);q(!4m.V){eT(m.af)}},13)}},3P:C(7i){A t=(1J 7K()).79();q(7i||t>=k.1r.4h+k.9c){k.4o=k.51;k.H=k.96=1;k.82();k.1r.7g[k.1f]=M;A 9s=M;O(A i 2Y k.1r.7g)q(k.1r.7g[i]!==M)9s=1j;q(9s){q(k.1r.76)k.1r.76.ax(k.30)}E 1j}J{A n=t-k.9c;k.96=n/k.1r.4h;k.H=k.1r.2Q(n,0,1,k.1r.4h);k.4o=k.4T+((k.51-k.4T)*k.H);k.82()}E M}};m.3A(m.fx,{3P:{1z:C(fx){m.R(fx.30,{1z:fx.4o})},ap:C(fx){1t{q(fx.30.G&&fx.30.G[fx.1f]!=I)fx.30.G[fx.1f]=fx.4o+fx.4w;J fx.30[fx.1f]=fx.4o}1y(e){}}}});m.6r=C(1Z,3F){k.3F=3F;k.1Z=1Z;A v=m.2t,47;k.9G=m.2h&&m.2t<7;q(!1Z){q(3F)3F();E}m.7m();k.2g=m.1d(\'2g\',{eJ:0},{1n:\'1q\',1l:\'2l\',eN:\'eM\',L:0},m.2b,M);A 4G=m.1d(\'4G\',I,I,k.2g,1);k.2J=[];O(A i=0;i<=8;i++){q(i%3==0)47=m.1d(\'47\',I,{N:\'1M\'},4G,M);k.2J[i]=m.1d(\'2J\',I,I,47,M);A G=i!=4?{eL:0,eK:0}:{1l:\'4y\'};m.R(k.2J[i],G)}k.2J[4].1c=1Z+\' K-1g\';k.ai()};m.6r.5w={ai:C(){A 1e=m.5c+(m.f1||"fi/")+k.1Z+".ak";A ar=m.4M&&m.2t<73?m.2b:I;k.3V=m.1d(\'1N\',I,{1l:\'2l\',Y:\'-4v\'},ar,M);A 3v=k;k.3V.4N=C(){3v.az()};k.3V.1e=1e},az:C(){A o=k.1w=k.3V.L/4,H=[[0,0],[0,-4],[-2,0],[0,-8],0,[-2,-8],[0,-2],[0,-6],[-2,-2]],1u={N:(2*o)+\'F\',L:(2*o)+\'F\'};O(A i=0;i<=8;i++){q(H[i]){q(k.9G){A w=(i==1||i==7)?\'2w%\':k.3V.L+\'F\';A P=m.1d(\'P\',I,{L:\'2w%\',N:\'2w%\',1l:\'4y\',2e:\'1q\'},k.2J[i],M);m.1d(\'P\',I,{5Q:"fo:fn.bv.fm(fl=fe, 1e=\'"+k.3V.1e+"\')",1l:\'2l\',L:w,N:k.3V.N+\'F\',1b:(H[i][0]*o)+\'F\',Y:(H[i][1]*o)+\'F\'},P,M)}J{m.R(k.2J[i],{9t:\'7T(\'+k.3V.1e+\') \'+(H[i][0]*o)+\'F \'+(H[i][1]*o)+\'F\'})}q(1S.3z&&(i==3||i==5))m.1d(\'P\',I,1u,k.2J[i],M);m.R(k.2J[i],1u)}}k.3V=I;q(m.4n[k.1Z])m.4n[k.1Z].5U();m.4n[k.1Z]=k;q(k.3F)k.3F()},4C:C(H,1w,aB,4i,2Q){A B=k.B,5X=B.U.G,1w=1w||0,H=H||{x:B.x.H+1w,y:B.y.H+1w,w:B.x.Z(\'2f\')-2*1w,h:B.y.Z(\'2f\')-2*1w};q(aB)k.2g.G.1n=(H.h>=4*k.1w)?\'1Y\':\'1q\';m.R(k.2g,{1b:(H.x-k.1w)+\'F\',Y:(H.y-k.1w)+\'F\',L:(H.w+2*k.1w)+\'F\'});H.w-=2*k.1w;H.h-=2*k.1w;m.R(k.2J[4],{L:H.w>=0?H.w+\'F\':0,N:H.h>=0?H.h+\'F\':0});q(k.9G)k.2J[3].G.N=k.2J[5].G.N=k.2J[4].G.N},5U:C(bk){q(bk)k.2g.G.1n=\'1q\';J m.3B(k.2g)}};m.6A=C(B,1u){k.B=B;k.1u=1u;k.3l=1u==\'x\'?\'bY\':\'bW\';k.3k=k.3l.5G();k.6m=1u==\'x\'?\'cj\':\'c8\';k.6Y=k.6m.5G();k.9L=1u==\'x\'?\'c7\':\'bX\';k.b5=k.9L.5G();k.1G=k.36=0};m.6A.5w={Z:C(Q){b6(Q){2c\'9T\':E k.1K+k.3s+(k.t-m.2r[\'1w\'+k.3l])/2;2c\'9v\':E k.H+k.cb+k.1G+(k.D-m.2r[\'1w\'+k.3l])/2;2c\'2f\':E k.D+2*k.cb+k.1G+k.36;2c\'5e\':E k.4K-k.3o-k.4S;2c\'8D\':E k.Z(\'5e\')-2*k.cb-k.1G-k.36;2c\'6e\':E k.H-(k.B.1g?k.B.1g.1w:0);2c\'9R\':E k.Z(\'2f\')+(k.B.1g?2*k.B.1g.1w:0);2c\'2K\':E k.1V?1h.3e((k.D-k.1V)/2):0}},8a:C(){k.cb=(k.B.S[\'1w\'+k.3l]-k.t)/2;k.4S=m[\'9D\'+k.9L]},9M:C(){k.t=k.B.el[k.3k]?3H(k.B.el[k.3k]):k.B.el[\'1w\'+k.3l];k.1K=k.B.1K[k.1u];k.3s=(k.B.el[\'1w\'+k.3l]-k.t)/2;q(k.1K==0||k.1K==-1){k.1K=(m.4g[k.3k]/2)+m.4g[\'28\'+k.6m]}},8h:C(){A B=k.B;k.2T=\'1M\';q(B.9n==\'4X\')k.2T=\'4X\';J q(1J 4Y(k.6Y).11(B.46))k.2T=I;J q(1J 4Y(k.b5).11(B.46))k.2T=\'4t\';k.H=k.1K-k.cb+k.3s;q(k.9i&&k.1u==\'x\')B.6M=1h.31(B.6M||k.1a,B.9i*k.1a/B.y.1a);k.D=1h.31(k.1a,B[\'4t\'+k.3l]||k.1a);k.2U=B.5Y?1h.31(B[\'31\'+k.3l],k.1a):k.1a;q(B.2E&&B.3t){k.D=B[k.3k];k.1V=k.1a}q(k.1u==\'x\'&&m.5S)k.2U=B.4s;k.2L=B[\'2L\'+k.1u.bi()];k.3o=m[\'9D\'+k.6m];k.28=m.4g[\'28\'+k.6m];k.4K=m.4g[k.3k]},72:C(i){A B=k.B;q(B.2E&&(B.3t||m.5S)){k.1V=i;k.D=1h.4t(k.D,k.1V);B.S.G[k.6Y]=k.Z(\'2K\')+\'F\'}J k.D=i;B.S.G[k.3k]=i+\'F\';B.U.G[k.3k]=k.Z(\'2f\')+\'F\';q(B.1g)B.1g.4C();q(B.3W)B.3W.G[k.3k]=i+\'F\';q(k.1u==\'y\'&&B.5C&&B.19.G.N!=\'1M\')1t{B.5C.19.G.2e=\'1M\'}1y(e){}q(B.2A){A d=B.2s;q(k.9e===1L)k.9e=B.1s[\'1w\'+k.3l]-d[\'1w\'+k.3l];d.G[k.3k]=(k.D-k.9e)+\'F\';q(k.1u==\'x\')B.4c.G.L=\'1M\';q(B.19)B.19.G[k.3k]=\'1M\'}q(k.1u==\'x\'&&B.1x)B.57(M);q(k.1u==\'x\'&&B.1p&&B.2E){q(i==k.1a)B.1p.5d(\'1a-2F\');J B.1p.4u(\'1a-2F\')}},aa:C(i){k.H=i;k.B.U.G[k.6Y]=i+\'F\';q(k.B.1g)k.B.1g.4C()}};m.5A=C(a,29,3E,35){q(W.bS&&m.2h&&!m.9F){m.2j(W,\'41\',C(){1J m.5A(a,29,3E,35)});E}k.a=a;k.3E=3E;k.35=35||\'2R\';k.2A=(35==\'3D\');k.2E=!k.2A;m.a1=1j;k.1T=[];k.1i=m.1i;m.1i=I;m.7m();A Q=k.Q=m.16.V;O(A i=0;i<m.a4.V;i++){A 2Z=m.a4[i];k[2Z]=29&&1F 29[2Z]!=\'1L\'?29[2Z]:m[2Z]}q(!k.1e)k.1e=a.21;A el=(29&&29.9P)?m.$(29.9P):a;el=k.aW=el.2C(\'1N\')[0]||el;k.6Q=el.1v||a.1v;q(!m.1A(k,\'f3\'))E M;O(A i=0;i<m.16.V;i++){q(m.16[i]&&m.16[i].a==a&&!(k.1i&&k.3q[1]==\'4e\')){m.16[i].3M();E 1j}}q(!m.f5)O(A i=0;i<m.16.V;i++){q(m.16[i]&&m.16[i].aW!=el&&!m.16[i].6D){m.16[i].6P()}}m.16[Q]=k;q(!m.9l&&!m.2q){q(m.16[Q-1])m.16[Q-1].26();q(1F m.3d!=\'1L\'&&m.16[m.3d])m.16[m.3d].26()}k.el=el;k.1K=k.aX||m.6K(el);m.7S();A x=k.x=1J m.6A(k,\'x\');x.9M();A y=k.y=1J m.6A(k,\'y\');y.9M();q(/5v/i.11(el.3J))k.b8(el);k.U=m.1d(\'P\',{1v:\'K-U-\'+k.Q,1c:\'K-U \'+k.a9},{1n:\'1q\',1l:\'2l\',1B:m.4F+=2},I,M);k.U.eX=k.U.eS=m.aP;q(k.35==\'2R\'&&k.3Y==2)k.3Y=0;q(!k.1Z||(k.1i&&k.2E&&k.3q[1]==\'4e\')){k[k.35+\'9H\']()}J q(m.4n[k.1Z]){k.9I();k[k.35+\'9H\']()}J{k.6n();A B=k;1J m.6r(k.1Z,C(){B.9I();B[B.35+\'9H\']()})}E M};m.5A.5w={9o:C(e){q(m.g8)dq(\'dk \'+e.dl+\': \'+e.dD);J 1S.85.21=k.1e},9I:C(){A 1g=k.1g=m.4n[k.1Z];1g.B=k;1g.2g.G.1B=k.U.G.1B-1;m.4n[k.1Z]=I},6n:C(){q(k.6D||k.2r)E;k.2r=m.2r;A B=k;k.2r.2p=C(){B.6P()};q(!m.1A(k,\'d5\'))E;A B=k,l=k.x.Z(\'9T\')+\'F\',t=k.y.Z(\'9T\')+\'F\';q(!2P&&k.1i&&k.3q[1]==\'4e\')A 2P=k.1i;q(2P){l=2P.x.Z(\'9v\')+\'F\';t=2P.y.Z(\'9v\')+\'F\';k.2r.G.1B=m.4F++}4a(C(){q(B.2r)m.R(B.2r,{1b:l,Y:t,1B:m.4F++})},2w)},ey:C(){A B=k;A 1N=W.1d(\'1N\');k.S=1N;1N.4N=C(){q(m.16[B.Q])B.69()};q(m.e3)1N.dp=C(){E 1j};1N.1c=\'K-2R\';m.R(1N,{1n:\'1q\',1o:\'3X\',1l:\'2l\',6M:\'4v\',1B:3});1N.24=m.18.9W;q(m.4M&&m.2t<73)m.2b.1X(1N);q(m.2h&&m.dH)1N.1e=I;1N.1e=k.1e;k.6n()},d4:C(){q(!m.1A(k,\'da\'))E;k.S=m.86(k.a);q(!k.S)k.S=m.4J(k.88);q(!k.S)k.S=m.89();k.a2([\'6C\']);q(k.6C){A 19=m.4p(k.S,\'P\',\'K-19\');q(19)19.1X(k.6C);k.6C.G.1o=\'3X\'}m.1A(k,\'fp\');A 1s=k.1s=k.S;q(/(3x|1k)/.11(k.2I))k.91(1s);m.2b.1X(k.U);m.R(k.U,{1l:\'fa\',94:\'0 \'+m.9B+\'F 0 \'+m.4W+\'F\'});k.S=m.1d(\'P\',{1c:\'K-3D\'},{1l:\'4y\',1B:3,N:0,2e:\'1q\'},k.U);k.4c=m.1d(\'P\',I,I,k.S,1);k.4c.1X(1s);m.R(1s,{1l:\'4y\',1o:\'3X\',9S:m.18.97||\'\'});q(k.L)1s.G.L=k.L+\'F\';q(k.N)m.R(1s,{N:k.N+\'F\',2e:\'1q\'});q(1s.1O<k.4s)1s.G.L=k.4s+\'F\';q(k.2I==\'2W\'&&!m.86(k.a)){k.6n();A B=k;A 2W=1J m.7x(k.a,1s);2W.1e=k.1e;2W.3F=C(){q(m.16[B.Q])B.69()};2W.9z=C(){85.21=B.1e};2W.9r()}J q(k.2I==\'1k\'&&k.3U==\'60\'){k.6T()}J k.69()},69:C(){1t{q(!k.S)E;k.S.4N=I;q(k.6D)E;J k.6D=M;A x=k.x,y=k.y;q(k.2r){m.R(k.2r,{Y:\'-4v\'});k.2r=I;m.1A(k,\'cu\')}q(k.2E){x.1a=k.S.L;y.1a=k.S.N;m.R(k.S,{L:x.t+\'F\',N:y.t+\'F\'});k.U.1X(k.S);m.2b.1X(k.U)}J q(k.7Z)k.7Z();x.8a();y.8a();m.R(k.U,{1b:(x.1K+x.3s-x.cb)+\'F\',Y:(y.1K+x.3s-y.cb)+\'F\'});k.a0();k.bB();A 2M=x.1a/y.1a;x.8h();k.2T(x);y.8h();k.2T(y);q(k.2A)k.b4();q(k.1x)k.57(0,1);q(k.5Y){q(k.2E)k.cG(2M);J k.8x();A 1R=k.1p;q(1R&&k.1i&&1R.2X&&1R.aT){A H=1R.cB.1l||\'\',p;O(A 1u 2Y m.8g)O(A i=0;i<5;i++){p=k[1u];q(H.3b(m.8g[1u][i])){p.H=k.1i[1u].H+(k.1i[1u].1G-p.1G)+(k.1i[1u].D-p.D)*[0,0,.5,1,1][i];q(1R.aT==\'f0\'){q(p.H+p.D+p.1G+p.36>p.28+p.4K-p.4S)p.H=p.28+p.4K-p.D-p.3o-p.4S-p.1G-p.36;q(p.H<p.28+p.3o)p.H=p.28+p.3o}}}}q(k.2E&&k.x.1a>(k.x.1V||k.x.D)){k.bs();q(k.1T.V==1)k.57()}}k.a5()}1y(e){k.9o(e)}},91:C(6c,1M){A c=m.4p(6c,\'7J\',\'K-19\');q(/(1k|3x)/.11(k.2I)){q(k.4j)c.G.L=k.4j+\'F\';q(k.4x)c.G.N=k.4x+\'F\'}},6T:C(){q(k.aD)E;A B=k;k.19=m.4p(k.1s,\'7J\',\'K-19\');q(k.2I==\'1k\'){k.6n();A 5o=m.3w.5J(1);k.19.1X(5o);k.eP=k.1s.1O;q(!k.4j)k.4j=5o.1O;A 5b=k.1s.1U-k.19.1U,h=k.4x||m.4g.N-5b-m.4d-m.6L,4N=k.3U==\'60\'?\' 4N="q (m.16[\'+k.Q+\']) m.16[\'+k.Q+\'].69()" \':\'\';k.19.2d+=\'<1k 2Z="m\'+(1J 7K()).79()+\'" eQ="0" Q="\'+k.Q+\'" \'+\' G="L:\'+k.4j+\'F; N:\'+h+\'F" \'+4N+\' 1e="\'+k.1e+\'" ></1k>\';k.5o=k.19.2C(\'P\')[0];k.1k=k.19.2C(\'1k\')[0];q(k.3U==\'6x\')k.8A()}q(k.2I==\'3x\'){k.19.1v=k.19.1v||\'m-fY-1v-\'+k.Q;A a=k.8e;q(!a.29)a.29={};q(1F a.29.aN==\'1L\')a.29.aN=\'fR\';q(9p)9p.fT(k.1e,k.19.1v,k.4j,k.4x,a.g1||\'7\',a.gb,a.aG,a.29,a.aF)}k.aD=M},7Z:C(){q(k.1k&&!k.4x){k.1k.G.N=k.19.G.N=k.8p()+\'F\'}k.1s.1X(m.3w);q(!k.x.1a)k.x.1a=k.1s.1O;k.y.1a=k.1s.1U;k.1s.9q(m.3w);q(m.2h&&k.aL>3H(k.1s.5y.N)){k.aL=3H(k.1s.5y.N)}m.R(k.U,{1l:\'2l\',94:\'0\'});m.R(k.S,{L:k.x.t+\'F\',N:k.y.t+\'F\'})},8p:C(){A h;1t{A 2B=k.5C=k.1k.9O||k.1k.6g.W;A 3w=2B.1d(\'P\');3w.G.aJ=\'bc\';2B.19.1X(3w);h=3w.8O;q(m.2h)h+=3H(2B.19.5y.4d)+3H(2B.19.5y.6L)-1}1y(e){h=de}E h},8A:C(){A 5i=k.1s.1O-k.5o.1O;m.3B(k.5o);q(5i<0)5i=0;A 5b=k.1s.1U-k.1k.1U;q(k.5C&&!k.4x&&!k.N&&k.y.D==k.y.1a)1t{k.5C.19.G.2e=\'1q\'}1y(e){}m.R(k.1k,{L:1h.9Y(k.x.D-5i)+\'F\',N:1h.9Y(k.y.D-5b)+\'F\'});m.R(k.19,{L:k.1k.G.L,N:k.1k.G.N});k.52=k.1k;k.2s=k.52},b4:C(){k.91(k.1s);q(k.2I==\'3x\'&&k.3U==\'60\')k.6T();q(k.x.D<k.x.1a&&!k.6J)k.x.D=k.x.1a;q(k.y.D<k.y.1a&&!k.6X)k.y.D=k.y.1a;k.2s=k.1s;m.R(k.4c,{1l:\'4y\',L:k.x.D+\'F\'});m.R(k.1s,{8H:\'1E\',L:\'1M\',N:\'1M\'});A 1P=m.4p(k.1s,\'7J\',\'K-19\');q(1P&&!/(1k|3x)/.11(k.2I)){A 5f=1P;1P=m.1d(5f.d8,I,{2e:\'1q\'},I,M);5f.23.dG(1P,5f);1P.1X(m.3w);1P.1X(5f);A 5i=k.1s.1O-1P.1O;A 5b=k.1s.1U-1P.1U;1P.9q(m.3w);A 6E=m.4M||4A.av==\'at\'?1:0;m.R(1P,{L:(k.x.D-5i-6E)+\'F\',N:(k.y.D-5b)+\'F\',2e:\'1M\',1l:\'4y\'});q(6E&&5f.1U>1P.1U){1P.G.L=(3H(1P.G.L)+6E)+\'F\'}k.52=1P;k.2s=k.52}q(k.1k&&k.3U==\'60\')k.8A();q(!k.52&&k.y.D<k.4c.1U)k.2s=k.S;q(k.2s==k.S&&!k.6J&&!/(1k|3x)/.11(k.2I)){k.x.D+=17}q(k.2s&&k.2s.1U>k.2s.23.1U){4a("1t { m.16["+k.Q+"].2s.G.2e = \'1M\'; } 1y(e) {}",m.6W)}},b8:C(5v){A c=5v.fC.7G(\',\');O(A i=0;i<c.V;i++)c[i]=3H(c[i]);q(5v.ff.5G()==\'eI\'){k.x.1K+=c[0]-c[2];k.y.1K+=c[1]-c[2];k.x.t=k.y.t=2*c[2]}J{A 5H,5z,5x=5H=c[0],5B=5z=c[1];O(A i=0;i<c.V;i++){q(i%2==0){5x=1h.31(5x,c[i]);5H=1h.4t(5H,c[i])}J{5B=1h.31(5B,c[i]);5z=1h.4t(5z,c[i])}}k.x.1K+=5x;k.x.t=5H-5x;k.y.1K+=5B;k.y.t=5z-5B}},2T:C(p,5u){A 4H,2P=p.2L,1u=p==k.x?\'x\':\'y\';q(2P&&2P.3b(/ /)){4H=2P.7G(\' \');2P=4H[0]}q(2P&&m.$(2P)){p.H=m.6K(m.$(2P))[1u];q(4H&&4H[1]&&4H[1].3b(/^[-]?[0-9]+F$/))p.H+=3H(4H[1]);q(p.D<p.2U)p.D=p.2U}J q(p.2T==\'1M\'||p.2T==\'4X\'){A 8C=1j;A 5s=p.B.5Y;q(p.2T==\'4X\')p.H=1h.3e(p.28+(p.4K+p.3o-p.4S-p.Z(\'2f\'))/2);J p.H=1h.3e(p.H-((p.Z(\'2f\')-p.t)/2));q(p.H<p.28+p.3o){p.H=p.28+p.3o;8C=M}q(!5u&&p.D<p.2U){p.D=p.2U;5s=1j}q(p.H+p.Z(\'2f\')>p.28+p.4K-p.4S){q(!5u&&8C&&5s){p.D=1h.31(p.D,p.Z(1u==\'y\'?\'5e\':\'8D\'))}J q(p.Z(\'2f\')<p.Z(\'5e\')){p.H=p.28+p.4K-p.4S-p.Z(\'2f\')}J{p.H=p.28+p.3o;q(!5u&&5s)p.D=p.Z(1u==\'y\'?\'5e\':\'8D\')}}q(!5u&&p.D<p.2U){p.D=p.2U;5s=1j}}J q(p.2T==\'4t\'){p.H=1h.dm(p.H-p.D+p.t)}q(p.H<p.3o){A cH=p.H;p.H=p.3o;q(5s&&!5u)p.D=p.D-(p.H-cH)}},cG:C(2M){A x=k.x,y=k.y,3T=1j,3f=1h.31(x.1a,x.D),3y=1h.31(y.1a,y.D),3t=(k.3t||m.5S);q(3f/3y>2M){ 3f=3y*2M;q(3f<x.2U){3f=x.2U;3y=3f/2M}3T=M}J q(3f/3y<2M){ 3y=3f/2M;3T=M}q(m.5S&&x.1a<x.2U){x.1V=x.1a;y.D=y.1V=y.1a}J q(k.3t){x.1V=3f;y.1V=3y}J{x.D=3f;y.D=3y}3T=k.8x(k.3t?I:2M,3T);q(3t&&y.D<y.1V){y.1V=y.D;x.1V=y.D*2M}q(3T||3t){x.H=x.1K-x.cb+x.3s;x.2U=x.D;k.2T(x,M);y.H=y.1K-y.cb+y.3s;y.2U=y.D;k.2T(y,M);q(k.1x)k.57()}},8x:C(2M,3T){A x=k.x,y=k.y;q(k.1x&&(k.2E||k.6X)){5g(y.D>k.6k&&x.D>k.4s&&y.Z(\'2f\')>y.Z(\'5e\')){y.D-=10;q(2M)x.D=y.D*2M;k.57(0,1);3T=M}}E 3T},dS:C(){q(k.2s){A h=/1k/i.11(k.2s.3J)?(k.8p()+1)+\'F\':\'1M\';q(k.19)k.19.G.N=h;k.2s.G.N=h;k.y.72(k.1s.1U)}},a5:C(){A x=k.x,y=k.y;k.59(\'1q\');m.1A(k,\'et\');q(k.1p&&k.1p.2D)k.1p.2D.5t();k.9b(1,{U:{L:x.Z(\'2f\'),N:y.Z(\'2f\'),1b:x.H,Y:y.H},S:{1b:x.1G+x.Z(\'2K\'),Y:y.1G+y.Z(\'2K\'),L:x.1V||x.D,N:y.1V||y.D}},m.6W)},9b:C(1I,2i,4i){A 5M=k.3q,8o=1I?(k.1i?k.1i.a:I):m.2q,t=(5M[1]&&8o&&m.43(8o,\'3q\')[1]==5M[1])?5M[1]:5M[0];q(k[t]&&t!=\'2F\'){k[t](1I,2i);E}q(k.1g&&!k.3Y){q(1I)k.1g.4C();J k.1g.5U((k.2A&&k.4D))}q(!1I)k.78();A B=k,x=B.x,y=B.y,2Q=k.2Q;q(!1I)2Q=k.cF||2Q;A 6x=1I?C(){q(B.1g)B.1g.2g.G.1n="1Y";4a(C(){B.6I()},50)}:C(){B.5D()};q(1I)m.R(k.U,{L:x.t+\'F\',N:y.t+\'F\'});q(1I&&k.2A){m.R(k.U,{1b:(x.1K-x.cb+x.3s)+\'F\',Y:(y.1K-y.cb+y.3s)+\'F\'})}q(k.cD){m.R(k.U,{1z:1I?0:1});m.3A(2i.U,{1z:1I})}m.2z(k.U,2i.U,{4h:4i,2Q:2Q,3P:C(3j,2H){q(B.1g&&B.3Y&&2H.1f==\'Y\'){A 5W=1I?2H.H:1-2H.H;A H={w:x.t+(x.Z(\'2f\')-x.t)*5W,h:y.t+(y.Z(\'2f\')-y.t)*5W,x:x.1K+(x.H-x.1K)*5W,y:y.1K+(y.H-y.1K)*5W};B.1g.4C(H,0,1)}q(B.2A){q(2H.1f==\'1b\')B.4c.G.1b=(x.H-3j)+\'F\';q(2H.1f==\'Y\')B.4c.G.Y=(y.H-3j)+\'F\'}}});m.2z(k.S,2i.S,4i,2Q,6x);q(1I){k.U.G.1n=\'1Y\';k.S.G.1n=\'1Y\';q(k.2A)k.1s.G.1n=\'1Y\';k.a.1c+=\' K-4I-46\'}},6w:C(1I,2i){k.3Y=1j;A B=k,t=1I?m.6W:0;q(1I){m.2z(k.U,2i.U,0);m.R(k.U,{1z:0,1n:\'1Y\'});m.2z(k.S,2i.S,0);k.S.G.1n=\'1Y\';m.2z(k.U,{1z:1},t,I,C(){B.6I()})}q(k.1g){k.1g.2g.G.1B=k.U.G.1B;A 6Z=1I||-1,1w=k.1g.1w,8r=1I?3:1w,8q=1I?1w:3;O(A i=8r;6Z*i<=6Z*8q;i+=6Z,t+=25){(C(){A o=1I?8q-i:8r-i;4a(C(){B.1g.4C(0,o,1)},t)})()}}q(1I){}J{4a(C(){q(B.1g)B.1g.5U(B.4D);B.78();m.2z(B.U,{1z:0},m.9A,I,C(){B.5D()})},t)}},4e:C(1I,2i,8u){q(!1I)E;A B=k,1i=k.1i,x=k.x,y=k.y,3n=1i.x,3g=1i.y,U=k.U,S=k.S,1x=k.1x;m.4z(W,\'7D\',m.6H);m.R(S,{L:(x.1V||x.D)+\'F\',N:(y.1V||y.D)+\'F\'});q(1x)1x.G.2e=\'1Y\';k.1g=1i.1g;q(k.1g)k.1g.B=B;1i.1g=I;A 5l=m.1d(\'P\',{1c:\'K-\'+k.35},{1l:\'2l\',1B:4,2e:\'1q\',1o:\'1E\'});A 8t={cN:1i,cM:k};O(A n 2Y 8t){k[n]=8t[n].S.5J(1);m.R(k[n],{1l:\'2l\',8H:0,1n:\'1Y\'});5l.1X(k[n])}U.1X(5l);q(k.2A)m.R(k.4c,{1b:0,Y:0});q(1x){1x.1c=\'\';U.1X(1x)}5l.G.1o=\'\';1i.S.G.1o=\'1E\';q(m.4M&&m.2t<73){k.U.G.1n=\'1Y\'}m.2z(U,{L:x.D},{4h:m.cE,3P:C(3j,2H){A H=2H.H,4B=1-H;A 1f,D={},93=[\'H\',\'D\',\'1G\',\'36\'];O(A n 2Y 93){1f=93[n];D[\'x\'+1f]=1h.3e(4B*3n[1f]+H*x[1f]);D[\'y\'+1f]=1h.3e(4B*3g[1f]+H*y[1f]);D.cI=1h.3e(4B*(3n.1V||3n.D)+H*(x.1V||x.D));D.6S=1h.3e(4B*3n.Z(\'2K\')+H*x.Z(\'2K\'));D.cJ=1h.3e(4B*(3g.1V||3g.D)+H*(y.1V||y.D));D.6V=1h.3e(4B*3g.Z(\'2K\')+H*y.Z(\'2K\'))}q(B.1g)B.1g.4C({x:D.3h,y:D.3r,w:D.5L+D.44+D.8U+2*x.cb,h:D.5K+D.45+D.8T+2*y.cb});1i.U.G.d7=\'d6(\'+(D.3r-3g.H)+\'F, \'+(D.5L+D.44+D.8U+D.3h+2*3n.cb-3n.H)+\'F, \'+(D.5K+D.45+D.8T+D.3r+2*3g.cb-3g.H)+\'F, \'+(D.3h-3n.H)+\'F)\';m.R(S,{Y:(D.45+y.Z(\'2K\'))+\'F\',1b:(D.44+x.Z(\'2K\'))+\'F\',4d:(y.H-D.3r)+\'F\',4W:(x.H-D.3h)+\'F\'});m.R(U,{Y:D.3r+\'F\',1b:D.3h+\'F\',L:(D.44+D.8U+D.5L+2*x.cb)+\'F\',N:(D.45+D.8T+D.5K+2*y.cb)+\'F\'});m.R(5l,{L:(D.cI||D.5L)+\'F\',N:(D.cJ||D.5K)+\'F\',1b:(D.44+D.6S)+\'F\',Y:(D.45+D.6V)+\'F\',1n:\'1Y\'});m.R(B.cN,{Y:(3g.H-D.3r+3g.1G-D.45+3g.Z(\'2K\')-D.6V)+\'F\',1b:(3n.H-D.3h+3n.1G-D.44+3n.Z(\'2K\')-D.6S)+\'F\'});m.R(B.cM,{1z:H,Y:(y.H-D.3r+y.1G-D.45+y.Z(\'2K\')-D.6V)+\'F\',1b:(x.H-D.3h+x.1G-D.44+x.Z(\'2K\')-D.6S)+\'F\'});q(1x)m.R(1x,{L:D.5L+\'F\',N:D.5K+\'F\',1b:(D.44+x.cb)+\'F\',Y:(D.45+y.cb)+\'F\'})},76:C(){U.G.1n=S.G.1n=\'1Y\';S.G.1o=\'3X\';m.3B(5l);B.6I();1i.5D();B.1i=I}})},bQ:C(o,el){q(!k.1i)E 1j;O(A i=0;i<k.1i.1T.V;i++){A 6G=m.$(\'22\'+k.1i.1T[i]);q(6G&&6G.22==o.22){k.9V();6G.cS=k.Q;m.2o(k.1T,k.1i.1T[i]);E M}}E 1j},6I:C(){k.55=M;k.3M();q(k.2A&&k.3U==\'6x\')k.6T();q(k.1k){1t{A B=k,2B=k.1k.9O||k.1k.6g.W;m.2j(2B,\'8y\',C(){q(m.3d!=B.Q)B.3M()})}1y(e){}q(m.2h&&1F k.62!=\'cW\')k.1k.G.L=(k.4j-1)+\'F\'}q(k.4b)m.1u(k);q(m.2q&&m.2q==k.a)m.2q=I;k.cL();A p=m.4g,8Q=m.7B.x+p.5O,8P=m.7B.y+p.5R;k.9C=k.x.H<8Q&&8Q<k.x.H+k.x.Z(\'2f\')&&k.y.H<8P&&8P<k.y.H+k.y.Z(\'2f\');q(k.1x)k.bn();m.1A(k,\'d1\')},cL:C(){A Q=k.Q;A 1Z=k.1Z;1J m.6r(1Z,C(){1t{m.16[Q].cP()}1y(e){}})},cP:C(){A 1D=k.7V(1);q(1D&&1D.2p.cC().3b(/m\\.2F/))A 1N=m.1d(\'1N\',{1e:m.7s(1D)})},7V:C(2n){A 7U=k.7v(),as=m.4U.3i[k.2N||\'1E\'];q(as&&!as[7U+2n]&&k.1p&&k.1p.cm){q(2n==1)E as[0];J q(2n==-1)E as[as.V-1]}E(as&&as[7U+2n])||I},7v:C(){A 2a=m.6p().3i[k.2N||\'1E\'];q(2a)O(A i=0;i<2a.V;i++){q(2a[i]==k.a)E i}E I},bq:C(){q(k[k.6l]){A 2a=m.4U.3i[k.2N||\'1E\'];q(2a){A s=m.18.3G.2k(\'%1\',k.7v()+1).2k(\'%2\',2a.V);k[k.6l].2d=\'<P 1W="K-3G">\'+s+\'</P>\'+k[k.6l].2d}}},a0:C(){q(!k.1i){O(A i=0;i<m.6u.V;i++){A 1R=m.6u[i],3c=1R.2N;q(1F 3c==\'1L\'||3c===I||3c===k.2N)k.1p=1J m.83(k.Q,1R)}}J{k.1p=k.1i.1p}A 1R=k.1p;q(!1R)E;A Q=1R.4k=k.Q;1R.ch();1R.5d(\'1a-2F\');q(1R.2X){k.4O(m.3A(1R.cB||{},{4P:1R.2X,22:\'2X\',1B:5}))}q(1R.2D)1R.2D.7p(k);q(!k.1i&&k.42)1R.3L(M);q(1R.42){1R.42=4a(C(){m.1D(Q)},(1R.fH||fs))}},6P:C(){m.3B(k.U);m.16[k.Q]=I;q(m.2q==k.a)m.2q=I;m.9x(k.Q);q(k.2r)m.2r.G.1b=\'-4v\';m.1A(k,\'cu\')},bp:C(){q(k.67)E;k.67=m.1d(\'a\',{21:m.ct,2L:m.cs,1c:\'K-67\',2d:m.18.cq,24:m.18.cr});k.4O({4P:k.67,1l:k.cv||\'Y 1b\',22:\'67\'})},a2:C(8f,cy){O(A i=0;i<8f.V;i++){A T=8f[i],s=I;q(T==\'9X\'&&!m.1A(k,\'eH\'))E;J q(T==\'58\'&&!m.1A(k,\'eG\'))E;q(!k[T+\'5p\']&&k.6Q)k[T+\'5p\']=T+\'-O-\'+k.6Q;q(k[T+\'5p\'])k[T]=m.4J(k[T+\'5p\']);q(!k[T]&&!k[T+\'8j\']&&k[T+\'cw\'])1t{s=fh(k[T+\'cw\'])}1y(e){}q(!k[T]&&k[T+\'8j\']){s=k[T+\'8j\']}q(!k[T]&&!s){k[T]=m.4J(k.a[\'cA\'+T+\'5p\']);q(!k[T]){A 1D=k.a.cz;5g(1D&&!m.77(1D)){q((1J 4Y(\'K-\'+T)).11(1D.1c||I)){q(!1D.1v)k.a[\'cA\'+T+\'5p\']=1D.1v=\'22\'+m.61++;k[T]=m.4J(1D.1v);5m}1D=1D.cz}}}q(!k[T]&&!s&&k.6l==T)s=\'\\n\';q(!k[T]&&s)k[T]=m.1d(\'P\',{1c:\'K-\'+T,2d:s});q(cy&&k[T]){A o={1l:(T==\'58\')?\'5N\':\'7E\'};O(A x 2Y k[T+\'cx\'])o[x]=k[T+\'cx\'][x];o.4P=k[T];k.4O(o)}}},59:C(1n){q(m.cO)k.6B(\'fk\',1n);q(m.cQ)k.6B(\'dd\',1n);q(m.6y)k.6B(\'*\',1n)},6B:C(3J,1n){A 1m=W.2C(3J);A 1f=3J==\'*\'?\'2e\':\'1n\';O(A i=0;i<1m.V;i++){q(1f==\'1n\'||(W.8L.cK(1m[i],"").co(\'2e\')==\'1M\'||1m[i].bH(\'1q-by\')!=I)){A 2S=1m[i].bH(\'1q-by\');q(1n==\'1Y\'&&2S){2S=2S.2k(\'[\'+k.Q+\']\',\'\');1m[i].5F(\'1q-by\',2S);q(!2S)1m[i].G[1f]=1m[i].9N}J q(1n==\'1q\'){A 3N=m.6K(1m[i]);3N.w=1m[i].1O;3N.h=1m[i].1U;q(!k.4b){A bl=(3N.x+3N.w<k.x.Z(\'6e\')||3N.x>k.x.Z(\'6e\')+k.x.Z(\'9R\'));A bG=(3N.y+3N.h<k.y.Z(\'6e\')||3N.y>k.y.Z(\'6e\')+k.y.Z(\'9R\'))}A 6F=m.9U(1m[i]);q(!bl&&!bG&&6F!=k.Q){q(!2S){1m[i].5F(\'1q-by\',\'[\'+k.Q+\']\');1m[i].9N=1m[i].G[1f];1m[i].G[1f]=\'1q\'}J q(2S.bF(\'[\'+k.Q+\']\')==-1){1m[i].5F(\'1q-by\',2S+\'[\'+k.Q+\']\')}}J q((2S==\'[\'+k.Q+\']\'||m.3d==6F)&&6F!=k.Q){1m[i].5F(\'1q-by\',\'\');1m[i].G[1f]=1m[i].9N||\'\'}J q(2S&&2S.bF(\'[\'+k.Q+\']\')>-1){1m[i].5F(\'1q-by\',2S.2k(\'[\'+k.Q+\']\',\'\'))}}}}},3M:C(){k.U.G.1B=m.4F+=2;O(A i=0;i<m.16.V;i++){q(m.16[i]&&i==m.3d){A 4r=m.16[i];4r.S.1c+=\' K-\'+4r.35+\'-9J\';q(4r.2E){4r.S.G.4L=m.3Z?\'bE\':\'7Q\';4r.S.24=m.18.bD}m.1A(4r,\'eW\')}}q(k.1g)k.1g.2g.G.1B=k.U.G.1B-1;k.S.1c=\'K-\'+k.35;q(k.2E){k.S.24=m.18.9W;q(m.6h){m.54=1S.3z?\'7Q\':\'7T(\'+m.5c+m.6h+\'), 7Q\';q(m.3Z&&m.2t<6)m.54=\'bE\';k.S.G.4L=m.54}}m.3d=k.Q;m.2j(W,1S.3z?\'6U\':\'71\',m.68);m.1A(k,\'fd\')},9m:C(x,y){k.x.aa(x);k.y.aa(y)},3O:C(e){A w,h,r=e.L/e.N;w=1h.4t(e.L+e.dX,1h.31(k.4s,k.x.1a));q(k.2E&&1h.9Y(w-k.x.1a)<12)w=k.x.1a;h=k.2A?e.N+e.dY:w/r;q(h<1h.31(k.6k,k.y.1a)){h=1h.31(k.6k,k.y.1a);q(k.2E)w=h*r}k.9h(w,h)},9h:C(w,h){k.y.72(h);k.x.72(w);k.U.G.N=k.y.Z(\'2f\')+\'F\'},26:C(){q(k.62||!k.55)E;q(k.3q[1]==\'4e\'&&m.2q){m.2G(m.2q).6P();m.2q=I}q(!m.1A(k,\'eV\'))E;k.62=M;q(k.1p&&!m.2q)k.1p.3p();m.4z(W,1S.3z?\'6U\':\'71\',m.68);1t{q(k.2A)k.bJ();k.S.G.4L=\'fj\';k.9b(0,{U:{L:k.x.t,N:k.y.t,1b:k.x.1K-k.x.cb+k.x.3s,Y:k.y.1K-k.y.cb+k.y.3s},S:{1b:0,Y:0,L:k.x.t,N:k.y.t}},m.9A)}1y(e){k.5D()}},bJ:C(){q(m.6y){q(!m.6s)m.6s=m.1d(\'P\',I,{1l:\'2l\'},m.2b);m.R(m.6s,{L:k.x.D+\'F\',N:k.y.D+\'F\',1b:k.x.H+\'F\',Y:k.y.H+\'F\',1o:\'3X\'})}q(k.2I==\'3x\')1t{m.$(k.19.1v).f9()}1y(e){}q(k.3U==\'6x\'&&!k.4D)k.bK();q(k.2s&&k.2s!=k.52)k.2s.G.2e=\'1q\'},bK:C(){q(m.2h&&k.1k)1t{k.1k.6g.W.19.2d=\'\'}1y(e){}q(k.2I==\'3x\')9p.fb(k.19.1v);k.19.2d=\'\'},bx:C(){q(k.1g)k.1g.2g.G.1o=\'1E\';k.3W=I;k.U.G.1o=\'1E\';k.55=1j;m.2o(m.4R,k)},bP:C(){1t{m.16[k.Q]=k;q(!m.9l&&m.3d!=k.Q){1t{m.16[m.3d].26()}1y(e){}}A z=m.4F++,5X={1o:\'\',1B:z};m.R(k.U,5X);k.62=1j;A o=k.1g||0;q(o){q(!k.3Y)5X.1n=\'1q\';m.R(o.2g,5X)}q(k.1p){k.a0()}k.a5()}1y(e){}},4O:C(o){A el=o.4P,53=(o.bO==\'2x\'&&!/7M$/.11(o.1l));q(1F el==\'a8\')el=m.4J(el);q(o.3D)el=m.1d(\'P\',{2d:o.3D});q(!el||1F el==\'a8\')E;q(!m.1A(k,\'f7\',{14:el}))E;el.G.1o=\'3X\';o.22=o.22||o.4P;q(k.3q[1]==\'4e\'&&k.bQ(o,el))E;k.9V();A L=o.L&&/^[0-9]+(F|%)$/.11(o.L)?o.L:\'1M\';q(/^(1b|3m)7M$/.11(o.1l)&&!/^[0-9]+F$/.11(o.L))L=\'f2\';A 14=m.1d(\'P\',{1v:\'22\'+m.61++,22:o.22},{1l:\'2l\',1n:\'1q\',L:L,9S:m.18.97||\'\',1z:0},53?m.2x:k.1x,M);q(53)14.6R=k.Q;14.1X(el);m.3A(14,{1z:1,bN:0,bL:0,4i:(o.6w===0||o.6w===1j||(o.6w==2&&m.2h))?0:5Z});m.3A(14,o);q(k.bo){k.5V(14);q(!14.7d||k.9C)m.2z(14,{1z:14.1z},14.4i)}m.2o(k.1T,m.61-1)},5V:C(14){A p=14.1l||\'9a 4X\',53=(14.bO==\'2x\'),74=14.bN,6O=14.bL;q(53){m.2x.G.1o=\'3X\';14.6R=k.Q;q(14.1O>14.23.1O)14.G.L=\'2w%\'}J q(14.23!=k.1x)k.1x.1X(14);q(/1b$/.11(p))14.G.1b=74+\'F\';q(/4X$/.11(p))m.R(14,{1b:\'50%\',4W:(74-1h.3e(14.1O/2))+\'F\'});q(/3m$/.11(p))14.G.3m=-74+\'F\';q(/^bM$/.11(p)){m.R(14,{3m:\'2w%\',9B:k.x.cb+\'F\',Y:-k.y.cb+\'F\',4Q:-k.y.cb+\'F\',2e:\'1M\'});k.x.1G=14.1O}J q(/^bC$/.11(p)){m.R(14,{1b:\'2w%\',4W:k.x.cb+\'F\',Y:-k.y.cb+\'F\',4Q:-k.y.cb+\'F\',2e:\'1M\'});k.x.36=14.1O}A 9d=14.23.1U;14.G.N=\'1M\';q(53&&14.1U>9d)14.G.N=m.3Z?9d+\'F\':\'2w%\';q(/^Y/.11(p))14.G.Y=6O+\'F\';q(/^9a/.11(p))m.R(14,{Y:\'50%\',4d:(6O-1h.3e(14.1U/2))+\'F\'});q(/^4Q/.11(p))14.G.4Q=-6O+\'F\';q(/^5N$/.11(p)){m.R(14,{1b:(-k.x.1G-k.x.cb)+\'F\',3m:(-k.x.36-k.x.cb)+\'F\',4Q:\'2w%\',6L:k.y.cb+\'F\',L:\'1M\'});k.y.1G=14.1U}J q(/^7E$/.11(p)){m.R(14,{1l:\'4y\',1b:(-k.x.1G-k.x.cb)+\'F\',3m:(-k.x.36-k.x.cb)+\'F\',Y:\'2w%\',4d:k.y.cb+\'F\',L:\'1M\'});k.y.36=14.1U;14.G.1l=\'2l\'}},bB:C(){k.a2([\'58\',\'9X\'],M);k.bq();q(k.9X)m.1A(k,\'eE\');q(k.58)m.1A(k,\'eF\');q(k.58&&k.a7)k.58.1c+=\' K-3u\';q(m.br)k.bp();O(A i=0;i<m.1T.V;i++){A o=m.1T[i],6N=o.9P,3c=o.2N;q((!6N&&!3c)||(6N&&6N==k.6Q)||(3c&&3c===k.2N)){q(k.2E||(k.2A&&o.eO))k.4O(o)}}A 7I=[];O(A i=0;i<k.1T.V;i++){A o=m.$(\'22\'+k.1T[i]);q(/7M$/.11(o.1l))k.5V(o);J m.2o(7I,o)}O(A i=0;i<7I.V;i++)k.5V(7I[i]);k.bo=M},9V:C(){q(!k.1x)k.1x=m.1d(\'P\',{1c:k.a9},{1l:\'2l\',L:(k.x.D||(k.3t?k.L:I)||k.x.1a)+\'F\',N:(k.y.D||k.y.1a)+\'F\',1n:\'1q\',2e:\'1q\',1B:m.2h?4:\'1M\'},m.2b,M)},57:C(98,bm){A 1x=k.1x,x=k.x,y=k.y;m.R(1x,{L:x.D+\'F\',N:y.D+\'F\'});q(98||bm){O(A i=0;i<k.1T.V;i++){A o=m.$(\'22\'+k.1T[i]);A 9E=(m.3Z||W.7a==\'8v\');q(o&&/^(5N|7E)$/.11(o.1l)){q(9E){o.G.L=(1x.1O+2*x.cb+x.1G+x.36)+\'F\'}y[o.1l==\'5N\'?\'1G\':\'36\']=o.1U}q(o&&9E&&/^(1b|3m)7M$/.11(o.1l)){o.G.N=(1x.1U+2*y.cb)+\'F\'}}}q(98){m.R(k.S,{Y:y.1G+\'F\'});m.R(1x,{Y:(y.1G+y.cb)+\'F\'})}},bn:C(){A b=k.1x;b.1c=\'\';m.R(b,{Y:(k.y.1G+k.y.cb)+\'F\',1b:(k.x.1G+k.x.cb)+\'F\',2e:\'1Y\'});q(m.4M)b.G.1n=\'1Y\';k.U.1X(b);O(A i=0;i<k.1T.V;i++){A o=m.$(\'22\'+k.1T[i]);o.G.1B=o.1B||4;q(!o.7d||k.9C){o.G.1n=\'1Y\';m.R(o,{1n:\'1Y\',1o:\'\'});m.2z(o,{1z:o.1z},o.4i)}}},78:C(){q(!k.1T.V)E;q(k.1p){A c=k.1p.2X;q(c&&m.2G(c)==k)c.23.9q(c)}O(A i=0;i<k.1T.V;i++){A o=m.$(\'22\'+k.1T[i]);q(o&&o.23==m.2x&&m.2G(o)==k)m.3B(o)}q(k.2A&&k.4D){k.1x.G.Y=\'-4v\';m.2b.1X(k.1x)}J m.3B(k.1x)},bs:C(){q(k.1p&&k.1p.2X){k.1p.4u(\'1a-2F\');E}k.7u=m.1d(\'a\',{21:\'bt:m.16[\'+k.Q+\'].7r();\',24:m.18.9Z,1c:\'K-1a-2F\'});q(!m.1A(k,\'fq\'))E;k.4O({4P:k.7u,1l:m.bz,7d:M,1z:m.bA})},7r:C(){1t{q(!m.1A(k,\'fZ\'))E;q(k.7u)m.3B(k.7u);k.3M();A 3f=k.x.D,3y=k.y.D;k.9h(k.x.1a,k.y.1a);A 3h=k.x.H-(k.x.D-3f)/2;q(3h<m.4W)3h=m.4W;A 3r=k.y.H-(k.y.D-3y)/2;q(3r<m.4d)3r=m.4d;k.9m(3h,3r);k.59(\'1q\')}1y(e){k.9o(e)}},5D:C(){k.a.1c=k.a.1c.2k(\'K-4I-46\',\'\');k.59(\'1Y\');q(k.2A&&k.4D&&k.3q[1]!=\'4e\'){k.bx()}J{q(k.1g&&k.3Y)k.1g.5U();m.3B(k.U)}q(m.6s)m.6s.G.1o=\'1E\';k.78();q(!m.2x.7L.V)m.2x.G.1o=\'1E\';q(k.4b)m.9x(k.Q);m.1A(k,\'fW\');m.16[k.Q]=I;m.bw()}};m.7x=C(a,S,7t){k.a=a;k.S=S;k.7t=7t};m.7x.5w={9r:C(){A 2V;q(!k.1e)k.1e=m.7s(k.a);q(k.1e.3b(\'#\')){A 2a=k.1e.7G(\'#\');k.1e=2a[0];k.1v=2a[1]}q(m.7k[k.1e]){k.cd=m.7k[k.1e];q(k.1v)k.a3();J k.6f();E}1t{2V=1J cp()}1y(e){1t{2V=1J bu("fS.bR")}1y(e){1t{2V=1J bu("bv.bR")}1y(e){k.9z()}}}A 3v=k;2V.gc=C(){q(3v.2V.bS==4){q(3v.1v)3v.a3();J 3v.6f()}};A 1e=k.1e;k.2V=2V;q(m.g3)1e=1e.2k(/$/,(/\\?/.11(1e)?\'&\':\'?\')+\'g6=\'+(1J 7K()).79());2V.ca(\'fQ\',1e,M);2V.ce(\'X-fA-fB\',\'cp\');2V.ce(\'fu-fv\',\'fL/x-fO-9j-fJ\');2V.fF(I)},a3:C(){m.7m();A 4l=1S.3z||m.cf?{1e:\'fI:eC\'}:I;k.1k=m.1d(\'1k\',4l,{1l:\'2l\',Y:\'-4v\'},m.2b);k.6f()},6f:C(){A s=k.cd||k.2V.dn,7H;q(k.7t)m.7k[k.1e]=s;q(!m.2h||m.2t>=5.5){s=s.2k(1J 4Y(\'<di[^>]*>\',\'c9\'),\'\').2k(1J 4Y(\'<cc[^>]*>.*?</cc>\',\'c9\'),\'\');q(k.1k){A 2B=k.1k.9O;q(!2B&&k.1k.6g)2B=k.1k.6g.W;q(!2B){A 3v=k;4a(C(){3v.6f()},25);E}2B.ca();2B.dg(s);2B.26();1t{s=2B.9Q(k.1v).2d}1y(e){1t{s=k.1k.W.9Q(k.1v).2d}1y(e){}}m.3B(k.1k)}J{7H=/(<19[^>]*>|<\\/19>)/db;q(7H.11(s))s=s.7G(7H)[m.3R?1:2]}}m.4p(k.S,\'7J\',\'K-19\').2d=s;k.3F();O(A x 2Y k)k[x]=I}};m.83=C(4k,1r){q(m.cX!==1j)m.95();k.4k=4k;O(A x 2Y 1r)k[x]=1r[x];q(k.cZ)k.cg();q(k.2D)k.2D=m.ci(k)};m.83.5w={cg:C(){k.2X=m.1d(\'P\',{2d:m.8b(m.8i.2X)},I,m.2b);A 6j=[\'3L\',\'3p\',\'3a\',\'1D\',\'3u\',\'1a-2F\',\'26\'];k.1Q={};A 3v=k;O(A i=0;i<6j.V;i++){k.1Q[6j[i]]=m.4p(k.2X,\'1H\',\'K-\'+6j[i]);k.4u(6j[i])}k.1Q.3p.G.1o=\'1E\'},ch:C(){q(k.cm||!k.2X)E;A B=m.16[k.4k],5q=B.7v(),2m=/7w$/;q(5q==0)k.5d(\'3a\');J q(2m.11(k.1Q.3a.2C(\'a\')[0].1c))k.4u(\'3a\');q(5q+1==m.4U.3i[B.2N||\'1E\'].V){k.5d(\'1D\');k.5d(\'3L\')}J q(2m.11(k.1Q.1D.2C(\'a\')[0].1c)){k.4u(\'1D\');k.4u(\'3L\')}},4u:C(1Q){q(!k.1Q)E;A cn=k,a=k.1Q[1Q].2C(\'a\')[0],2m=/7w$/;a.2p=C(){cn[1Q]();E 1j};q(2m.11(a.1c))a.1c=a.1c.2k(2m,\'\')},5d:C(1Q){q(!k.1Q)E;A a=k.1Q[1Q].2C(\'a\')[0];a.2p=C(){E 1j};q(!/7w$/.11(a.1c))a.1c+=\' 7w\'},cl:C(){q(k.42)k.3p();J k.3L()},3L:C(ck){q(k.1Q){k.1Q.3L.G.1o=\'1E\';k.1Q.3p.G.1o=\'\'}k.42=M;q(!ck)m.1D(k.4k)},3p:C(){q(k.1Q){k.1Q.3p.G.1o=\'1E\';k.1Q.3L.G.1o=\'\'}d9(k.42);k.42=I},3a:C(){k.3p();m.3a(k.1Q.3a)},1D:C(){k.3p();m.1D(k.1Q.1D)},3u:C(){},\'1a-2F\':C(){m.2G().7r()},26:C(){m.26(k.1Q.26)}};m.ci=C(1p){C 7p(B){m.3A(1r||{},{4P:4E,22:\'2D\',1c:\'K-2D-\'+5k+\'-14 \'+(1r.1c||\'\')});q(m.3Z)1r.6w=0;B.4O(1r);m.R(4E.23,{2e:\'1q\'})};C 28(3K){5t(1L,1h.3e(3K*4E[3S?\'1O\':\'1U\']*0.7))};C 5t(i,80){q(i===1L)O(A j=0;j<5I.V;j++){q(5I[j]==m.16[1p.4k].a){i=j;5m}}q(i===1L)E;A as=4E.2C(\'a\'),4I=as[i],48=4I.23,1b=3S?\'cj\':\'c8\',3m=3S?\'c7\':\'bX\',L=3S?\'bY\':\'bW\',4V=\'1w\'+1b,1O=\'1w\'+L,7e=P.23.23[1O],5j=7e-2g[1O],6o=3H(2g.G[3S?\'1b\':\'Y\'])||0,2O=6o,ej=20;q(80!==1L){2O=6o-80;q(5j>0)5j=0;q(2O>0)2O=0;q(2O<5j)2O=5j}J{O(A j=0;j<as.V;j++)as[j].1c=\'\';4I.1c=\'K-4I-46\';A 7X=i>0?as[i-1].23[4V]:48[4V],7Y=48[4V]+48[1O]+(as[i+1]?as[i+1].23[1O]:0);q(7Y>7e-6o)2O=7e-7Y;J q(7X<-6o)2O=-7X}A 8R=48[4V]+(48[1O]-7f[1O])/2+2O;m.2z(2g,3S?{1b:2O}:{Y:2O},I,\'8S\');m.2z(7f,3S?{1b:8R}:{Y:8R},I,\'8S\');8l.G.1o=2O<0?\'3X\':\'1E\';8M.G.1o=(2O>5j)?\'3X\':\'1E\'};A 5I=m.4U.3i[m.16[1p.4k].2N||\'1E\'],1r=1p.2D,5k=1r.5k||\'bV\',8K=(5k==\'en\'),4f=8K?[\'P\',\'6t\',\'1H\',\'1C\']:[\'2g\',\'4G\',\'47\',\'2J\'],3S=(5k==\'bV\'),4E=m.1d(\'P\',{1c:\'K-2D K-2D-\'+5k,2d:\'<P 1W="K-2D-eg">\'+\'<\'+4f[0]+\'><\'+4f[1]+\'></\'+4f[1]+\'></\'+4f[0]+\'></P>\'+\'<P 1W="K-28-1I"><P></P></P>\'+\'<P 1W="K-28-ee"><P></P></P>\'+\'<P 1W="K-7f"><P></P></P>\'},{1o:\'1E\'},m.2b),5E=4E.7L,P=5E[0],8l=5E[1],8M=5E[2],7f=5E[3],2g=P.ef,4G=4E.2C(4f[1])[0],47;O(A i=0;i<5I.V;i++){q(i==0||!3S)47=m.1d(4f[2],I,I,4G);(C(){A a=5I[i],48=m.1d(4f[3],I,I,47),ex=i;m.1d(\'a\',{21:a.21,24:a.24,2p:C(){q(/K-4I-46/.11(k.1c))E 1j;m.2G(k).3M();E m.8N(a)},2d:m.bT?m.bT(a):a.2d},I,48)})()}q(!8K){8l.2p=C(){28(-1)};8M.2p=C(){28(1)};m.2j(4G,W.eA!==1L?\'er\':\'eq\',C(e){A 3K=0;e=e||1S.2u;q(e.bU){3K=e.bU/dR;q(m.3z)3K=-3K}J q(e.bZ){3K=-e.bZ/3}q(3K)28(-3K*0.2);q(e.5n)e.5n();e.c0=1j})}E{7p:7p,5t:5t}};m.7o=m.18;A e8=m.5A;q(m.2h&&1S==1S.Y){(C(){1t{W.5h.e4(\'1b\')}1y(e){4a(c5.dZ,50);E}m.41()})()}m.2j(W,\'dW\',m.41);m.2j(1S,\'8B\',m.41);m.2j(W,\'41\',C(){q(m.7R||m.4b){A G=m.1d(\'G\',{T:\'e0/8I\'},I,W.2C(\'e1\')[0]),8E=W.7a==\'8v\';C 5P(8m,8n){q(m.2h&&(m.2t<9||8E)){A 1i=W.c6[W.c6.V-1];q(1F(1i.5P)=="7j")1i.5P(8m,8n)}J{G.1X(W.e6(8m+" {"+8n+"}"))}}C 5T(1f){E\'e5( ( ( ez = W.5h.\'+1f+\' ? W.5h.\'+1f+\' : W.19.\'+1f+\' ) ) + \\\'F\\\' );\'}q(m.7R)5P(\'.K 1N\',\'4L: 7T(\'+m.5c+m.7R+\'), 7Q !dA;\');5P(\'.K-2x-D\',m.2h&&(m.2t<7||8E)?\'1l: 2l; \'+\'1b:\'+5T(\'5O\')+\'Y:\'+5T(\'5R\')+\'L:\'+5T(\'8F\')+\'N:\'+5T(\'c4\'):\'1l: fV; L: 2w%; N: 2w%; 1b: 0; Y: 0\')}});m.2j(1S,\'3O\',C(){m.7S();q(m.2x)O(A i=0;i<m.2x.7L.V;i++){A 1P=m.2x.7L[i],B=m.2G(1P);B.5V(1P);q(1P.22==\'2D\')B.1p.2D.5t()}});m.2j(W,\'7D\',C(e){m.7B={x:e.7A,y:e.7F}});m.2j(W,\'8y\',m.8z);m.2j(W,\'c3\',m.8z);m.2j(W,\'41\',m.c1);m.2j(1S,\'8B\',m.c2);m.2j(1S,\'8B\',m.bI)}',62,1006,'||||||||||||||||||||this||hs||||if||||||||||var|exp|function|size|return|px|style|pos|null|else|highslide|width|true|height|for|div|key|setStyles|content|type|wrapper|length|document||top|get||test|||overlay||expanders||lang|body|full|left|className|createElement|src|prop|outline|Math|last|false|iframe|position|els|visibility|display|slideshow|hidden|options|innerContent|try|dim|id|offset|overlayBox|catch|opacity|fireEvent|zIndex|span|next|none|typeof|p1|li|up|new|tpos|undefined|auto|img|offsetWidth|node|btn|ss|window|overlays|offsetHeight|imgSize|class|appendChild|visible|outlineType||href|hsId|parentNode|title||close||scroll|params|arr|container|case|innerHTML|overflow|wsize|table|ie|to|addEventListener|replace|absolute|re|op|push|onclick|upcoming|loading|scrollerDiv|uaVersion|event|dimmer|100|viewport|dragArgs|animate|isHtml|doc|getElementsByTagName|thumbstrip|isImage|expand|getExpander|args|objectType|td|imgPad|target|ratio|slideshowGroup|tblPos|tgt|easing|image|hiddenBy|justify|minSize|xhr|ajax|controls|in|name|elem|min||||contentType|p2||||previous|match|sg|focusKey|round|xSize|lastY|xpos|groups|val|wh|ucwh|right|lastX|marginMin|pause|transitions|ypos|tb|useBox|move|pThis|clearing|swf|ySize|opera|extend|discardElement|opt|html|custom|onLoad|number|parseInt|hasDragged|tagName|delta|play|focus|elPos|resize|step|func|ieLt9|isX|changed|objectLoadTime|graphic|releaseMask|block|outlineWhileAnimating|ieLt7||ready|autoplay|getParam|xp1|yp1|anchor|tr|cell|styles|setTimeout|dimmingOpacity|mediumContent|marginTop|crossfade|tree|page|duration|dur|objectWidth|expKey|attribs|timers|pendingOutlines|now|getElementByClass|clone|blurExp|minWidth|max|enable|9999px|unit|objectHeight|relative|removeEventListener|navigator|invPos|setPosition|preserveContent|dom|zIndexCounter|tbody|tgtArr|active|getNode|clientSize|cursor|safari|onload|createOverlay|overlayId|bottom|sleeping|marginMax|start|anchors|offsetLeft|marginLeft|center|RegExp|images||end|scrollingContent|relToVP|styleRestoreCursor|isExpanded|htmls|sizeOverlayBox|heading|doShowHide|cacheBindings|hDiff|graphicsDir|disable|fitsize|cNode|while|documentElement|wDiff|minTblPos|mode|fadeBox|break|preventDefault|ruler|Id|cur|owner|allowReduce|selectThumb|moveOnly|area|prototype|minX|currentStyle|maxY|Expander|minY|iDoc|afterClose|domCh|setAttribute|toLowerCase|maxX|group|cloneNode|ysize|xsize|trans|above|scrollLeft|addRule|filter|scrollTop|padToMinWidth|fix|destroy|positionOverlay|fac|stl|allowSizeReduction|250|before|idCounter|isClosing|iebody|preloadTheseImages|on|over|credits|keyHandler|contentLoaded|getParams|param|parent|userAgent|opos|loadHTML|contentWindow|restoreCursor|obj|buttons|minHeight|numberPosition|uclt|showLoading|curTblPos|getAnchors|all|Outline|mask|ul|slideshows|matches|fade|after|geckoMac|cache|Dimension|showHideElements|maincontent|onLoadStarted|kdeBugCorr|wrapperKey|oDiv|dragHandler|afterExpand|allowWidthReduction|getPosition|marginBottom|maxWidth|tId|offY|cancelLoading|thumbsUserSetId|hsKey|ximgPad|writeExtendedContent|keypress|yimgPad|expandDuration|allowHeightReduction|lt|dir||keydown|setSize|525|offX||complete|isHsAnchor|destroyOverlays|getTime|compatMode|rel|self|hideOnMouseOut|overlayWidth|marker|curAnim|expOnly|gotoEnd|object|cachedGets|onReady|init|topmostKey|langDefaults|add|preloadTheseAjax|doFullExpand|getSrc|pre|fullExpandLabel|getAnchorIndex|disabled|Ajax|element|adj|clientX|mouse|preloadFullImage|mousemove|below|clientY|split|regBody|os|DIV|Date|childNodes|panel|imgs|previousOrNext|relatedTarget|pointer|expandCursor|getPageSize|url|current|getAdjacentAnchor|cacheAjax|activeLeft|activeRight|htmlGetSize|scrollBy|pixDimmerSize|update|Slideshow|isNew|location|getCacheBinding|dimmingDuration|contentId|getSelfRendered|calcBorders|replaceLang|clones|topZ|swfOptions|types|oPos|calcExpanded|skin|Text|preloadAjaxElement|scrollUp|sel|dec|other|getIframePageHeight|endOff|startOff|previousTitle|names|from|BackCompat|arrow|fitOverlayBox|mousedown|mouseClickHandler|correctIframeSize|load|hasMovedMin|maxsize|backCompat|clientWidth|Click|border|css|parseFloat|floatMode|defaultView|scrollDown|transit|offsetTop|mY|mX|markerPos|easeOutQuad|yp2|xp2|moveTitle|nextText|nextTitle|previousText|moveText|closeTitle|setObjContainerSize|closeText|props|padding|updateAnchors|state|cssDirection|doWrapper||middle|changeSize|startTime|parOff|sizeDiff|numberOfImagesToPreload|distance|resizeTo|maxHeight|form|srcElement|allowMultipleInstances|moveTo|align|error|swfobject|removeChild|run|done|background|htmlExpand|loadingPosXfade|openerTagNames|undim|garbageBin|onError|restoreDuration|marginRight|mouseIsOver|margin|ie6|isReady|hasAlphaImageLoader|Create|connectOutline|blur|evt|ucrb|calcThumb|origProp|contentDocument|thumbnailId|getElementById|osize|direction|loadingPos|getWrapperKey|genOverlayBox|restoreTitle|caption|abs|fullExpandTitle|initSlideshow|continuePreloading|getInline|getElementContent|overrides|show|hasFocused|dragByHeading|string|wrapperClassName|setPos|playText|pauseText|pauseTitle|fullExpandText|timerId|Move|Pause|preloadGraphic|spacebar|png|Play|Close|Highslide|JS|_default|Previous|appendTo||KDE|playTitle|vendor|200|call|Next|onGraphicLoad|and|vis|targetY|hasExtendedContent|pow|attributes|flashvars|isUnobtrusiveAnchor|hsHasSetClick|clear|ltr|newHeight|detachEvent|wmode|clickY|wrapperMouseHandler|focusTopmost|dimmingGeckoFix|enableKeyListener|fixedControls|hasHtmlExpanders|clickX|thumb|pageOrigin|loadingTitle|loadingText|resizeTitle|targetX|headingOverlay|captionOverlay|htmlSizeOperations|rb|switch|orig|getImageMapAreaCorrection|rv|tag|offsetParent|both|contentWrapper|loadingOpacity|pageXOffset|alpha|nopad|toUpperCase|easeInQuad|hide|clearsX|doPanels|showOverlays|gotOverlays|writeCredits|getNumber|showCredits|createFullExpand|javascript|ActiveXObject|Microsoft|reOrder|sleep||fullExpandPosition|fullExpandOpacity|getOverlays|rightpanel|focusTitle|hand|indexOf|clearsY|getAttribute|preloadAjax|htmlPrepareClose|destroyObject|offsetY|leftpanel|offsetX|relativeTo|awake|reuseOverlay|XMLHTTP|readyState|stripItemFormatter|wheelDelta|horizontal|Height|Bottom|Width|detail|returnValue|setClickEvents|preloadImages|mouseup|clientHeight|arguments|styleSheets|Right|Top|gi|open||script|cachedGet|setRequestHeader|ie6SSL|getControls|checkFirstAndLast|Thumbstrip|Left|wait|hitSpace|repeat|sls|getPropertyValue|XMLHttpRequest|creditsText|creditsTitle|creditsTarget|creditsHref|onHideLoading|creditsPosition|Eval|Overlay|addOverlay|nextSibling|_|overlayOptions|toString|fadeInOut|transitionDuration|easingClose|correctRatio|tmpMin|ximgSize|yimgSize|getComputedStyle|prepareNextOutline|newImg|oldImg|hideSelects|preloadNext|hideIframes|scrollWidth|reuse|iPod|iPhone|scrollHeight|boolean|dynamicallyUpdateAnchors|1001|useControls|geckodimmer|onAfterExpand|iPad|onDimmerClick|htmlCreate|onShowLoading|rect|clip|nodeName|clearTimeout|onBeforeGetContent|ig|dimming|IFRAME|300|Android|write|xpand|link|htmlE|Line|lineNumber|floor|responseText|onDrop|oncontextmenu|alert|onImageClick|button|addSlideshow|registerOverlay|zoomin|graphics|zoomout|keyCode|onKeyDown|important|keys|click|message|drag|Use|insertBefore|flushImgSize|headingText|headingEval|headingId|captionEval|captionText|maincontentId|maincontentText|Trident|it|120|reflow|maincontentEval|captionId|shadow|DOMContentLoaded|||callee|text|HEAD|header|blockRightClick|doScroll|expression|createTextNode|footer|HsExpander|ra|Safari|useMap|_self|pageYOffset|down|firstChild|inner|com|outlineStartOffset|mgnRight|onSetClickEvent||http|float|innerHeight|innerWidth|DOMMouseScroll|mousewheel|Gecko|onBeforeExpand|Macintosh|drop|removeAttribute|pI|imageCreate|ignoreMe|onmousewheel|white|blank|esc|onAfterGetCaption|onAfterGetHeading|onBeforeGetHeading|onBeforeGetCaption|circle|cellSpacing|fontSize|lineHeight|collapse|borderCollapse|useOnHtml|newWidth|frameborder|front|onmouseout|clearInterval|01|onBeforeClose|onBlur|onmouseover|Resize|Expand|fit|outlinesDir|200px|onInit|Go|allowSimultaneousLoading|the|onCreateOverlay|Powered|StopPlay|static|removeSWF|actual|onFocus|scale|shape|homepage|eval|outlines|default|SELECT|sizingMethod|AlphaImageLoader|DXImageTransform|progid|onAfterGetContent|onCreateFullExpand|onMouseOut|500|onMouseOver|Content|Type|Loading||attachEvent|of|Requested|With|coords|toElement|fromElement|send|sqrt|interval|about|urlencoded|dragSensitivity|application|mouseover|onDrag|www|cancel|GET|transparent|Msxml2|embedSWF|onActivate|fixed|onAfterClose|setInterval|flash|onDoFullExpand|bring|version|linearTween|forceAjaxReload|https|protocol|dummy|Image|debug|paddingTop|1px|expressInstallSwfurl|onreadystatechange|splice'.split('|'),0,{}));function is_array(mixed_var){return(mixed_var instanceof Array);}
var USE_CLOUD_HOST='http://3dceadbd4b7c8583ee79-6f7e93eba4ac1dc0a13a2fbbc580f8f1.r13.cf1.rackcdn.com';if('https:'==document.location.protocol){USE_CLOUD_HOST='';}
var editImg=jQuery("<img />").attr('src',USE_CLOUD_HOST+'/lib/img/ico_edit_pencil.gif').addClass('ico-edit-pencil');var editImgSmall=jQuery("<img />").attr('src',USE_CLOUD_HOST+'/lib/img/ico_edit_pencil_small.gif').addClass('ico-edit-pencil');var tabs_history=new Array();var tabs_history_length=3;var urls=new Array();var history_length=5;var history_load_lock=false;var flash_notification_displayed=false;var chk_eml_rgxp=new RegExp(/^[\w-]+(\.[\w-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*\.([a-z]{2,4})$/i);var xhrPost=function(args,responseElementId,formId,onloadcallback){var el=jQuery("#"+responseElementId);var opts={success:function(response){el.html(response);if(onloadcallback)onloadcallback();},type:'post'}
if(typeof(opts.data)=='undefined'){opts.data='';}
opts.data+='internal_ajax_call=1';if(typeof(formId)!='undefined'){opts.data=jQuery("#"+formId).serialize();opts.data+='&internal_ajax_call=1';}else{if(typeof(opts.data)=='object'){opts.data=jQuery.param(opts.data);opts.data+='&internal_ajax_call=1';}}
opts=jQuery.extend(opts,args);el.html(get_loader_html());jQuery.ajax(opts);return false;}
function get_loader_html()
{return'<div class="AJAX_wait"><img src="'+USE_CLOUD_HOST+'/lib/sw/img/ajax-loader.gif" alt="Please wait..." /></div>';}
var xmlhttpPost=function(url,responseEl,onloadcallback,isDialog,formname,data,poststring){var m='';if(typeof(poststring)=='string')
{m=poststring;m+='&internal_ajax_call=1&old_ajax=1';}
else
{if(formname!=""&&formname!=null){m=getquerystring(formname);}else{m=getquerystring();}
if(m.length>0){m+='&';}
m+='internal_ajax_call=1&old_ajax=1';if(typeof(data)!='undefined'){var _d=jQuery.param(data);m+=('&'+_d);}}
var el='';if(document.getElementById(responseEl)){el=document.getElementById(responseEl);el.style.visibility="visible";el.style.display="block";el.innerHTML='<div class="AJAX_wait"><img src="'+USE_CLOUD_HOST+'/lib/sw/img/ajax-loader.gif" alt="Please wait..." /></div>';}
for(var i=0;i<history_length;i++){urls[i]=urls[i+1];}
urls[history_length]=url;var xmlHttpReq=false;var self={};try{self.xmlHttpReq=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{self.xmlHttpReq=new ActiveXObject("Microsoft.XMLHTTP");}catch(E){self.xmlHttpReq=false;}}
if(!self.xmlHttpReq&&typeof XMLHttpRequest!='undefined'){try{self.xmlHttpReq=new XMLHttpRequest();}catch(e){self.xmlHttpReq=false;}}
if(!self.xmlHttpReq&&window.createRequest){try{self.xmlHttpReq=window.createRequest();}catch(e){self.xmlHttpReq=false;}}
self.xmlHttpReq.open('POST',url,true);self.xmlHttpReq.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=utf-8');var msg;self.xmlHttpReq.onreadystatechange=function(){if(self.xmlHttpReq.readyState==4){msg=self.xmlHttpReq.responseText;if(document.getElementById(responseEl)){updatepage(responseEl,msg);}
if(onloadcallback){onloadcallback();}}}
self.xmlHttpReq.send(m);};function getquerystring(formname){if(formname!=null&&form!=""){var form=document.getElementById(formname);if(!form){var form=document.forms[formname];}}else{var form=document.getElementById('SWPopup');}
var qstr='';if(form)
{for(var i=0;i<form.elements.length;i++){var element=form.elements[i];if(element.type=='checkbox')
{if(element.checked==true)
{qstr=qstr+element.name+'=1&';}else{qstr=qstr+element.name+'=0&';}}else if(element.type=='radio'){if(element.checked==true){qstr=qstr+element.name+'='+encodeURIComponent(element.value)+'&';}
else{}}else{qstr=qstr+element.name+'='+encodeURIComponent(element.value)+'&';}}}
return qstr;}
function updatepage(responseEl,str){var script="";str=str.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(){if(str!==null)script+=arguments[1]+'\n';return'';});var el=document.getElementById(responseEl);if(el!=null){el.innerHTML='';el.innerHTML=str;}
try{if(script)(window.execScript)?window.execScript(script):window.setTimeout(script,0);}catch(e){alert(e+" "+e.description);}
IE7=(navigator.appVersion.indexOf('MSIE 7.')==-1&&navigator.appVersion.indexOf('Safari')==-1)?false:true;}
function activateGSpell(el){var googie1=new GoogieSpell("/lib/sw/js/googiespell/","/lib/sw/js/googiespell/sendReq.php?lang=");googie1.decorateTextarea(el);}
AIM={frame:function(c){var n='f'+Math.floor(Math.random()*99999);var d=document.createElement('DIV');d.innerHTML='<iframe style="display:none" src="about:blank" id="'+n+'" name="'+n+'" onload="AIM.loaded(\''+n+'\')"></iframe>';document.body.appendChild(d);var i=document.getElementById(n);if(c&&typeof(c.onComplete)=='function'){i.onComplete=c.onComplete;}
return n;},form:function(f,name){f.setAttribute('target',name);},submit:function(f,c){AIM.form(f,AIM.frame(c));if(c&&typeof(c.onStart)=='function'){return c.onStart();}else{return true;}},loaded:function(id){var i=document.getElementById(id);if(i.contentDocument){var d=i.contentDocument;}else if(i.contentWindow){var d=i.contentWindow.document;}else{var d=window.frames[id].document;}
if(d.location.href=="about:blank"){return;}
if(typeof(i.onComplete)=='function'){i.onComplete(d.body.innerHTML);}
i.parentNode.removeChild(i);}}
function startCallback(response){e=document.getElementById('SWForm_AIMelements');e.style.display='none';e=document.getElementById('SWForm_AIMwait');e.innerHTML='<div class="AJAX_wait"><img src="'+USE_CLOUD_HOST+'/lib/sw/img/ajax-loader.gif" alt="Please wait..." /></div>';e.style.display='block';return true;}
function completeCallback(response){if(response){responsetarget='SWForm_AIMelements';if(document.getElementById(responsetarget)){updatepage(responsetarget,response);e=document.getElementById('SWForm_AIMelements');if(e!=null)e.style.display='block';}}
updatepage('SWForm_AIMwait','');var e=document.getElementById('SWForm_AIMwait');if(e!=null){e.innerHTML='';e.style.display='none';}}
var hide_iframe=function(){var popifrm=document.getElementById('popup_iframe');if(popifrm!=null)popifrm.style.visibility='hidden';}
var getScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;}
var getScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;}
var showOverlay=function(){jQuery("#popupOverlay").css({"opacity":'0.5'}).show();}
var hideOverlay=function(){jQuery("#popupOverlay").css({cursor:'auto'}).fadeOut('fast');}
var centerPopupForm=function(args){var opts={center_horizontal:true,center_vertical:true};var el='FormsPopup';el=jQuery('#'+el);var scroll_top=getScrollTop();var scroll_left=getScrollLeft();var l=Math.floor((jQuery(window).width()-el.width())/2);if(l<0)l=1;var t=Math.floor((jQuery(window).height()-el.height())/3);if(t<0){t=50;}
if(opts.center_horizontal){el.css({'left':scroll_left+l+'px'});}
if(opts.center_vertical){el.css({'top':scroll_top+t+'px'});}
return true;}
var showPopupForm_center=function(pc,el,margin,width,form_name,url){el='FormsPopup';showOverlay();centerPopupForm();var call_url='/lib/sw/blank.php?pc='+pc+'&pel='+el;if(url)call_url=url;xhrPost({url:call_url},el,form_name,centerPopupForm);el=jQuery('#'+el);el.css({'width':width?width:'421px','visibility':'visible'});return false;}
var showPopupForm_html=function(content,args){var undf='undefined';if(typeof(args)==undf){args={};}
el='FormsPopup';showOverlay();centerPopupForm();var buttonsList=[];if(typeof(args.buttons)!=undf)
{var addBtn=function(opts)
{var undf='undefined';if(typeof(opts)!='object')
{return false;}
if(typeof(opts.title)==undf){opts.title='';}
var btn='';if(typeof(args.noEm)==undf)
{btn=jQuery('<button type="button"><span><em>'+opts.title+'</em></span></button>');}
else
{btn=jQuery('<button type="button"><span>'+opts.title+'</span></button>');}
if(typeof(opts.index)!=undf){btn.attr('tabindex',opts.index);}
if(typeof(opts.classes)!=undf){btn.attr('class',opts.classes);}
if(typeof(opts.click)!=undf)
{btn.click(function(){opts.click();return false;});}
buttonsList.push(btn);};jQuery.each(args.buttons,function(k,v){if(typeof(v)=='string')
{if(v=='button_ok')
{addBtn({title:"Ok",classes:"button fl_center",click:closeSWForm});}}
else if(typeof(v)=='object')
{v.index=k;addBtn(v);}});}
if(typeof(args.popup_container_classes)=='undefined')
{args.popup_container_classes='';}
if(typeof(args.popup_buttons_container_classes)=='undefined')
{args.popup_buttons_container_classes='';}
content=''+'<div class="popup_container '+args.popup_container_classes+'">'+'<div class="popup_header" id="drag_header" style="width: 100%;">'+'<a onclick="window.afterLoadScript=false;closeSWForm();return false;"></a>'+'</div>'+'<div class="popup_content_wrapper">'+'<div class="popup_content">'+'<div class="clr"></div>'+
content+
(buttonsList.length?'<div class="buttons-container'+args.popup_buttons_container_classes+'"></div>':'')+'<div class="clr"></div>'+'</div>'+'</div>'+'<div class="popup_footer"></div>'+'</div>';el=jQuery('#'+el);el.css({'width':(typeof(args.width)!='undefined'&&args.width)?args.width:'421px','visibility':'visible'}).html(content);if(typeof(args.buttonClasses)!=undf)
{jQuery('.buttons-container',el).addClass(args.buttonClasses);}
if(buttonsList.length)
{jQuery.map(buttonsList,function(x){jQuery('.buttons-container',el).append(x);});}
centerPopupForm();}
var showPopupForm_showLoader=function()
{jQuery('#FormsPopup .popup_content').css({'opacity':'0.5','background':'url('+USE_CLOUD_HOST+'/lib/images/loading.gif) no-repeat 50% 50%'});jQuery('#popupOverlay').css({'z-index':9999});}
var showPopupForm_hideLoader=function()
{jQuery('#FormsPopup .popup_content').css({'opacity':1,'background':'none'});jQuery('#popupOverlay').css({'z-index':150});}
var showPopupForm_tos=function(el,width){jQuery('#FormsPopup').draggable({handle:'.step_header'});showPopupForm_center(false,false,false,'1000px',false,'/termsofuse/?popup=yes');_gaq.push(['_trackEvent','Main_popup_tos','show',1]);}
function chkresult(res){var chkbox=document.getElementById('reg_tos');chkbox.checked=res;closeSWForm('FormsPopup');}
var closeSWForm=function(el,hide_overlay){if(typeof(el)=='undefined')el='FormsPopup';if(typeof(hide_overlay)=='undefined')hide_overlay=true;else hide_overlay=false;jQuery('#'+el).html('');var dialogs_iframe=document.getElementById('popup_iframe');if(dialogs_iframe!=null){dialogs_iframe.style.visibility='hidden';}
if(hide_overlay)hideOverlay();}
function swCheckExt(el){}
function chkbulletin_fields(frm){subject=frm.elements['frm_subject'].value;message=frm.elements['frm_text'].value;errtext='';result=true;if(subject==''||subject=='Subject'){errtext=errtext+'Please enter subject.\n';jQuery("#frm_subject_err").html('Please enter subject.');jQuery("#frm_subject").addClass('field_input_error');result=false;}else{jQuery("#frm_subject_err").html('');jQuery("#frm_subject").removeClass('field_input_error');}
if(message==''||message=='Message'){errtext=errtext+'Please enter message.\n';jQuery("#frm_text_err").html('Please enter message.');jQuery("#frm_text").addClass('field_input_error');result=false;}else{jQuery("#frm_text_err").html('');jQuery("#frm_text").removeClass('field_input_error');}
return result;}
function moredetails(){if(jQuery('#more_details').is(':hidden')){show_moredetails();}else{hide_moredetails();}}
var show_moredetails=function(){jQuery('#more_details_status').attr('value','visible');jQuery('#m_d_status').html('-');jQuery('#more_details').show();return true;var more_details_status=document.getElementById('more_details_status');var personal_info_div=document.getElementById('personal_info_div');var more_details_div=document.getElementById('more_details');var m_d_s=document.getElementById('m_d_status');more_details_div.style.width=personal_info_div.offsetWidth+'px';var div=document.getElementById('more_details');var ad=document.getElementById('after_details');div.style.visibility='visible';more_details_status.value='visible';ad.style.marginTop='240px';m_d_s.innerHTML='-';}
function hide_moredetails(){jQuery('#more_details_status').attr('value','hidden');jQuery('#m_d_status').html('+');jQuery('#more_details').hide();return true;var more_details_status=document.getElementById('more_details_status');var personal_info_div=document.getElementById('personal_info_div');var more_details_div=document.getElementById('more_details');var m_d_s=document.getElementById('m_d_status');var foot_div=document.getElementById('footer');more_details_div.style.width=personal_info_div.offsetWidth+'px';var div=document.getElementById('more_details');var ad=document.getElementById('after_details');div.style.visibility='hidden';more_details_status.value='hidden';ad.style.marginTop='10px';m_d_s.innerHTML='+';}
(function($){jQuery.fn.BillingForm=function(args){var container=this;var opts={};function init(){opts=jQuery.extend(opts,args);jQuery("#country",container).change(function(){jQuery('#billing_st_div').load('/ajax/get_states/',{'send':'ctry_d','ctry':this.value,'name':'state'},function(){jQuery('#billing_st_div input').attr('class','step_text');jQuery('#billing_st_div select').attr('class','step_select');});});}
init();return container;}})(jQuery);;(function($){jQuery.fn.clearTextLimit=function(){return this.each(function(){this.onkeydown=this.onkeyup=null;});};jQuery.fn.textLimit=function(limit,callback){if(typeof callback!=='function')
var callback=function(){};return this.each(function(){this.limit=limit;this.callback=callback;this.onkeydown=this.onkeyup=function(){this.value=this.value.substr(0,this.limit);this.reached=this.limit-this.value.length;this.reached=(this.reached==0)?true:false;return this.callback(this.value.length,this.limit,this.reached);}});};jQuery.fn.MediaCaptionEditForm=function(args){var container=this;var opts={max_length:100};var text_field;var save_button;function init(){opts=jQuery.extend(opts,args);text_field=jQuery('textarea',container);save_button=jQuery('button',container);if(!text_field)
{throw"No textfield in MediaCaptionEditForm";}
text_field.focus();text_field.bind('keydown',chkcharcount);text_field.bind('keyup',chkcharcount);text_field.closest('form').find('button[type=submit]').click(function(e){return checkEmpty(e);});}
function chkcharcount(event){if(event.keyCode==13){if(save_button&&checkEmpty(event)){save_button.click();}
return false;}}
function checkEmpty(event)
{var txt=text_field.val().replace(/[\n\r]+/,'');text_field.val(txt);if(txt.length<1)
{alert('Please enter caption.');if(typeof(event)!='undefined')
{event.preventDefault();}
return false;}
return true;}
init();return container;};jQuery.fn.CandleEditForm=function(args){var container=this;var text_field;var initial_length=0;var save_button;var cancel_button;var chars_counter;var tribute_types;var selected_tribute;var chars_per_line=0;var max_lines=0;var max_chars=max_lines*chars_per_line;var current_max_chars=max_chars;var opts={callback:false,target_container:'pg',cancel_url:false};var ERROR_TEXT_EMPTY='Please enter your tribute text.';var ERROR_TRIBUTE_EMPTY='Please choose your tribute.';var ERROR_TEXT_LONG='You have exceeded maximum message length. Please try to make your message shorter. Or you can tell a story instead.';var text_overflow=false;function init(){opts=jQuery.extend(opts,args);text_field=jQuery('textarea',container);save_button=jQuery('a[rel=button_save_candle]',container);cancel_button=jQuery('a[rel=button_cancel_candle]',container);chars_counter=jQuery('.chars-counter',container);selected_tribute=jQuery('.selected_tribute',container);if(text_field){text_field.bind('keydown',chkcharcount);text_field.bind('keyup',chkcharcount);text_field.focus(function(){var callback=Memorial.get_login_callback('add_candle');jQuery.post('/ajax/set_afterlogin_action/',{'internal_ajax_call':1,'action':'add_candle'});Memorial.check_login(true,callback.callback,true,true,{from:'contribution'});});if(!(jQuery.browser.msie&&jQuery.browser.version<9))
{text_field.autosize();}}
if(save_button){save_button.click(function(){Memorial.check_login(true,save_candle);return false;});}
if(cancel_button){cancel_button.click(function(){if(opts.cancel_url){xmlhttpPost(opts.cancel_url,opts.target_container,opts.callback,true,container.attr('id'));}
return false;});}
if(!max_chars)
{chars_counter.hide();}
else if(chars_counter)
{init_tooltip(jQuery('img',chars_counter),{'extraClass':'tooltip tooltip-mark edit-candle-form-tooltip',top:-2,left:-2,positionLeft:false,lock:true});}
tribute_types=jQuery('.tribute_types label',container);if(tribute_types)
{tribute_types.click(function(){var th=jQuery(this);selected_tribute.removeClass('tribute_img0').removeClass('tribute_img1').removeClass('tribute_img2').addClass('tribute_img'+th.find('input').val());jQuery('label.active',th.closest('.tribute_types')).removeClass('active');th.addClass('active');th.find('input').prop('checked','checked');});tribute_types.find('input[value=0]').closest('label').click();}
chkcharcount(text_field.get(0));};function save_candle(){if(!opts.action_url){return false;}
if(jQuery.trim(text_field.val()).length==0){alert(ERROR_TEXT_EMPTY);return false;}
if(!chkcharcount(text_field.get(0))){return false;}
xmlhttpPost(opts.action_url,opts.target_container,opts.callback,true,null,null,container.serialize());return false;}
function chkcharcount(event){if(!max_chars)
{return true;}
if(event.target){target=event.target;}else{target=event;}
var chars_left=chars_per_line*max_lines;var lines=target.value.split(/\n/);var lines_count=lines.length;var newlines_count=lines.length;for(i in lines){var l=lines[i];var nc=Math.floor(l.length/chars_per_line);newlines_count=newlines_count+nc;}
if(chars_counter){chars_left=Math.max(0,(max_lines-newlines_count)*chars_per_line+(chars_per_line-(lines[lines.length-1].length%chars_per_line)));$('.chars-counter-text',chars_counter).html(opts.chars_counter_template.replace(':chars',chars_left).replace(':lines',Math.max(0,(max_lines-newlines_count))));if(chars_left>0){chars_counter.removeClass('exceed');}else{chars_counter.addClass('exceed');}}
if((newlines_count>max_lines)&&(event.keyCode>=32||event.keyCode==13)){text_overflow=true;}else{text_overflow=false;}
if(event.type=='keydown'){current_max_chars=target.value.length;}
if(text_overflow){target.value=target.value.substr(0,current_max_chars);}else{current_max_chars=max_chars;}
return!text_overflow;};function check_text_overflow(event){if(event.target){target=event.target;}else{target=event;}
if(text_overflow&&(event.keyCode>=32||event.keyCode==13)){if(target.value.length>current_max_chars){target.value=target.value.substr(0,current_max_chars);}
alert(ERROR_TEXT_LONG);event.preventDefault();return false;}
return true;}
function chkcandlefields(){text=text_field.val();if(text.length==0){alert(ERROR_TEXT_EMPTY);return false;}
return true;}
init();return container;}})(jQuery);function remember(){var rchkbox=document.getElementById('rememberme');if(rchkbox.checked==true){rchkbox.checked=false;}else if(rchkbox.checked==false){rchkbox.checked=true;}}
function chk_login_frm(){var result=true;if(document.getElementById('useremail').value==''){document.getElementById('useremail_err').innerHTML='<span style="color: red">Please enter your e-mail address.</span>';jQuery("#useremail").addClass('field_input_error');result=false;}else{document.getElementById('useremail_err').innerHTML='';jQuery("#useremail").removeClass('field_input_error');}
var customer_new=document.getElementById('customer_new');if(customer_new&&customer_new.checked==true&&result==true){if(document.getElementById('useremail').value!=''){document.getElementById('reg_eml').value=document.getElementById('useremail').value;}
document.getElementById('registration_form').style.display='block';document.getElementById('login_form').style.display='none';if(document.getElementById('login_page_header')!=null){document.getElementById('login_page_header').innerHTML='Registration';}
if(document.getElementById('login_page_error')!=null){document.getElementById('login_page_error').innerHTML='';}
result=false;}else if(customer_new&&customer_new.checked==true){document.getElementById('password_err').innerHTML='';}else{if(document.getElementById('password').value==''){jQuery("#password").addClass('field_input_error');document.getElementById('password_err').innerHTML='<span style="color: red">Missing password.</span>';result=false;}else{document.getElementById('password_err').innerHTML='';jQuery("#password").removeClass('field_input_error');}}
return result;}
function check_create_acct_data(){var ret_flg=true;if(document.getElementById('reg_fname').value==''){document.getElementById('reg_fname_err').innerHTML='<span style="color:red">Enter your first name.</span>';jQuery("#reg_fname").addClass('field_input_error');ret_flg=false;}else if(document.getElementById('reg_fname').value!=''){document.getElementById('reg_fname_err').innerHTML='';jQuery("#reg_fname").removeClass('field_input_error');}
if(document.getElementById('reg_lname').value==''){document.getElementById('reg_lname_err').innerHTML='<span style="color:red">Enter your last name.</span>';jQuery("#reg_lname").addClass('field_input_error');ret_flg=false;}else if(document.getElementById('reg_lname').value!=''){document.getElementById('reg_lname_err').innerHTML='';jQuery("#reg_lname").removeClass('field_input_error');}
document.getElementById('reg_eml_match').innerHTML='';jQuery('#reg_eml').removeClass('field_input_error');jQuery('#reg_eml_confirm_match').html('');jQuery('#reg_eml_confirm').removeClass('field_input_error');if(document.getElementById('reg_eml').value==''){document.getElementById('reg_eml_match').innerHTML='<span style="color:red">Enter your e-mail address.</span>';jQuery("#reg_eml").addClass('field_input_error');ret_flg=false;}else{var testres=chk_eml_rgxp.test(document.getElementById('reg_eml').value);if(testres==false){ret_flg=false;document.getElementById('reg_eml_match').innerHTML='<span style="color:red">Invalid e-mail address. Please re-enter.</span>';jQuery("#reg_eml").addClass('field_input_error');}else{if(jQuery("#reg_eml").attr("value")!=jQuery("#reg_eml_confirm").attr("value")){jQuery('#reg_eml_confirm_match').html("<span style=\"color:red;\">E-mail addresses do not match.</span>");jQuery("#reg_eml_confirm").addClass('field_input_error');ret_flg=false;}else{}}}
jQuery('#reg_pw_confirm_match').html('');document.getElementById('reg_pw_match').innerHTML='';jQuery('#reg_pw1').removeClass('field_input_error');jQuery('#reg_pw1_confirm').removeClass('field_input_error');if(document.getElementById('reg_pw1').value==''){document.getElementById('reg_pw_match').innerHTML='<span style="color:red">Please enter password.</span>';jQuery('#reg_pw1').addClass('field_input_error');ret_flg=false;}else{if(jQuery("#reg_pw1").attr("value")!=jQuery("#reg_pw1_confirm").attr("value")){jQuery('#reg_pw_confirm_match').html("<span style=\"color:red;\">Passwords do not match.</span>");jQuery('#reg_pw1_confirm').addClass('field_input_error');ret_flg=false;}else{}}
return ret_flg;}
function chk_bill_fields(){var errors=0;if(document.getElementById('cc_number')!=null&&(document.getElementById('cc_number').value==''||document.getElementById('cc_number').value.length>18)){document.getElementById('cc_number_error').innerHTML='Please enter credit card number.';errors++;}else{document.getElementById('cc_number_error').innerHTML='';}
if(document.getElementById('cvv2')!=null&&document.getElementById('cvv2').value==''){document.getElementById('cvv2_error').innerHTML='Please enter CVV code (3 digits).';errors++;}else{document.getElementById('cvv2_error').innerHTML='';}
if(document.getElementById('exp_date_mm')!=null&&document.getElementById('exp_date_yyyy')!=null){var current_date=new Date();var entered_date=new Date();entered_date.setFullYear(document.getElementById('exp_date_yyyy').value,document.getElementById('exp_date_mm').value,01);if(entered_date<current_date){document.getElementById('exp_date_error').innerHTML='Please enter correct date.';errors++;}else if(entered_date>current_date){document.getElementById('exp_date_error').innerHTML='';}else{document.getElementById('exp_date_error').innerHTML='Please enter correct date.';errors++;}}
if(jQuery('#cardholder_name').attr('value')==''){jQuery('#cardholder_name_error').html('Please enter name on card.');errors++;}else{jQuery('#cardholder_name_error').html('');}
if(document.getElementById('street_addr')!=null&&document.getElementById('street_addr').value==''){document.getElementById('street_addr_error').innerHTML='Please enter your street address.';errors++;}else{document.getElementById('street_addr_error').innerHTML='';}
if(document.getElementById('city')!=null&&document.getElementById('city').value==''){document.getElementById('city_error').innerHTML='Please enter your city.';errors++;}else{document.getElementById('city_error').innerHTML='';}
if(document.getElementById('zip')!=null&&document.getElementById('zip').value==''&&(jQuery('#country').val()=='United States')){document.getElementById('zip_error').innerHTML='Please enter your zip code.';errors++;}else{document.getElementById('zip_error').innerHTML='';}
if(document.getElementById('country')!=null&&document.getElementById('country').value==''){document.getElementById('country_error').innerHTML='Please enter your country.';errors++;}else{document.getElementById('country_error').innerHTML='';}
if(errors==0)return true;else
return false;}
function reload_memorial_page(url){Memorial.reload_memorial_page();return false;}
UserLoginDialog_Object={invitation:false,switchToRegister:function(){_gaq.push(['_trackEvent','Memorial_dialog','signup','manual_open']);jQuery('#reg_eml').val(jQuery('#useremail').val());jQuery('#login_form').hide();jQuery('#registration_form').show();jQuery("#UserLoginDialog_frm_event").attr('value','Register');return false;},switchToLogin:function(){if(UserLoginDialog_Object.invitation&&(typeof(Memorial)!='undefined')){Memorial.openUserLoginDialog();}
jQuery('#registration_form').hide();jQuery('#login_form').show();jQuery("#UserLoginDialog_frm_event").attr('value','SignIn');return false;},init_login_form:function(){jQuery('#registration_form #reg_eml_confirm').bind('paste',function(e){e.preventDefault();});jQuery('#registration_form #reg_pw1_confirm').bind('paste',function(e){e.preventDefault();});jQuery("#useremail").focus();},submit_form:function(){jQuery("#UserLoginDialog_submitter").click();},pre_submit:function(){var action=jQuery("#UserLoginDialog_frm_event").val();var result=false;switch(action){case'SignIn':result=chk_login_frm();break;case'Register':result=check_create_acct_data();break;case'invitation_signup':result=true;break;}
if(result){return startCallback();}
return result;}}
function openUserLoginDialog(addUrl){Memorial.openUserLoginDialog(addUrl);return false;}
function openContactForm(memorial_url,acct_id,params){_gaq.push(['_trackEvent','Memorial_action','click','contact_form']);var url='ContactOwnerForm';params=jQuery.extend({from:'contactform'},params);var addUrl='';if(memorial_url){url+=('&url='+memorial_url);}
if(acct_id){url+=('&acct_id='+acct_id);addUrl='&acct_id='+acct_id;params.acct_id=acct_id;}
var callback=function(){showPopupForm_center(url,'FormsPopup','150px 0px 0px -200px','421px');};if(memorial_url){if((typeof(Memorial)!='undefined')){Memorial.check_login(true,callback,null,null,params);}else{callback();}}
return false;}
function init_cvv_tooltip(){jQuery('#cvv2_tooltip_link').tooltip({track:false,delay:0,showURL:false,id:'cvv2_tooltip',extraClass:'tooltip',showBody:'::',positionLeft:true});}
function init_tooltip(obj,args){var opts={track:false,delay:0,showURL:false,extraClass:'tooltip',showBody:'::'};opts=jQuery.extend(opts,args);obj.tooltip(opts).addClass('processed');}
function init_tooltips(customClass){var extraClasses='tooltip tooltip-mark';if(typeof(customClass)=='string')
{extraClasses+=' '+customClass;}
init_tooltip(jQuery(".tooltip-mark:not(.processed)"),{extraClass:extraClasses});}
function init_suggestion_tooltip(obj){init_tooltip(obj,{id:'suggestion_tooltip'});};(function($){jQuery.fn.RelationshipSelector=function(args){var container=this;var selector=null;var custom_field=null;var field_container=null;var opts={custom_css:null,custom_value:'Other',custom_field_value:'Type relationship here',form:null};function init(){selector=jQuery("select",container);field_container=jQuery("div#steps_form_custom_field");if(field_container!=null){custom_field=jQuery("input",field_container);}else{custom_field=jQuery("input",container);}
opts=jQuery.extend(opts,args);selector.change(function(){if(jQuery(selector).val()==opts.custom_value){showCustomField();}else{hideCustomField();}});if(jQuery(selector).val()==opts.custom_value){showCustomField();}
custom_field.TextFieldUpdater({'emptyText':opts.custom_field_value,'form':opts.form});container.selector=selector;container.custom_field=custom_field;}
container.prepareToSave=function(){if(this.custom_field.val()==opts.custom_field_value){this.custom_field.attr('value','');}};function showCustomField(){if(!opts.selector_obj){var posTop=Math.floor(selector.offset().top);var posLeft=Math.floor(selector.offset().left)+selector.width()+parseInt(selector.css('padding-left'))+parseInt(selector.css('padding-right'))+10;new_css={'position':'absolute','top':posTop+'px','left':posLeft+'px'}}else{new_css={};if(opts.place&&opts.place=='below'){posLeft=Math.floor(opts.selector_obj.offset().left);posTop=Math.floor(opts.selector_obj.offset().top)+opts.selector_obj.height()+parseInt(opts.selector_obj.css('padding-top'))+parseInt(opts.selector_obj.css('padding-bottom'))+10;new_css={'position':'absolute','left':posLeft+'px','top':posTop+'px'};}}
custom_field.fadeIn('fast');}
function hideCustomField(){custom_field.fadeOut('fast');}
init();return container;}})(jQuery);function find_a_bug(uri){if(!uri){return false;}
memorial=document.location.href;memorial=memorial.replace(/http:\/\//gi,'');uri=uri+'?url='+jQuery.URLEncode(memorial);window.open(uri);return false;};(function($){jQuery.fn.ContactUsForm=function(args){var container=this;var selector=null;var opts={};function init(){selector=jQuery("#contact_us_inquiry_type",container);opts=jQuery.extend(opts,args);}
init();return container;}})(jQuery);;(function($){jQuery.fn.dropDownMenu=function(args){var container=this;var opts={method:'slide'};function init(){opts=$.extend(opts,args);jQuery("li",container).hover(function(){jQuery(this).addClass("hover");if(opts.method=='slide'){jQuery('ul:first',this).slideDown(250).delay(1200);}else{jQuery('ul:first',this).show();}},function(){var hideCallback=function(){jQuery(this).parent().removeClass("hover");};if(opts.method=='slide'){jQuery('ul:first',this).slideUp(250,hideCallback);}else{jQuery('ul:first',this).hide(0,hideCallback);}});}
init();return container;}
$.fn.dropDownClickMenu=function(){var container=this;function init(){$("li",container).click(function(){var el=$(this);if(el.is('.hover')){GalSortable.closeDropDownClickMenu(el);}else{el.addClass("hover");$('ul:first',el).show();}});$(document).unbind('click.dropDownClickMenuClose').bind('click.dropDownClickMenuClose',function(event){$('ul.imgEdit li').each(function(){elo=$(this);if(event.target.parentNode.id==this.id||event.target==this){return}
if(elo.is('.hover')){GalSortable.closeDropDownClickMenu(elo)}})});}
init();return container;}})(jQuery);$.extend({URLEncode:function(c){var o='';var x=0;c=c.toString();var r=/(^[a-zA-Z0-9_.]*)/;while(x<c.length){var m=r.exec(c.substr(x));if(m!=null&&m.length>1&&m[1]!=''){o+=m[1];x+=m[1].length;}else{if(c[x]==' ')o+='+';else{var d=c.charCodeAt(x);var h=d.toString(16);o+='%'+(h.length<2?'0':'')+h.toUpperCase();}
x++;}}
return o;},URLDecode:function(s){var o=s;var binVal,t;var r=/(%[^%]{2})/;while((m=r.exec(o))!=null&&m.length>1&&m[1]!=''){b=parseInt(m[1].substr(1),16);t=String.fromCharCode(b);o=o.replace(m[1],t);}
return o;}});function show_loading(){var pg=document.getElementById('pg');pg.style.visibility='hidden';var el=document.getElementById('pg_loading');el.style.visibility='visible';el.innerHTML='<div class="AJAX_wait"><img src="'+USE_CLOUD_HOST+'/lib/sw/img/ajax-loader.gif" alt="Please wait..." /></div>';window.scrollTo('50%',el.offsetTop);}
function _ga_async_track_page(page){var trackvar=['_trackPageview'];if(page&&page.length>0){page=page.replace(/http:\/\/[a-z0-9.-]+/gi,'');trackvar.push(page);Log.write(page);}
if(typeof(_gaq)!='undefined'&&(typeof(_ga_tracking_lock)!='undefined')&&(_ga_tracking_lock==false)){_gaq.push(trackvar);}}
Log={write:function(message,type){if(type=='ajax'){}
if(typeof(console)!='undefined'){console.log(message);}}}
function isFlashAvailable(){playerVersion=swfobject.getFlashPlayerVersion();return(playerVersion.major!=0);}
function displayFlashNotification(opts){var opts=(opts)?opts:{};var c=false;if((!c&&!flash_notification_displayed)||opts.force||opts.container){var message='WARNING: FLASH is not installed. Your browser requires Adobe FLASH plugin in order to display this page correctly.';message=message+'<br /><a href="http://www.adobe.com/go/getflashplayer"><b>Download Adobe FLASH plugin here</b></a>.';if(opts.container){jQuery(opts.container).html(message);}else{if(typeof(Notifications)!='undefined'){flash_notification_displayed=true;Notifications.addWarning(message);}}}
return false;}
function createCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}
else var expires="";document.cookie=name+"="+value+expires+"; path=/;";}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
function eraseCookie(name){createCookie(name,"",-1);};(function($){jQuery.fn.resellerImageEditor=function(args){var container=this;var uploader=null;var opts={type:'main',extensions:['png'],removeUrl:'/account/removeResellerImage',removeAction:function(){$.ajax({type:'post',url:opts.removeUrl,data:{type:opts.type,'reseller_id':opts.userId},success:function(){jQuery(".uploader",container).show();initImageContainer();}});return false;},uploadSuccessfulCallback:function(response){Log.write('cb_default');}};function init(){opts=$.extend(opts,args);initImageContainer(opts.url);initUploader(opts.type);};function initUploader(imageType){var uploder=$("input[type=file]",container).uploadifive({formData:{'folder':'/'+(opts.userId+'|'+imageType)},'uploadScript':opts.script,'multi':false,'buttonText':'Select File','buttonClass':'uploader-html-main','queueID':'fileQueue-main',onUploadComplete:function(file,data){return true;},onUploadComplete:function(file,data){console.log('UPLOAD_COMPLETE',file,data);try{var res=jQuery.evalJSON(data);console.log('UPLOAD_COMPLETE',file,data,res);if(res.success){var image_url=res.image_url;initImageContainer(image_url);opts.uploadSuccessfulCallback(res);uploder.uploadifive('clearQueue');}else{alert(res.error_message);}}catch(e){}
return true;}});console.log('INIT_UPLOADER',imageType);};function initUploader_(imageType){if(!isFlashAvailable()){$("input[type=file]",container).hide();displayFlashNotification();return false;}}
function initImageContainer(url){if(url){if(url.indexOf(opts.baseUrl)==-1){url=opts.baseUrl+url;}
var img=jQuery('<img />');img.attr('src',url+'?'+Math.floor(Math.random()*1000000));jQuery('.image-preview',container).html(img);var remove_link=jQuery('<a class="delete" href="#">Delete</a>');remove_link.click(function(){opts.removeAction(container,initImageContainer);return false;});jQuery('.image-preview',container).append(remove_link).show();}else{jQuery('.image-preview',container).html("").hide();}}
init();return container;}})(jQuery);;(function($){jQuery.fn.resellerAdBlockForm=function(args){var container=this;var info_form=null;var items=null;var preview=null;var opts={checked:false};function init(){opts=$.extend(opts,args);var trigger=$("#reseller-ad-block",container);var info_form=$(container).closest('form');Log.write(info_form);if(trigger){trigger.change(function(){opts.checked=jQuery(this).get(0).checked;updateItemsSelector(opts.checked);});trigger.get(0).checked=opts.checked;}
items=$(".public-item",container);if(items){items.change(function(){xhrPost({url:'/account/reseller_profile/preview_ad_block'},preview.attr('id'),info_form.attr('id'));return false;});}
preview=$("#reseller-ad-block-preview",container);updateItemsSelector(opts.checked);}
function updateItemsSelector(){if(items){items.each(function(){jQuery(this).get(0).disabled=!opts.checked});}
if(preview){if(!opts.checked){preview.hide();}else{preview.show();}}}
init();return container;}})(jQuery);var createMemorialResellerSignin={container:null,type_selector:null,opts:{},init:function(containerId,args){this.container=jQuery("#"+containerId);this.opts=jQuery.extend(this.opts,args);this.type_selector=jQuery("#reseller-login-type input",this.container);this.type_selector.each(function(){jQuery(this).change(function(){var value=jQuery(this).val();createMemorialResellerSignin.checkFormToDisplay(value);});if(jQuery(this).is(':checked')){createMemorialResellerSignin.checkFormToDisplay(jQuery(this).val());}});},switchToLogin:function(){jQuery("#reseller-login-type input:checked",this.container).removeAttr('checked');jQuery("input#reseller-login-existing-admin",this.container).attr('checked','checked');this.checkFormToDisplay('existing_admin');return false;},checkFormToDisplay:function(value){if(!value)value='new_admin';var container=this.container;switch(value){case'existing_admin':jQuery("#register_frm",container).hide(0,function(){jQuery("#login_frm",container).show();});jQuery("input",container).removeAttr('disabled');break;case'reseller_admin':jQuery("#register_frm input",container).attr('disabled','disabled');jQuery("#login_frm input",container).attr('disabled','disabled');break;default:jQuery("#login_frm",container).hide(0,function(){jQuery("#register_frm",container).show();});jQuery("input",container).removeAttr('disabled');}}};var CookieTracker={init:function(){jQuery.ajax({'type':'post','url':'/ajax/track_cookies','data':'internal_ajax_call=1',success:function(response){var res=jQuery.evalJSON(response);if(res.success&&!res.cookies_enabled){if(typeof(Notifications)!='undefined'){Notifications.addError("WARNING: Your browser does not accept cookies.\nCookies must be enabled in order for this website to work correctly.");}}}})}};var AdvancedEditorOptions={script_url:'/lib/js/tinymce/tiny_mce.js',theme:"advanced",skin:"o2k7",skin_variant:"silver",plugins:"autolink,style,save,inlinepopups,print,paste,fullscreen,spellchecker",theme_advanced_buttons1:"restoredraft,|,pastetext,pasteword,|,undo,redo,|,fontselect,fontsizeselect,|,fullscreen,|,print",theme_advanced_buttons2:"spellchecker,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,outdent,indent,blockquote,|,forecolor,backcolor,|,hr,removeformat,|,link,unlink,cleanup,code",theme_advanced_buttons3:'',theme_advanced_buttons4:'',theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:false,theme_advanced_resizing:false,theme_advanced_fonts:"Arial=arial;Comic Sans MS=Comic Sans MS;Courier New=Courier New;Georgia=Georgia;Tahoma=Tahoma;Times New Roman=Times New Roman;Trebuchet MS=Times New Roman;Verdana=Verdana",imagemanager_contextmenu:false,spellchecker_languages:"+English=en,French=fr,Russian=ru,Spanish=es,German=de,German(old spelling)=de-alt,Italian=it,Dutch=nl,Polish=pl,Portuguese=pt,Swedish=sv,Norwegian=no,Romanian=ro,Czech=cs,Finnish=fi",content_css:"/lib/css/tinymce.css",template_external_list_url:"lists/template_list.js",external_link_list_url:"lists/link_list.js",external_image_list_url:"lists/image_list.js",media_external_list_url:"lists/media_list.js",autosave_retention:'28800m',theme_advanced_font_sizes:'12px,14px,16px,18px,24px,36px,48px',font_size_style_values:"12px,14px,16px,18px,24px,36px,48px",convert_fonts_to_spans:true,force_br_newlines:true,force_p_newlines:false};function htmlspecialchars(str){var s=document.createTextNode(str);var span=document.createElement("temp1");span.appendChild(s);return span.innerHTML;}
(function($){window.fit_container=function(element){if(typeof(window.fit_container_estimator)=='undefined')
{if($('#CMwidthEstimator').length==0){var wiTemp=$('<div id="CMwidthEstimator"/>').css({visibility:'hidden',position:'absolute',height:'auto',width:'auto'});$('body').append(wiTemp);}
window.fit_container_estimator=$('#CMwidthEstimator');}
var we=window.fit_container_estimator;if(element&&(element.length>0)){var origText=element.html(),tempText=origText;we.html(origText);var changed=false;while(we.width()>element.width()){changed=true;tempText=tempText.substr(0,tempText.length-2);if(tempText.length==0){break;}
we.html(tempText+'...');}
if(changed){element.html(tempText+'...');}}}
$.fn.scrollToBottom=function(settings)
{var $me=$(this);if(!$me||!$me.length){return false;}
var topOffset=0-$(window).height()+$me.outerHeight()+200;if(typeof(settings)!='undefined')
{if(typeof(settings.staticHeight)!='undefined')
{topOffset+=settings.staticHeight;}}
settings=$.extend({offset:{top:topOffset}},settings);return $.scrollTo($me,1000,settings);}})(jQuery);var App={},ud='undefined';(function(me,$)
{me.loadedBundles=[];me.loadBundle=function(path,successCallback,failCallback)
{return me.loadBundleUrl(path,successCallback,failCallback);}
me.loadBundleUrl=function(url,successCallback,failCallback)
{var bundles=me.loadedBundles;if(typeof(bundles[url])!==ud)
{if(typeof(successCallback)!==ud){successCallback(bundles[url].script,bundles[url].textStatus);}
return 1;}
var options={dataType:"script",cache:true,url:url};return $.ajax(options).done(function(script,textStatus){bundles[url]={script:script,textStatus:textStatus}
if(typeof(successCallback)!==ud){successCallback(script,textStatus);}
return true;}).fail(function(){if(typeof(failCallback)!==ud){failCallback();}
else
{alert('Network error');}});}})(App,jQuery);(function(me,$){$.fn.wysiwyg=function(opts){var $els=$(this);function detectmob(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){return true;}
else{return false;}}
if(!detectmob())
{$els.tinymce(AdvancedEditorOptions);return;}
me.loadBundle('/lib/js/mediumeditor/js/medium-editor.min.js',function(){$els.each(function(){var $el=$(this);var $c=$('<div></div>');$c.html($el.text());$c.css({width:'100%',height:'200px',overflow:'auto',clear:'both'});$c.attr('editable')
if(typeof(me.wysiwyg_id)===ud)
{me.wysiwyg_id=0;}
me.wysiwyg_id++;var id='wysiwyg'+me.wysiwyg_id;$c.attr('id',id).insertAfter($el).addClass('medium-editor');$el.hide();var editor=new MediumEditor('#'+id,{placeholder:''});var saveFunc=function(){$el.val($c.html());};$('#'+id).bind('input',saveFunc).bind('focusout',saveFunc);});});};})(App,jQuery);;function clickMemorialTab(tab,obj){Memorial.load_page(tab);updateGlobalNav(obj);return false;}
function updateGlobalNav(el)
{jQuery('#header_menu a.clicked').each(function(){jQuery(this).removeClass('clicked');jQuery(this).parent().removeClass('clicked');})
if(el){jQuery(el).addClass('clicked');jQuery(el).parent().addClass('clicked');}}
function getBaseDomain()
{var h='';if(typeof(document.location)!=='undefined'&&typeof(document.location.host))
{h=document.location.host;}
if(!h)
{h='forevermissed.com';}
else
{h=h.replace(/^www\./,'');}
return h;};(function($){jQuery.fn.lifeStoryEditForm=function(args){var container=this;var opts={'target':'pg','launch_editor':false};var album_file=false;var btn_save=false;var btn_cancel=false;var editor=false;var title_field=false;var textarea=false;var attachment=false;var story_checked=false;var attachment_initialized=false;var attachment_uploaded=false;var uploaderOptions={buttonClass:'upload-browse',queueID:'fileQueue',auto:false,buttonText:'',width:'358',height:'22',removeCompleted:true,fileObjName:'frm_img_nme_fileUpload',uploadScript:'http://upload.'+getBaseDomain()+'/lib/js/uploadifive/uploadifive.php',onInit:function(){attachment_initialized=true;},onUploadComplete:function(file,data){return true;}};function init(){opts=jQuery.extend(opts,args);if(typeof(opts.lifestory_id)==='undefined'){throw"Undefined opts.lifestory_id";}
btn_save=jQuery('#editstory'+opts.lifestory_id+'_btn_save',container);btn_cancel=jQuery('#editstory'+opts.lifestory_id+'_btn_cancel',container);textarea=jQuery('textarea',container);title_field=jQuery('input[type="text"]',container);attachment=jQuery('input#attachment'+opts.lifestory_id,container);album_file=jQuery('#lifestory'+opts.lifestory_id+'_album_file_id',container);if(btn_cancel){btn_cancel.click(function(){if(!confirm("Changes you have made to this story will be lost. Are you sure?"))return false;cancel();return false;});}
if(btn_save){btn_save.click(function(){Memorial.check_login(true,save);return false;});}
var callback=Memorial.get_login_callback('add_lifestory');if(title_field)jQuery(title_field).bind('focus',function(){Memorial.check_login(true,false,true,callback.callback,{from:'contribution'});});if(textarea){jQuery(textarea).bind('focus',function(){Memorial.check_login(true,false,true,callback.callback);});}
if(opts.launch_editor){textarea.wysiwyg();}else{jQuery(textarea).bind('focus',function(event){textarea.wysiwyg();});}
init_upload();};function init_upload(){if(!attachment||!opts.folder)return false;if(typeof(opts.lifestory_id)==='undefined'){throw"Undefined opts.lifestory_id";}
if(typeof(opts.extension_line)==='undefined'){throw"Undefined opts.extension_line";}
if(typeof(opts.attach_description)==='undefined'){throw"Undefined opts.attach_description";}
var uploader=$(attachment);uploader.uploadifive($.extend(uploaderOptions,{queueSizeLimit:1,multi:false,buttonClass:'upload-browse'+opts.lifestory_id,fileType:opts.fileType,fileSizeLimit:opts.max_file_size,queueID:'fileQueue'+opts.lifestory_id,formData:{folder:opts.folder,},onCancel:function(file){$('.upload-browse'+opts.lifestory_id).show();},onSelect:function(queue){$('.upload-browse'+opts.lifestory_id).hide();},onUploadComplete:function(file,response){if(!isNaN(response)){attachment_uploaded=true;jQuery(album_file).val(response);save();}else{attachment_uploaded=false;story_checked=false;uploader.uploadifive('clearQueue');alert(response);}
return true;}}));};function save(){if(!story_checked){var error='';var result=false;var story_text='';textarea.get(0).innerHTML=htmlspecialchars(textarea.html());story_text=jQuery.trim(textarea.val());if(story_text!=''){result=true;}
else{error=error+'Please enter chapter text.\n';}
if(result==false){alert(error);return result;}}
if(!attachment_uploaded&&attachment&&attachment_initialized&&$('.uploadifive-queue-item',container).length>0){$(attachment).uploadifive('upload');return false;}
if(typeof(opts.action_url)==='undefined'){throw"Undefined opts.action_url";}
xmlhttpPost(opts.action_url,opts.target,function(){return true;},true,container.attr('id'));_gaq.push(['_trackEvent','Memorial_action','edit','lifestory_save']);return false;}
function cancel(){xmlhttpPost(opts.cancel_url,container.parent().attr('id'),null,true);_gaq.push(['_trackEvent','Memorial_action','edit','lifestory_cancel']);return false;}
init();return container;}})(jQuery);;(function($){jQuery.fn.lifeStoryListItem=function(args){var container=this;var opts={'target':'pg'};function init(){opts=jQuery.extend(opts,args);if(typeof(opts.lifestory_id)==='undefined'){throw"Undefined opts.lifestory_id";}
var edit_link=jQuery('a.edit',container);var delete_link=jQuery('a.delete',container);if(edit_link&&opts.lifestory_id){edit_link.click(function(){Memorial.check_login(true,edit);return false;});}
if(delete_link&&opts.lifestory_id){delete_link.click(function(){if(!confirm(opts.delete_confirm))return false;Memorial.check_login(true,remove);return false;});}}
function edit(){xmlhttpPost(opts.action_url+'/edit/'+opts.lifestory_id,container.attr('id'),null,true);return false;}
function remove(){xmlhttpPost(opts.action_url+'/delete/'+opts.lifestory_id,opts.target,function(){Memorial.moveToPageTop()},true);return false;}
init();return container;}})(jQuery);;(function($){jQuery.fn.LargeMediaView=function(args){var container=this;var selector=null;var opts={};function init(){opts=jQuery.extend(opts,args);var edit_caption_link=jQuery("#media_view_link_edit_caption",container);if(edit_caption_link){edit_caption_link.click(function(){Memorial.check_login(true,edit_caption);return false;});edit_caption_link.append(editImg);}}
function edit_caption(){xhrPost({url:opts.action_url+'/edit'},'media_information_container');}
init();return container;}})(jQuery);Memorial={loaded:false,locked:false,url:'',id:false,baseUrl:'',fullname:' ',loggedIn:false,check_login_process:false,dont_reload_page:false,pages:{'about':'about','lifestory':'lifestory','gallery_photo':'gallery/photos','gallery_audio':'gallery/songs','gallery_video':'gallery/videos','stories':'stories','settings':'settings'},routes:[[/aboutPage.php/i,'about'],[/lifeStory.php/i,'lifestory'],[/approveMemory.php/i,'stories'],[/(tplData.php|blank.php).*pc=(AlbumPage|ImagePage|ImageAdminPage).*type=photo/i,'gallery/photos'],[/(tplData.php|blank.php).*pc=(AlbumPage|ImagePage|ImageAdminPage).*type=audio/i,'gallery/songs'],[/(tplData.php|blank.php).*pc=(AlbumPage|ImagePage|ImageAdminPage).*type=video/i,'gallery/videos']],init:function(){setInterval(Memorial.keep_connection,10*60*1000);Memorial.check_login(false,false,false);},lock:function(){this.locked=true;this.upgrade({'from':'dialog_locked','can_close':0});},isLocked:function(){return this.locked;},valid_page:function(url){var reg=new RegExp(/#?[a-z]{1}[a-z0-9\/|@_]*/i);return reg.test(url);},load_more_candles:function(){var $moreBtn=jQuery('#loadMoreCandleBtn');$moreBtn.hide();jQuery('#loadCandlesWait').html(get_loader_html()).show();var offset=$moreBtn.data('offset');if(!offset){offset=0;}
offset+=50;$moreBtn.data('offset',offset);jQuery.ajax(Memorial.baseUrl+'about/load_more_candles/',{dataType:'JSON',type:"POST",data:{offset:offset,internal_ajax_call:1,old_ajax:1},success:function(response){var ud='undefined';if(typeof(response)==ud||typeof(response.success)==ud&&!response.success)
{throw"Receive more candles connection/server error";return;}
jQuery('#loadCandlesWait').html('');jQuery(response.content).appendTo('#loadCandles');if(typeof(response.is_last_page)!=='undefined'&&response.is_last_page)
{$moreBtn.hide();}
else
{$moreBtn.show();}}});},load_page:function(url,callback,data){url=url.replace(this.baseUrl,'');var i=url.indexOf('?utm');if(i&&i>0)
{url=url.substr(0,i);}
if(!url||!this.valid_page(url)){url='about';}
var scrollToCandle=false;if(url.match(/^candle([0-9]+)$/))
{scrollToCandle=url;url='about';}
else if(url.match(/^tribute([0-9]+)$/))
{scrollToCandle=url;url='about';}
else if(url.match(/^story_([0-9]+)$/))
{scrollToCandle=url;url='stories';}
else if(url.match(/^lifestory_([0-9]+)$/))
{scrollToCandle=url;url='lifestory';}
else if(url.match(/^settings\|songs$/))
{scrollToCandle='songs';url='settings';}
for(key in this.routes){var reg=new RegExp(this.routes[key][0]);if(reg.test(url)){url=this.routes[key][1];}}
var makeBreakLoading=0;if(url.indexOf('|')!=-1){var cut=url.substring(url.indexOf('|')+1);url=url.substring(0,url.indexOf('|'));console.log('Memorial.load_page',cut);var login_callback=Memorial.get_login_callback(cut);if(typeof(login_callback.break_current_loading)!='undefined'&&login_callback.break_current_loading)
{if(window.dont_reload_page)
{window.dont_reload_page=null;}
makeBreakLoading=1;}
if(login_callback&&login_callback.require_login)
{if(Memorial.loggedIn)
{login_callback.callback();}
else
{jQuery.post('/ajax/set_afterlogin_action/',{'internal_ajax_call':1,'action':cut});Memorial.check_login(true,login_callback.callback);}}
if(login_callback&&!login_callback.require_login){callback=login_callback.callback;}}
if(!url||!this.valid_page(url)){url='about';}
var urlName=url;if(url.indexOf(this.baseUrl)==-1){for(var k=0;k<tabs_history_length;k++){tabs_history[k]=tabs_history[k+1];}
tabs_history[tabs_history_length]=url;history_load_lock=true;if(typeof(jQuery.history)!='undefined'){if(!scrollToCandle)
{jQuery.history.load(url);}}
history_load_lock=false;url=this.baseUrl+url;}
if(makeBreakLoading)
{return;}
_ga_async_track_page(url);MemorialGalleryChecker.init();var _load_callback=function(){if(scrollToCandle)
{if(scrollToCandle=='songs')
{jQuery('#pg #audio_selector_form').scrollToBottom();}
else
{var candle=jQuery('#'+scrollToCandle)
jQuery.scrollTo(candle,1000,{offset:-120,onAfter:function(){candle.fadeOut('fast').fadeIn('slow');}});}}
Memorial.reload_addthis(urlName);if(typeof(callback)=='function'){try{callback();}
catch(e)
{try{Memorial.onLoginSuccess();}
catch(e)
{(typeof(console)!='undefined')&&console.log("Memorial.onLoginSuccess error -> ",e);throw"Memorial.onLoginSuccess error";}}}
init_tooltips();if(typeof(PlayersObserver)!='undefined'){PlayersObserver.cleanup();}};if(window.dont_reload_page)
{window.dont_reload_page=null;_load_callback();}
else
{xmlhttpPost(unescape(url),'pg',function(){_load_callback();loading=false;},true,false,data);}
if(Memorial.loggedIn){Memorial.check_login(false);}
return false;},reload_addthis:function(urlName){if(typeof(addthis)!='undefined')
{addthis.toolbox('.addthis_toolbox');var e='tribute';if(urlName=='lifestory'||urlName=='stories')
{e='story';}
else if(urlName=='gallery/photos')
{e='photo';}
else if(urlName=='gallery/songs')
{e='song';}
else if(urlName=='gallery/videos')
{e='video';}
if(window.addthis_share&&window.addthis_share.email_vars)
{window.addthis_share.email_vars.entity=e;}}},moveToPageTop:function(){jQuery.scrollTo('.header',1000);},moveToContentTop:function(){jQuery.scrollTo('#pg',1000);},reload_memorial_page:function(callback){if(tabs_history[tabs_history_length]&&typeof(xmlhttpPost)!="undefined"){var url=this.url;this.reload_title_photo();this.reload_header_menu();xmlhttpPost(Memorial.baseUrl+'ajax/block_admin/','owner_menu','',true);this.reload_top_menu();this.reload_block_sponsor();xmlhttpPost(Memorial.baseUrl+'ajax/block_invitation/','block_invitation','',true);xmlhttpPost(Memorial.baseUrl+'ajax/block_visits/','block-visits-container','',true);this.reload_block_subscription();this.reload_page_content(callback);}else{window.location.reload();}},reload_header_menu:function(callback){var header_menu_url=Memorial.baseUrl+'ajax/header_menu/';if(tabs_history[tabs_history_length]){header_menu_url=header_menu_url+'?tab='+encodeURIComponent(tabs_history[tabs_history_length]);}
xmlhttpPost(header_menu_url,'header_menu','',true);return false;},reload_page_content:function(callback){if(tabs_history[tabs_history_length]){this.load_page(tabs_history[tabs_history_length],callback);}
return false;},reload_top_menu:function(callback){xmlhttpPost(Memorial.baseUrl+'ajax/top_menu/','top_mnu',callback,true);return false;},reload_title_photo:function(callback){xmlhttpPost(Memorial.baseUrl+'ajax/title_photo/','foto_area_container',callback,true);return false;},reload_slideshow:function(callback){xmlhttpPost(Memorial.baseUrl+'ajax/small_slideshow/','SmallSlideShow',callback,true);if(typeof(hs)!='undefined'){hs.updateAnchors();}
return false;},reload_block_subscription:function(callback){xmlhttpPost(Memorial.baseUrl+'ajax/block_subscription/','rblok_subscription','',true);return false;},reload_block_sponsor:function(callback){xmlhttpPost(Memorial.baseUrl+'ajax/block_sponsored/','block_sponsored_container','',true);return false;},keep_connection:function(){jQuery.post('/ajax/keepalive/',{'internal_ajax_call':1});},check_login:function(force_login,callback,reload_blocks,callback_after_login,args){if(typeof(force_login)=='undefined'){var force_login=true;}
if(typeof(callback_after_login)=='undefined'){var callback_after_login=false;}
if(typeof(reload_blocks)=='undefined'){reload_blocks=true;}
args=args?args:{};Memorial.check_login_process=true;jQuery.post('/ajax/checklogin/',{'internal_ajax_call':1},function(response){var res=jQuery.evalJSON(response);if(!res.success)return false;var current_login_state=Memorial.loggedIn;Memorial.loggedIn=res.content.login;Memorial.check_login_process=false;if(!Memorial.loggedIn){if(reload_blocks&&(Memorial.loggedIn!=current_login_state)){Memorial.reload_memorial_page();}
if(force_login){Memorial.onLoginSuccess=callback;var _add=false;if(args){_add='&'+jQuery.param(args);}
Memorial.openUserLoginDialog(_add);}
return false;}
if(typeof(callback)=='function'&&!callback_after_login){Memorial.onLoginSuccess=callback;Memorial.onAfterLogin('success');}});return Memorial.loggedIn;},get_login_callback:function(cut){var login_callback=false;console.log('get_login_callback',cut);if(typeof(cut)=='undefined'||!cut)return false;var action={};action.require_login=true;_gaq.push(['_trackEvent','Memorial_login_callback','cut',cut]);var page;var parts=cut.split('|');switch(parts[0]){case'invite':login_callback=function(){invite(Memorial.url);};break;case'subscribe':login_callback=function(){subscribe(Memorial.url);};if(parts[1]&&chk_eml_rgxp.test(parts[1])){action.require_login=false;login_callback=function(){subscribe(Memorial.url,parts[1]);};}
break;case'add_candle':login_callback=function(){Memorial.load_page('about',function(){jQuery('#pg #candle_add_form_anchor').scrollToBottom()});};action.break_current_loading=1;break;case'add_photo':if(!page){page='gallery/photos';}
case'add_audio':if(!page){page='gallery/songs';}
case'add_video':if(!page){page='gallery/videos';}
login_callback=function(){Memorial.load_page(page,function(){jQuery('#pg #mediaform_anchor').scrollToBottom()});};action.break_current_loading=1;break;case'add_story':page='stories';if(parts[1]&&/^gallery_(photos|songs|videos)_[0-9]+/.test(parts[1])){page=parts[1].replace(/_/g,'/');}
login_callback=function(){Memorial.load_page(page,function(){if(typeof(init_new_story_form)=='function'){init_new_story_form();}jQuery('#pg #add_story_form_anchor').scrollToBottom({staticHeight:500});return false;});};action.break_current_loading=1;break;case'add_lifestory':login_callback=function(){Memorial.load_page('lifestory',function(){jQuery('#pg #add_story_form_anchor').scrollToBottom();return false;});};action.break_current_loading=1;break;case'upgrade':login_callback=Memorial.upgrade;break;case'upgradenotification':login_callback=function(){showPopupForm_center('MemorialDialogUpgradeNotificationController&url='+Memorial.url,false,false,'832px');};action.break_current_loading=1;break;case'signin':login_callback=function(){Memorial.openUserLoginDialog();};action.require_login=false;break;case'edit_personal_text':login_callback=function(){Memorial.load_page('about',Memorial.edit_personal_text_process);};action.break_current_loading=1;break;case'share_tribute':case'share_audio':case'share_video':case'share_photo':case'share_lifestory':case'share_story':case'share_memorial':login_callback=function(){var url='ShareByEmailForm';url+='&share_type='+parts[1];url+='&share_id='+parts[2];url+='&lst_id='+Memorial.id;showPopupForm_center(url,null,null,'832px','sharebyemail_form');};break;}
if(login_callback){action.callback=login_callback;return action;}
return false;},edit_personal_info:function(){this.check_login(true,Memorial.edit_personal_info_process);return false;},edit_personal_info_process:function(){if(Memorial.loggedIn){xmlhttpPost(Memorial.baseUrl+'about/edit_info/','person_info_container',false,true);}},update_personal_info:function(data){if(!data)return;jQuery(".person_info").fadeOut('fast',function(){jQuery(".person_info > .person_title").html(data.title);jQuery(".person_info > .person_years").html(data.years);var info={'orig_font_size':'48px','string':data.title,'width_to_fit':jQuery(".menu_title_area").width(),'internal_ajax_call':1};jQuery.post('/ajax/calculatetextmetrics',info,function(response){var res=jQuery.evalJSON(response);if(res.success){if(res.content.font_size){jQuery(".person_info > .person_title").css({'font-size':res.content.font_size});}
if(res.content.font_size_coefficient){jQuery(".person_info > .person_years").css({'font-size':Math.floor(28*res.content.font_size_coefficient)+'px'});}}
jQuery(".person_info").fadeIn('fast');});});if(data.gender_changed){Memorial.reload_header_menu(function(){updateGlobalNav(document.getElementById('main_page_link'));});}},openUserLoginDialog:function(addUrl,afterlogin_action){if(!addUrl||addUrl==this.url){var addUrl='';}
var callback=this.get_login_callback(afterlogin_action);if(callback&&(typeof(callback.callback)=='function')){Memorial.onLoginSuccess=callback.callback;jQuery.post('/ajax/set_afterlogin_action/',{'internal_ajax_call':1,'action':afterlogin_action});}else if(afterlogin_action===false){Memorial.resetAfterLogin();addUrl=addUrl+'&from=signin';}
showPopupForm_center('UserLoginDialog&url='+this.url+addUrl,'FormsPopup','150px 0px 0px -200px','704px');return false;},resetAfterLogin:function(){Memorial.onLoginSuccess=false;jQuery.post('/ajax/reset_afterlogin_action/',{'internal_ajax_call':1});},onAfterLogin:function(result){if(result&&result=='success'){if(typeof(Memorial.onLoginSuccess)=='function'){Memorial.onLoginSuccess();Memorial.onLoginSuccess=false;}}
jQuery.post('/ajax/reset_afterlogin_action/',{'internal_ajax_call':1});},edit_personal_text:function(){this.check_login(true,Memorial.edit_personal_text_process);return false;},edit_personal_text_process:function(){if(Memorial.loggedIn){xmlhttpPost(Memorial.baseUrl+'about/edit_text/','about_txt',false,true);}},upgrade:function(args){var opts={'skip_intro':0,'from':'direct','reason':'sponsor_upgrade','url':Memorial.url}
opts=jQuery.extend(opts,args);var force_login=(opts.from!='dialog_locked');var callback=null;if(opts.from=='dialog_locked'){var str='MemorialDialogUpgradeLockedController&'+jQuery.param(opts);callback=function(){showPopupForm_center(str,'FormsPopup','100px 0px 0px -416px','832px');};}else if(opts.from=='add_storymedia'){window.open(Memorial.baseUrl+'upgrade/?section=gallery');}else{callback=function(){Memorial.load_page('upgrade',function(){Memorial.moveToPageTop();},opts);}}
if(force_login){Memorial.check_login(true,callback);}else{callback();}
return false;},visitorsTab:function(){Memorial.load_page('contactmanager',function(){});updateGlobalNav(this);return false;}};var MemorialBackgroundPlayer={player:null,opts:{autostart:false,playlist:[]},playlist:[],current_song_index:0,global_id:'audio-bg',init:function(args){this.opts=jQuery.extend(this.opts,args);this.playlist=this.opts.playlist?this.opts.playlist:[];if(this.playlist.length>0&&typeof(Modernizr)!='undefined'){if(Modernizr.audio&&Modernizr.audio.mp3||isFlashAvailable()){if(typeof(MediaElement)!='undefined'){this.current_song_index=0;MediaElementPlayer('#audio-bg',{enableKeyboard:false,pauseOtherPlayers:false,success:function(mediaelement,domobject){mediaelement.global_id=MemorialBackgroundPlayer.global_id;mediaelement.setVolume(1);if(typeof(PlayersObserver)!='undefined'){PlayersObserver.register_player(mediaelement);}
if(MemorialBackgroundPlayer.autostart()){mediaelement.play();}else{}
MemorialBackgroundPlayer.player=mediaelement;},error:function(){}});}}else{if(typeof(displayFlashNotification)!='undefined')displayFlashNotification({type:'audio'});}}},autostart:function(){return this.opts.autostart;},pause:function(){if(MemorialBackgroundPlayer.player){MemorialBackgroundPlayer.player.pause();}},play:function(){if(MemorialBackgroundPlayer.player){MemorialBackgroundPlayer.player.pause();}},setSrc:function(url){MemorialBackgroundPlayer.player.setSrc(url);},updatePlayerIcon:function(){if(!this.player){Log.write('no player');return;}
var icon_class='tsound';if(this.player.paused||this.player.ended){icon_class='notsound';}
jQuery("#top_snd_btn").attr("class",icon_class);},toggleState:function(){if(this.player){try{createCookie('mpl_left_columnt',(this.player.paused)?'PLAYING':'IDLE');if(this.player.paused){this.player.play();}else{this.player.pause();}}catch(e){Log.write(e);}
this.updatePlayerIcon();}
return false;},resumePlayback:function(){var player_cookie=readCookie('mpl_left_columnt');if(this.player&&this.player.paused&&(!player_cookie||player_cookie=='PLAYING')){this.player.omitRecurringEvents=true;this.player.play();}},stateListener:function(event){var object=this;if(typeof(event.target)!='undefined'){object=event.target;}
switch(event.type){case'ended':MemorialBackgroundPlayer.next();}
MemorialBackgroundPlayer.updatePlayerIcon();},next:function(){var c=MemorialBackgroundPlayer.current_song_index;if(!MemorialBackgroundPlayer.playlist[c+1]){c=0;}else{c+=1;}
MemorialBackgroundPlayer.current_song_index=c;var src=MemorialBackgroundPlayer.playlist[c];try{MemorialBackgroundPlayer.player.pause();MemorialBackgroundPlayer.player.setSrc(src);MemorialBackgroundPlayer.player.play();}catch(e){Log.write(e);}}};var MemorialGalleryChecker={medias:new Array(),change_action:function(){Memorial.reload_page_content();},init:function(){this.medias=[];},add_media:function(media){if(!media.id||!media.status){return false;}
var doAdd=true;var medias=MemorialGalleryChecker.medias;if(typeof(medias)!='undefined'&&typeof(medias.length)!='undefined'&&medias.length>0)
{jQuery.each(function(k,v){if(v.id==media.id)
{doAdd=false;return false;}});}
if(doAdd)
{medias.push(media);}
setTimeout(MemorialGalleryChecker.start,1500);return true;},delete_media_by_id:function(id){if(!id){return;}
for(i in MemorialGalleryChecker.medias){if(MemorialGalleryChecker.medias[i].id==id){MemorialGalleryChecker.medias.splice(i,1);}}
return true;},start:function(){MemorialGalleryChecker.check_status();},check_status:function(){if(MemorialGalleryChecker.medias.length==0){return;}
jQuery.ajax({type:'post',url:'/ajax/check_media_status/',data:{'internal_ajax_call':1,media:MemorialGalleryChecker.medias},success:MemorialGalleryChecker.check_status_callback});},check_status_callback:function(response){var res=jQuery.evalJSON(response);if(!res.success)
{return false;}
var reload=false;for(i in res.content){var item=res.content[i];if(item.reload){reload=true;}
if(item.remove){MemorialGalleryChecker.delete_media_by_id(item.id);}}
if(reload){MemorialGalleryChecker.change_action();}
window.setTimeout(MemorialGalleryChecker.check_status,10000);}};;(function($){jQuery.fn.SmallSlideShow=function(args){var container=this;var urls=args.urls;var slides=new Array();var slides_count=urls.length;var current_slide=0;var change_interval=5000;function init(){if(slides_count==0)return;preload_slide(1);show_slide();if(slides_count>1){setTimeout(change_slide,change_interval);}}
function show_slide(){jQuery(container).css('background-image','url('+urls[current_slide]+')');jQuery("#shb1").attr("idx",current_slide);}
function preload_slide(pos){if(typeof(pos)=='undefined'){pos=current_slide+1;}
if(typeof(urls[pos])!='undefined'&&typeof(slides[pos])=='undefined'){a=new Image();a.src=urls[pos];slides[pos]=1;}}
function change_slide(){jQuery(container).fadeOut(700,function(){current_slide++;if(current_slide>=slides_count){current_slide=0;}
show_slide();jQuery(container).fadeIn(700,function(){preload_slide();setTimeout(change_slide,change_interval);});});}
init();return container;}})(jQuery);GalSortable={ctor:function(){jQuery(document).ready(function(){GalSortable.body=jQuery('body');GalSortable.mt='13px';})}(),current_uri:'',confirm_message_delete:'WARNING: You are about to delete this image. Are you sure?',srtb:{},photobl:{},imgarea:{},urlp1:'&internal_ajax_call=1&frm_event=update&rtvm=false&',initadm:function(){GalSortable.srtStat=false;GalSortable.srtb.sortable({update:function(e,ui){jQuery.ajax({url:GalSortable.sUrl,data:{frm_event:'make_move',prev:ui.item.prev()?ui.item.prev().attr('id'):null,current:ui.item.attr('id'),next:ui.item.next()?ui.item.next().attr('id'):null},type:'POST',timeout:100000,error:function(){GalSortable.srtStat=false},success:function(){GalSortable.srtStat=false;GalSortable.photobl.each(function(){jQuery(this).find('img.fullScreen').attr("idx",GalSortable.srtb.children('li').index(this))});GalSortable.init_z_indexes();}})},start:function(){GalSortable.srtStat=true;}}).disableSelection();GalSortable.photobl.each(function(){var phb=jQuery(this);var img=phb.find('img.dragNDrop');phb.find('.image_area').hover(function(){img.fadeIn(50);},function(){img.fadeOut(50);});});},init_z_indexes:function(){if(jQuery.browser.msie&&jQuery.browser.version=='7.0'){GalSortable.photobl.each(function(){var ind=GalSortable.srtb.children('li').index(this);jQuery(this).find(".image_area").css('z-index',GalSortable.photobl.size()-ind);});}},init:function(){var icons=['tellastory','editcap','remCP','deleteP','downloadOI','downloadOIs'];for(i in icons){var im=new Image;im.src='/lib/images/'+icons[i]+'.png';}
GalSortable.photobl.each(function(){var phb=jQuery(this);var cap=phb.find('.capup');cap.hover(function(){jQuery(this).find('a').append(editImgSmall);},function(){jQuery('img',this).remove();});var imgEditLi=phb.find('ul.imgEdit li');phb.find('.capupcnt, .capedtcnt').hover(function(){cap.show()},function(){cap.hide()});var topmenu=phb.find('.action-bar');phb.find('.image_area').hover(function(){topmenu.show();},function(){GalSortable.closeDropDownClickMenu(imgEditLi);topmenu.hide();});});GalSortable.init_z_indexes();GalSortable.srtb.find("ul.imgEdit").dropDownMenu({method:'appear'});},closeActionBarOther:function(event){GalSortable.imgarea.each(function(){if(event.target.getAttribute('phbid')==this.getAttribute('phbid')||event.target.className.search('my_account')!=-1||event.target.parentNode.className.search('my_account')!=-1){return}
var el=jQuery(this);var dragNDrop=el.find('.dragNDrop');var topmenu=el.find('.action-bar');var imgEditLi=el.find('.imgEdit li');GalSortable.closeDropDownClickMenu(imgEditLi);topmenu.hide();dragNDrop.fadeOut();return;})},closeDropDownClickMenu:function(el,callback){var ul=el.find('.submenu');ul.slideUp(250,function(){el.removeClass("hover");if(callback)callback()});setTimeout(function(){ul.hide()},150);return ul},removePhBlock:function(id,redirect){if(!confirm(this.confirm_message_delete)){return}
jQuery.ajax({url:GalSortable.sUrl,data:GalSortable.urlp1+'frm_remove['+id+']=1&frm_ids[]='+id,type:'POST',timeout:90000,success:function(res){if(typeof(redirect)!='undefined')
{window.location=redirect;}
else
{if(res.match(/Memorial.reload_title_photo/))
{Memorial.reload_title_photo();}
else if(res.match(/Memorial.reload_top_menu/))
{Memorial.reload_top_menu();}
Memorial.reload_slideshow();Memorial.reload_page_content();}}});},stcph:'Set cover photo',setCoverPhoto:function(id){jQuery.ajax({url:'/lib/sw/blank.php?pc=ImageAdminPage&url='+Memorial.url,data:'&internal_ajax_call=1&frm_event=toggle_main&id='+id,type:'POST',timeout:90000,success:function(){Memorial.reload_title_photo(function(){jQuery.scrollTo('#foto_area_container',1000,{offset:{top:-100}})});var ael=jQuery('#imgEdit'+id).find('a[main]');var setMain=false;if(ael.attr('main')==0){setMain=true;}
if(typeof GalSortable.srtb.find=="function")
{GalSortable.srtb.find('a[main=1]').attr('main',0).text(GalSortable.stcph);ael.attr('main',0).text(GalSortable.stcph);if(setMain==true){ael.attr('main',1).text('Remove cover photo');}}}});},navigGal:function(uri){if(typeof(GalSortable.srtStat)=="undefined"||!GalSortable.srtStat){Memorial.load_page(uri,function(){Memorial.moveToPageTop()});}},rotateVideo:function(id,angle){if(angle!=90&&angle!=270&&angle!=180)
{throw'Wrong rotation angle provided.';return false;}
var $el=jQuery('.rotate-video-left, .rotate-video-right');if($el.hasClass('disabled'))
{return false;}
$el.addClass('disabled');var _data=GalSortable.urlp1.replace('frm_event=update','frm_event=rotate_video');jQuery.ajax({url:GalSortable.sUrl,data:_data+'id='+id+'&angle='+angle,type:'POST',dataType:'json',timeout:90000,success:function(res){if(typeof(res)!='undefined'&&typeof(res.id)!='undefined'&&typeof(res.status)!='undefined'&&typeof(MemorialGalleryChecker)!='undefined'){Memorial.reload_page_content();}}});return false;},rotatePhoto:function(id,angle){if(angle!=90&&angle!=270&&angle!=180)
{throw'Wrong rotation angle provided.';return false;}
var $el=jQuery('.rotate-photo-left, .rotate-photo-right');if($el.hasClass('disabled'))
{return false;}
$el.addClass('disabled');var _data=GalSortable.urlp1.replace('frm_event=update','frm_event=rotate_photo');jQuery.ajax({url:GalSortable.sUrl,data:_data+'id='+id+'&angle='+angle,type:'POST',dataType:'json',timeout:90000,success:function(res){if(typeof(res)!='undefined'&&typeof(res.id)!='undefined'&&typeof(res.status)!='undefined'){Memorial.reload_page_content();Memorial.reload_slideshow();if(typeof(res.main_photo)!='undefined')
{Memorial.reload_title_photo();}}}});return false;},downloadOriginal:function(id){if(Memorial.check_login(false,null,false)){window.location=GalSortable.sUrl+GalSortable.urlp1+'downloadOriginal='+id}else{openUserLoginDialog();}
return false;}};SlideShowBig={init:function(opts){if(typeof(opts)=='undefined'){opts={};}
if(hs.fminitialized){hs.updateAnchors();return;}
hs.fminitialized=true;hs.graphicsDir='/lib/css/graphics/';hs.showCredits=false;hs.align='center';hs.autoplay=false;hs.transitions=['expand','crossfade'];hs.fadeInOut=true;hs.dimmingOpacity=0.8;hs.outlineType='rounded-white';hs.captionEval='this.thumb.alt';hs.marginBottom=105;hs.numberPosition='caption';hs.restoreCursor=null;var slideshowOptions={interval:4000,repeat:true,useControls:true,overlayOptions:{className:'text-controls',position:'bottom center',relativeTo:'viewport',offsetY:-60},thumbstrip:{position:'bottom center',mode:'horizontal',relativeTo:'viewport'}};if(opts.mobile){hs.showCredits=0;hs.padToMinWidth=true;hs.wrapperClassName='highslide-white highslide-mobile';hs.marginBottom=30;slideshowOptions.thumbstrip=null;slideshowOptions.fixedControls=false;slideshowOptions.overlayOptions={hideOnMouseOut:false,position:'top',relativeTo:'expander',width:'100%',offsetY:0};hs.onKeyDown=function(sender,e){if(e.keyCode==4){return hs.getExpander().close();}
return true;}}
hs.Expander.prototype.onImageClick=function(sender){return hs.next();}
hs.addSlideshow(slideshowOptions);},shb1Open:function(el){el=jQuery(el);if(el.attr('idx')==''){return false;}
jQuery("#shbcnt a").eq(el.attr("idx")).click();return false;},shb2Open:function(){jQuery("#shbcnt a").eq(0).click()
return false;},shb3Open:function(elem){jQuery("#shbthumb"+jQuery(elem).attr("idx")).click();return false;}};var PlayersObserver={players:{},register_player:function(player){if(typeof(player)=='undefined')return;try{var global_id=player.global_id;PlayersObserver.players[global_id]=player;player.addEventListener('play',PlayersObserver.state_observer,false);player.addEventListener('pause',PlayersObserver.state_observer,false);player.addEventListener('ended',PlayersObserver.state_observer,false);player.omitRecurringEvents=false;player.prevEventType='';}catch(e){alert('PlayersObserver.register_player error: '+e);}},state_observer:function(event){var object=this;if(typeof(event.target)!='undefined'){object=event.target;}
if(object.global_id==MemorialBackgroundPlayer.global_id){MemorialBackgroundPlayer.stateListener(event);}
if(event.type==object.prevEventType){return true;}
object.prevEventType=event.type;if((typeof(object.omitRecurringEvents)!='undefined')&&(object.omitRecurringEvents==true)){object.omitRecurringEvents=false;return true;}
switch(event.type){case'pause':if((typeof(MemorialBackgroundPlayer)!='undefined')&&(object.global_id!=MemorialBackgroundPlayer.global_id)){MemorialBackgroundPlayer.resumePlayback();}
break;case'ended':if((typeof(MemorialBackgroundPlayer)!='undefined')&&(object.global_id!=MemorialBackgroundPlayer.global_id)){MemorialBackgroundPlayer.resumePlayback();}
break;case'play':for(i in PlayersObserver.players){var _player=PlayersObserver.players[i];if(_player.global_id&&document.getElementById(_player.global_id)&&(object.global_id!=_player.global_id)&&!_player.paused){_player.omitRecurringEvents=true;_player.pause();}}
break;default:}},cleanup:function(){for(i in PlayersObserver.players){var _player=PlayersObserver.players[i];if(_player.global_id&&!document.getElementById(_player.global_id)&&_player.var_name&&typeof(window[""+_player.var_name])!='undefined'){window[""+_player.var_name]=null;delete PlayersObserver.players[i];}}}};;(function($){$.fn.MemorialGalleryUploadForm=function(args){var container=this;var opts={};var uploader=null;var btn_upload=null;var uploadResponse='';var uploaderOptions={'buttonClass':'upload-browse','queueID':'fileQueue','auto':false,'buttonText':'','width':'358','height':'22','removeCompleted':true,'fileObjName':'frm_img_nme_fileUpload','uploadScript':'http://upload.'+getBaseDomain()+'/lib/js/uploadifive/uploadifive.php',onInit:function(){},onAddQueueItem:function(file){},onUploadComplete:function(file,data){return true;},onSelect:function(queue){},onQueueComplete:function(uploads){if(typeof(Memorial)!='undefined'){if(opts.reload_slideshow_after_upload){if(typeof(Memorial)!='undefined'){Memorial.reload_slideshow();}}
Memorial.reload_title_photo(function(){Memorial.reload_page_content(function(){Memorial.moveToPageTop()});});}
_gaq.push(['_trackEvent','Memorial_uploader','event','all_complete']);}};function init(){opts=$.extend(opts,args);uploader=$('#uploadify',container);btn_upload=$('#btn_upload');btn_upload.bind('click',function(){Memorial.check_login(true,startUpload,false,false,{from:'contribution'});});init_uploader();};function init_uploader(){uploader.uploadifive($.extend(uploaderOptions,{queueSizeLimit:opts.queue_limit,multi:opts.multi,fileType:opts.fileType,fileSizeLimit:opts.max_file_size,formData:{folder:opts.folder,}}));};function startUpload(){if($('.uploadifive-queue-item',container).length==0){alert('Please select one or more files to upload.');return false;}
uploader.uploadifive('upload');return true;}
init();return container;}
$.fn.MemorialGallerySnapshotSelector=function(args)
{var container=this;var id_field=null;var more_link=null;var snapshots_container=null;var opts={};function init(){opts=$.extend(opts,args);id_field=$('#snapshot_id',container);snapshots_container=$('#media-snapshots-container',container);more_link=$('a#link-produce-snapshots',container);if(more_link){more_link.bind('click',produce_snapshots);}
init_snapshots();}
function set_snapshot_active(pos)
{id_field.val(pos);}
function produce_snapshots(){more_link.hide();snapshots_container.html(get_loader_html());$.post(opts.produce_snapshots_url,{row_length:opts.row_length},function(response){var res=$.evalJSON(response);if(res.success){reload_snapshots();}else{alert(res.error_message);}
if(!res.can_produce){more_link.hide();}else{more_link.show();}});}
function reload_snapshots(){xhrPost({url:opts.get_snapshots_url},snapshots_container.attr('id'),null,init_snapshots);}
function init_snapshots(){$('img',snapshots_container).unbind('click').bind('click',function(){var id=$(this).attr('rel');$(this).addClass('active');$('img:not(#media-snapshot-'+id+')',snapshots_container).removeClass('active');set_snapshot_active($(this).attr('rel'));});if($('img',snapshots_container).length==0){produce_snapshots();}}
init();return container;}})(jQuery);function Invitee(){};Invitee.prototype={fnme:'',lnme:'',email:'',permissions:'',getData:function(){var result={};var key;for(key in this){if(this.hasOwnProperty(key)){result[key]=this[key];}}
return result;},reset:function(){var key;for(key in this){if(this.hasOwnProperty(key)){this[key]='';}}}};(function($){$.fn.MemorialInviteesTable=function(args){var container=this;var opts={};var editing_id=null;var cancelling_id=null;function init(){opts=$.extend(opts,args);init_table();init_new_invitee();}
function init_table()
{container.jqGrid({url:opts.url,datatype:'json',colNames:opts.colNames,rowNum:10000,loadonce:true,viewrecords:true,altRows:true,cellLayout:9,width:656,height:260,shrinkToFit:true,sortname:'id',sortorder:'desc',colModel:[{name:'id',hidden:true,sortable:false,search:false,fixed:true,width:'0px',classes:'idfield'},{name:'fnme',index:'fnme',sortable:true,editable:true,search:true,resizable:false,width:150},{name:'lnme',index:'lnme',sortable:true,editable:true,search:true,resizable:false,width:150},{name:'email',index:'email',sortable:true,editable:true,search:true,resizable:false,width:150},{name:'act',index:'act',classes:'jqgrid-actions',width:124,sortable:false,resizable:false}],jsonReader:{repeatitems:false},gridComplete:function(){var ids=container.jqGrid('getDataIDs');for(var i=0;i<ids.length;i++){var cl=ids[i];var edit='<a class="action edit" style="display:none;"><span class="ui-icon ui-icon-pencil"></span>Edit</a>';var remove='<a class="action delete" style="display:none;"><span class="ui-icon ui-icon-trash"></span>Delete</a>';var save='<a class="action save" style="display:none;"><span class="ui-icon ui-icon-disk"></span>Save</a>';var cancel='<a class="action cancel" style="display:none;"><span class="ui-icon ui-icon-cancel"></span>Cancel</a>';container.jqGrid('setRowData',ids[i],{act:edit+save+cancel+remove});$('tr#'+cl+' a.action.edit',container).click(edit_row);$('tr#'+cl+' a.action.delete',container).click(delete_row);$('tr#'+cl+' a.action.save',container).click(save_row);$('tr#'+cl+' a.action.cancel',container).click(cancel_row);fit_container($('tr#'+cl+' td:nth-child(2)',container));fit_container($('tr#'+cl+' td:nth-child(3)',container));fit_container($('tr#'+cl+' td:nth-child(4)',container));}
$('tr',container).unbind('click').unbind('hover').hover(function(){var _id=$(this).attr('id');var _row=$('tr#'+_id,container);if(editing_id!=_id){$(this).css({cursor:'pointer'});$('a.action.edit',_row).show();$('a.action.delete',_row).show();}},function(){var _id=$(this).attr('id');var _row=$('tr#'+_id,container);if(editing_id!=_id){$('a.action',_row).hide();}}).click(function(){var _id=$(this).attr('id');if(cancelling_id===null){if((editing_id===null)){_edit_row_process(_id);}else if((editing_id!==null)&&(editing_id!=_id)){_save_row_process(editing_id);}}else{cancelling_id=null;}});$('tr.jqgfirstrow td:nth-child(1)',container).css({padding:0});}});}
function edit_row(){var _id=$(this).parents('tr').attr('id');var ids=container.jqGrid('getDataIDs');for(var i=0;i<ids.length;i++){if(ids[i]==_id){continue;}
_restore_row(ids[i]);}
_edit_row_process(_id);}
function _edit_row_process(_id){$('tr#'+_id+' a.action.edit',container).hide();$('tr#'+_id+' a.action.delete',container).hide();$('tr#'+_id+' a.action.save',container).show();$('tr#'+_id+' a.action.cancel',container).show();container.jqGrid('editRow',_id,{keys:false,url:opts.update_url});$('tr input',container).keypress(function(e){var _id=$(this).parents("tr").attr("id");if(e.keyCode==13){_save_row_process(_id);return false;}
return true;});editing_id=_id;}
function delete_row(){var _id=$(this).parents("tr").attr("id");container.setSelection(_id,false);if(confirm(opts.message_delete_invitee_confirm)){var data={oper:'del',id:_id};$.post(opts.delete_url,data,function(data,textStatus,XMLHttpRequest){container.jqGrid('delRowData',_id);container.trigger("reloadGrid");});}else{container.resetSelection();}
cancelling_id=_id;}
function save_row(){var _id=$(this).closest('tr').attr('id');_save_row_process(_id);}
function _save_row_process(_id){container.jqGrid('saveRow',_id,{url:opts.update_url,successfunc:function(res){var text=res.responseText;var r=$.evalJSON(text);if(!r.success){alert(r.error_message);return false;}
_restore_row(_id);return true;},afterrestorefunc:_restore_row_actions});}
function cancel_row(){var _id=$(this).closest('tr').attr('id');_restore_row(_id);}
function _restore_row(_id){container.jqGrid('restoreRow',_id,{});_restore_row_actions(_id);cancelling_id=_id;}
function _restore_row_actions(_id){$('tr#'+_id+' a.action.cancel',container).hide();$('tr#'+_id+' a.action.save',container).hide();editing_id=null;}
function init_new_invitee(){var _submitter=function(e){if(e.keyCode==13){return addInvitee();}
return true;};var _blocker=function(e){return(e.keyCode!=13);}
$("button",opts.new_invitee_container).click(addInvitee);$("#invitee-fnme",opts.new_invitee_container).TextFieldUpdater({emptyText:'First Name'}).keypress(_blocker);$("#invitee-lnme",opts.new_invitee_container).TextFieldUpdater({emptyText:'Last Name'}).keypress(_blocker);$("#invitee-email",opts.new_invitee_container).TextFieldUpdater({emptyText:'Email Address (Required)'}).keypress(_submitter);}
function addInvitee(){var new_invitee=opts.new_invitee_container;if(!new_invitee){return false;}
var fnme=$.trim($("#invitee-fnme",new_invitee).trigger('focus').val());var lnme=$.trim($("#invitee-lnme",new_invitee).trigger('focus').val());var email=$.trim($("#invitee-email",new_invitee).trigger('focus').val());var info={'fnme':fnme,'lnme':lnme,'email':email};$.post(opts.add_url,{invitee:info},function(res){var response=$.evalJSON(res);if(response.success){if(response.content.exists){var _mess=opts.message_new_invitee_exists.replace(':name',(fnme+' '+lnme)).replace(':email',email);if(!confirm(_mess)){var data={oper:'del',id:response.content.new_id};$.post(opts.delete_url,data);return true;}}
container.addRowData(response.content.new_id,info,'first');$('input[type="text"]',new_invitee).val('');$('input[type="text"]',new_invitee).trigger('blur');return true;}else{if(response.error_message.length>0){alert(response.error_message);}}});return false;}
init();return container;}
$.fn.ContactsImporter=function(args){var container=this;var opts={};var callbackUrl='/lib/sw/blank.php?pc=MemorialDialogInviteController&internal_ajax_call=1&frm_event=cloudsponge_after_submit';var afterSubmitContacts=function(contacts)
{showPopupForm_showLoader();var list=[];$.each(contacts,function(k,v){if(v.email.length<1)
{showPopupForm_hideLoader();return;}
var primaryEmail=v.email[0].address;$.each(v.email,function(kk,vv){if(vv.selected)
{primaryEmail=vv.address;}});list.push({first_name:v.first_name,last_name:v.last_name,email:primaryEmail});});$.post(callbackUrl+'&url='+opts.lst,{contacts:list},function(res){if(typeof(res.result)!='undefined'&&res.result=='ok')
{if(typeof(opts.afterImport)=='function')
{opts.afterImport(list,contacts,res);}}
else
{alert('Network error. Please, try again');}
showPopupForm_hideLoader();},'json').fail(function(){alert('Network error. Please, try again');showPopupForm_hideLoader();});};var init=function()
{opts=$.extend(opts,args);if(typeof(opts.lst)=='undefined')
{throw'opts.lst undefined';return false;}
var win=(typeof(parent.window)=='undefined')?window:parent.window;if(typeof(win.cloudsponge)=='undefined')
{jQuery.getScript('https://api.cloudsponge.com/address_books.js')
win.csPageOptions={domain_key:opts.domainKey,afterSubmitContacts:afterSubmitContacts};window.cloudsponge=win.cloudsponge;}};init();return container;}})(jQuery);function subscribe(url,email){url='SubscriptionForm&url='+url;if(email){url=url+'&email='+email;}
showPopupForm_center(url,null,null,'421px','subscription_frm');_gaq.push(['_trackEvent','Memorial_action','click','subscribe']);return false;}
function invite(url){Memorial.check_login(true,function(){showPopupForm_center('MemorialDialogInviteController&url='+url,null,null,'832px');});_gaq.push(['_trackEvent','Memorial_action','click','invite']);return false;};(function($){$(function(){return;var showTime=25000,messageText='You can Sign In here',$toolTipElement=$('a#ToolTip_SignIn');if(!readCookie('toolTipCloser')){setTimeout(function(){setTimeout(function(){$.getScript("/lib/js/tooltip/js/jquery.tipsy.js",function(){if($toolTipElement.length>0&&Memorial.loggedIn==false){$toolTipElement.attr('rel','tipsy').attr('title',messageText).tipsy({html:true,opacity:"1"}).tipsy("show");$('.tipsy-inner').append(' <div class="toolTipHtmlCloser">'+' <input type="checkbox" id="tooltipCloserCheckBox" /> Don\'t show again<br/>'+' <a href="#" id="toolTipCloserBtn">Close</a> '+'</div>');$('#tooltipCloserCheckBox').click(function(){createCookie('toolTipCloser',1,23);});$('#toolTipCloserBtn').click(function(){$toolTipElement.removeAttr('rel').removeAttr('title').removeAttr('original-title').tipsy("hide");});setTimeout(function(){$toolTipElement.removeAttr('rel').removeAttr('title').removeAttr('original-title');},5);}});},5);},showTime);}});})(jQuery);;;(function($){$.fn.ContactManager=function(args){var container=this;var opts={};var edit_in_progress=false;var editing_id=null;var cancelling_id=null;var email_errors=[];var we=null;function init(){opts=$.extend(opts,args);if($('#CMwidthEstimator').length==0){var wiTemp=$('<div id="CMwidthEstimator"></div>').css({visibility:'hidden',position:'absolute',height:'auto',width:'auto'});$('body').append(wiTemp);}
we=$('#CMwidthEstimator');init_table();init_filter();if(typeof(ContactManager)!='undefined'){ContactManager.container=container;ContactManager.opts=$.extend(ContactManager.opts,args);}}
function init_filter(){if(!opts.filter_container){return;}
$("input",opts.filter_container).change(function(){$("input#ContactmanagerController_frm_event").val("updatefilter");$("input#ContactmanagerController_submitter").trigger('click');});}
function init_table(){container.jqGrid({url:opts.url,datatype:'json',colNames:opts.colNames,rowNum:(opts.rowNum)?opts.rowNum:-1,loadonce:true,altRows:true,viewrecords:true,cellLayout:9,width:(opts.width)?opts.width:625,height:(opts.height)?opts.height:'100%',shrinkToFit:true,multiselect:true,multiselectWidth:(($.browser.webkit||$.browser.safari)?22:22),sortname:'last_visit',sortorder:'desc',colModel:[{name:'id',hidden:true,sortable:false,search:false,fixed:true,width:'0px',classes:'idfield'},{name:'name',index:'name',sortable:true,editable:false,search:true,resizable:false,fixed:true,width:182},{name:'email',index:'email',sortable:true,editable:false,search:true,resizable:false,fixed:true,width:150},{name:'last_visit',index:'last_visit',sortable:true,editable:false,search:true,resizable:false,sorttype:'date',formatter:'date',formatoptions:{srcformat:'Y-m-d',newformat:'m/d/Y'},datefmt:'mm/dd/yyyy',fixed:true,width:70},{name:'permissions',index:'permissions',sortable:true,editable:true,search:true,fixed:true,resizable:false,edittype:"select",formatter:'select',editoptions:{value:opts.roles},width:95},{name:'act',index:'act',classes:'jqgrid-actions',sortable:false,resizable:false,search:false,fixed:true,width:55},{name:'email_error',index:'email_error',hidden:true}],jsonReader:{repeatitems:false},loadComplete:function(data){for(var i in data.rows){var _r=data.rows[i];if(_r.email_error==true){email_errors.push(_r.email);}}
draw_error_emails();$(container).find('tr.email-error').each(function(){var th=$(this);var $tooltip=$('<div class="tooltip"><div class="not_delivered_tooltip">'+'<strong>Invitation was not delivered.</strong>'+'<p>Your invitation could not be delivered due to incorrect e-mail address. '+'Please try inviting this person again when correct e-mail address is available.'+'<div class="remove-visitor-wrapper">'+'<a onclick="return ContactManager.deleteRow('+th.attr('id')+');">Delete this record</a>'+'</div>'+'</div></div>');$('body').append($tooltip);$tooltip.css({position:'absolute',top:th.offsetTop+'px',left:th.offsetLeft+'px'}).hide();var hideCb_timer=null;var hideCb=function()
{hideCb_timer=setTimeout(function(){$tooltip.hide();},10);}
th.mouseenter(function(){var o=th.offset();o.top+=23;$tooltip.css(o).show();clearTimeout(hideCb_timer);hideCb_timer=null;}).mouseleave(hideCb);$tooltip.mouseenter(function(){clearTimeout(hideCb_timer);hideCb_timer=null;}).mouseleave(hideCb)});},gridComplete:function(){var ids=container.jqGrid('getDataIDs');for(var i=0,l=ids.length;i<l;i++){var rowid=ids[i];var date_column=$('tr#'+rowid+' td:nth-child(5)',container);var h=date_column.html();if((h.length==0)||(h=='&nbsp;')){date_column.html('<span class="nodate">---</span>');}
fit_container($('tr#'+rowid+' td:nth-child(3)',container));fit_container($('tr#'+rowid+' td:nth-child(4)',container));}
if(opts.edit_allowed){for(var i=0,l=ids.length;i<l;i++){var rowid=ids[i];if(rowid==opts.visitor_id){continue;}
var edit='<a class="action edit" style="display:none;"><span class="ui-icon ui-icon-pencil"></span>Edit</a>';var cancel='<a class="action cancel" style="display:none;"><span class="ui-icon ui-icon-cancel"></span>Cancel</a>';container.jqGrid('setRowData',ids[i],{act:edit+cancel});$('tr#'+rowid+' a.action.edit',container).click(function(){toggleRow($(this).parent().parent().attr('id'));});$('tr#'+rowid+' a.action.cancel',container).click(cancel_row);}
$('tr',container).unbind('hover').unbind('click').hover(function(){var _id=$(this).attr('id');if(editing_id!=_id){$('.action.edit',this).show();}},function(){$('.action.edit',this).hide();});$('tr *',container).not('.jqgrid-actions').not('input[type="checkbox"]').not('a.action').click(function(event){if(!$('input[type="checkbox"]',$(this)).length){toggleRow($(this).parents('tr').attr('id'));event.stopPropagation();}});}
$('tr.jqgfirstrow td:nth-child(2)',container).css({padding:0});return true;}});}
function draw_error_emails(){if(email_errors.length>0){var ids=container.jqGrid('getDataIDs');for(var i=0,l=ids.length;i<l;i++){var rowid=ids[i];var email=container.jqGrid('getCell',rowid,'email');if($.inArray(email,email_errors)!=-1){var row=$('tr#'+rowid,container);row.addClass('email-error');$('input[type="checkbox"]',row).remove();$('a.action',row).remove();}}}}
function toggleRow(_id){if((editing_id!=null)&&(editing_id!=_id)){_restore_row(editing_id);}else{edit_row($('tr#'+_id));}
return true;}
function edit_row(row){var _id=$(row).attr('id');if(!opts.edit_allowed||(_id==opts.visitor_id)){return false;}
container.jqGrid('editRow',_id,{keys:false,url:opts.update_url});var select=$(row).find('select');select.data('old_value',select.val());var name=$(row).find('td[aria-describedby="manage-subscribers_name"]').html();var messages={'-1':name+' will no longer be allowed to administer this memorial. Proceed? ','64':name+' will be granted full administrators\' access to this memorial. This user will be able to perform the same actions as you can without restriction. Proceed?','128':name+' will be granted owner\'s access to this memorial. This user will be able to perform the same actions as you can without restriction. Proceed?'};$('select',row).change(function(){var row=$(this).closest('tr');if(typeof select.data('old_value')!='undefined'&&select.data('old_value')!=select.val()){if(confirm(messages[select.val()])){save_row(row);}else{select.val(select.data('old_value'));return false;}}
else{return false;}});$('select',row).change(function(){var row=$(this).closest('tr');save_row(row);});$('.action',row).hide();$('.action.cancel',row).show();editing_id=_id;}
function save_row(row){var _id=$(row).attr('id');container.jqGrid('saveRow',_id,{url:opts.update_url,successfunc:function(res){var text=res.responseText;var r=$.evalJSON(text);if(!r.success){alert(r.error_message);return false;}
if(r.reload_page&&Memorial){Memorial.reload_page_content();return true;}
_restore_row(_id);edit_in_progress=false;return true;}});}
function cancel_row(){var _id=$(this).closest('tr').attr('id');_restore_row(_id);cancelling_id=_id;}
function _restore_row(_id){if(edit_in_progress){return true;}
container.jqGrid('restoreRow',_id,{});$("tr#"+_id+' .action').hide();editing_id=null;}
init();return container;}})(jQuery);var ContactManager={container:null,opts:{delete_url:null},deleteRow:function(id){if(ContactManager.opts.delete_url)
{jQuery.post(ContactManager.opts.delete_url,{'id':id},function(data){var obj=jQuery.parseJSON(data);if(obj&&obj.success){jQuery('tr#'+id,ContactManager.container).hide();jQuery('.tooltip').hide();}else{alert(obj.error_message);}});}
return false;}};;(function($){var me=window.Announcements={opts:{},get_url:'/ajax/announcement_retrieve/',mark_url:'/ajax/announcement_mark_read/',container:null};me.init=function(args)
{me.opts=$.extend(me.opts,args);me.container=$('<div id="announcement-container"></div>').hide();$("body").prepend(me.container);Announcements.retrieve();};me.retrieve=function()
{window.setTimeout(function(){$.post(me.get_url,{memorial_id:(typeof(me.opts.memorial_id)=='undefined')?null:me.opts.memorial_id},function(res)
{if(res&&res.success)
{me.container.html(res.content);me.init_announcement();me.container.slideDown(1000);}
return true;},'json');},2000);};me.init_announcement=function(){$('.full-text-container',me.container).hide();$('a.readmore',me.container).click(function(){$('.short-text-container',me.container).hide();$('.full-text-container',me.container).show();$('.readmore-wrapper',me.container).hide();return false;});$('a.readless',me.container).click(function(){$('.full-text-container',me.container).hide();$('.short-text-container',me.container).show();$('.readmore-wrapper',me.container).show();return false;});$('a.close',me.container).click(function(){var _id=$(this).attr('rel');$.post(me.mark_url,{aid:_id},function(res){if(res&&res.success)
{me.container.slideUp(1000);me.container.html('');window.setTimeout(me.retrieve,10);}},'json');});};})(jQuery);;var Share={};(function($){me=Share;me.fbId=$('meta[property="fb:app_id"]').attr("content");me.shareFB=function(url,caption,msg,description,picture)
{if(typeof(FB)=='undefined')
{throw new Error('Facebook object not loaded.')}
FB.ui({app_id:me.fbId,method:'feed',display:'popup',name:msg,message:msg,link:url,caption:caption,description:description,picture:picture,width:600,height:300,size:{width:600,height:300}});return false;}
me.fbclick=function(el)
{el=$(el);me.shareFB(el.closest('[addthis\\:url]').attr('addthis:url'),'',el.closest('[addthis\\:title]').attr('addthis:title'),el.closest('[addthis\\:description]').attr('addthis:description'),el.closest('[imgsrc]').attr('imgsrc'));return false;}
me.fbinvite=function(el)
{el=$(el);FB.ui({method:'send',name:el.closest('[addthis\\:title]').attr('addthis:title'),description:el.closest('[addthis\\:description]').attr('addthis:description'),picture:el.closest('[imgsrc]').attr('imgsrc'),link:el.closest('[addthis\\:url]').attr('addthis:url')},function(){});return false;};me.emailclick=function(el,pageSection)
{el=$(el);el.closest('ul.items').hide();el.closest('li.container').removeClass('hover');var shareType=el.closest('[share_type]').attr('share_type');var shareId=el.closest('[share_id]').attr('share_id');if(!Memorial.loggedIn)
{if(typeof(pageSection)=='undefined')
{pageSection='share_'+shareType+'|'+shareType+'|'+shareId;}
Memorial.openUserLoginDialog(false,pageSection);}
else
{var url='ShareByEmailForm';url+='&share_type='+shareType;url+='&share_id='+shareId;url+='&lst_id='+Memorial.id;showPopupForm_center(url,null,null,'832px','sharebyemail_form');}
return false;}})(jQuery);